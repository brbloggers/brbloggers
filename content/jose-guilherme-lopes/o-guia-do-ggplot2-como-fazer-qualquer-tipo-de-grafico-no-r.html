<div class="entry-content"> <p>Na linguagem R, existem diversas fun&#xE7;&#xF5;es para a cria&#xE7;&#xE3;o de gr&#xE1;ficos. Por&#xE9;m, o pacote <strong>ggplot2</strong>&#xA0;traz uma extens&#xE3;o mais ampla, moderna e acess&#xED;vel para visualiza&#xE7;&#xE3;o de dados, o que o torna um dos pacotes mais usados dentro do <a href="http://joseguilhermelopes.com.br/o-pacote-tidyverse-para-r/">Tidyverse</a>.</p>
<p>Neste artigo, vou apresentar todas as fun&#xE7;&#xF5;es necess&#xE1;rias para cria&#xE7;&#xE3;o de gr&#xE1;ficos com o ggplot2.</p>
<p>Para exemplificar as fun&#xE7;&#xF5;es, vou usar os datasets que v&#xEA;m junto ao pacote tidyverse como o <strong>diamonds</strong> e o&#xA0;<strong>mpg</strong>. Assim, fica mais f&#xE1;cil para voc&#xEA; replicar os c&#xF3;digos no seu computador.</p>
<p>Mas se voc&#xEA; quiser outros datasets para praticar ou pesquisar, recomendo buscar no <a href="http://joseguilhermelopes.com.br/kaggle-o-portal-para-ciencia-de-dados/">Kaggle</a>&#xA0;ou em alguns dos sites linkados&#xA0;<a href="http://joseguilhermelopes.com.br/15-excelentes-sites-de-fontes-de-dados-abertos/">aqui</a>.</p>
<p>Para utilizar o ggplot2, instale o pacote executando a fun&#xE7;&#xE3;o&#xA0;<em><strong>install.packages(&#x201C;ggplot2&#x201D;)</strong>&#xA0;</em>e em seguida o carregue executando&#xA0;<em><strong>library(&#x201C;ggplot2&#x201D;)</strong>.&#xA0;</em>Mas recomendo instalar e carregar todo o conjunto de pacotes do Tidyverse, assim voc&#xEA; carrega de uma s&#xF3; vez todas as ferramentas b&#xE1;sicas necess&#xE1;rias para trabalhar com dados no R. Para isso, instale e carregue o tidyverse executando as seguintes fun&#xE7;&#xF5;es:</p>
<p><em>install.packages(&#x201C;tidyverse&#x201D;)</em></p>
<p><em>library(&#x201C;tidyverse&#x201D;)<br>
</em></p>
<h3><strong><br>
Os par&#xE2;metros para cria&#xE7;&#xE3;o de gr&#xE1;ficos</strong></h3> <p>A seguir est&#xE1; descrito o template para a cria&#xE7;&#xE3;o de qualquer gr&#xE1;fico com o ggplot2, com todos os sete par&#xE2;metros que podem ser utilizados. Os par&#xE2;metros est&#xE3;o em negrito e entre &lt; &gt;, e s&#xE3;o a parte do c&#xF3;digo em que voc&#xEA; deve especificar o argumento desejado.</p> <blockquote><p><em>ggplot(data = &lt;<strong>DATASET</strong>&gt;) +</em></p>
<p><em>&lt;<strong>GEOM_FUNCTION</strong>&gt;(mapping = aes(&lt;<strong>MAPPING</strong>&gt;), stat = &lt;<strong>STAT</strong>&gt;, position = &lt;<strong>POSITION</strong>&gt;) +</em></p>
<p><em>&lt;<strong>COORDINATE_FUNCTION</strong>&gt; + </em></p>
<p><em>&lt;<strong>FACET_FUNCTION</strong>&gt;</em></p>
</blockquote>
<p>Vou entrar em detalhes sobre os par&#xE2;metros ao longo deste artigo, mas a seguir descrevo um resumo sobre cada um deles:</p>
<ul>
<li><strong>&lt;DATASET&gt;&#xA0;</strong>: o dataset onde est&#xE3;o os dados que voc&#xEA; deseja criar o gr&#xE1;fico <strong>(Obrigat&#xF3;rio).</strong></li>
<li><strong>&lt;GEOM_FUNCTION&gt;</strong> : a fun&#xE7;&#xE3;o geom &#xE9; o objeto geom&#xE9;trico que um gr&#xE1;fico utiliza para representar os dados, como barras, pontos, linhas, boxplots,&#xA0; etc.&#xA0;<strong>(Obrigat&#xF3;rio).</strong></li>
<li><strong>&lt;MAPPING&gt; :&#xA0;</strong>aqui voc&#xEA; especifica quais s&#xE3;o as vari&#xE1;veis do seu dataset a serem utilizadas. Por exemplo, para um gr&#xE1;fico de dispers&#xE3;o, especificamos&#xA0;<em>mapping = aes(x = variavel1, y = variavel2)</em>. (<strong>Obrigat&#xF3;rio)</strong></li>
<li><strong>&lt;STAT&gt;</strong> : &#xE9; a transforma&#xE7;&#xE3;o estat&#xED;stica a ser feita nos dados para a cria&#xE7;&#xE3;o do gr&#xE1;fico. Cada geom possui um stat padr&#xE3;o, mas caso voc&#xEA; queira um stat diferente para aquele geom, ele deve ser especificado.</li>
<li><strong>&lt;POSITION&gt; :</strong> &#xE9; a posi&#xE7;&#xE3;o em que os objetos do geom se localizam.&#xA0;Cada geom possui uma posi&#xE7;&#xE3;o padr&#xE3;o, mas caso voc&#xEA; queira uma posi&#xE7;&#xE3;o diferente para aquele geom, ela deve ser especificada.</li>
<li><strong>&lt;COORDINATE_FUNCTION&gt; :&#xA0;</strong>&#xE9; a fun&#xE7;&#xE3;o que define o sistema de coordenadas a ser utilizado no gr&#xE1;fico, que por padr&#xE3;o &#xE9; o sistema cartesiano. Voc&#xEA; pode alterar e inverter as coordenadas do gr&#xE1;fico com esta fun&#xE7;&#xE3;o, por exemplo para alterar um gr&#xE1;fico de colunas para um gr&#xE1;fico de barras.</li>
<li><strong>&lt;FACET_FUNCTION&gt; :&#xA0;</strong>esta fun&#xE7;&#xE3;o permite dividir o seu gr&#xE1;fico em subgr&#xE1;ficos, geralmente a divis&#xE3;o &#xE9; realizada por uma vari&#xE1;vel categorizada, permitindo assim a compara&#xE7;&#xE3;o entre diferentes grupos.</li>
</ul>
<p>Al&#xE9;m destes par&#xE2;metros, existem as fun&#xE7;&#xF5;es para inser&#xE7;&#xE3;o de t&#xED;tulos e altera&#xE7;&#xE3;o de cores do gr&#xE1;fico, que citarei no final.</p>
<p>&#xC9; poss&#xED;vel criar centenas de milhares de gr&#xE1;ficos ao realizar combina&#xE7;&#xF5;es entre estes par&#xE2;metros. &#xC9; muito &#xFA;til enxergar as fun&#xE7;&#xF5;es do ggplot2, em especial os geoms, como camadas.</p>
<p>N&#xE3;o &#xE9; necess&#xE1;rio memorizar todas as fun&#xE7;&#xF5;es do ggplot2, apenas entender os conceitos e a l&#xF3;gica dos par&#xE2;metros que criam os gr&#xE1;ficos. Para ver em detalhes as fun&#xE7;&#xF5;es do ggplot2 utilize a ajuda do R, executando ? + fun&#xE7;&#xE3;o, ou ?? + fun&#xE7;&#xE3;o. Voc&#xEA; tamb&#xE9;m pode ver uma lista das fun&#xE7;&#xF5;es apenas digitando ? + o in&#xED;cio da fun&#xE7;&#xE3;o.</p>
<p>Por exemplo, se na cria&#xE7;&#xE3;o do seu gr&#xE1;fico voc&#xEA; n&#xE3;o sabe ou n&#xE3;o se lembra qual geom usar, execute <em>? + geom_.&#xA0;</em>Isto abrir&#xE1; uma caixa com todas as fun&#xE7;&#xF5;es que come&#xE7;am com&#xA0;<em>geom_</em>, e assim voc&#xEA; pode ler sobre os detalhes de cada uma:</p>
<p><img class="aligncenter wp-image-507" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-1.png%20676w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-1-300x95.png%20300w" alt="" width="500" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-1.png 676w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-1-300x95.png 300w"></p> <h3><strong>Especificando o dataset e mapeando as vari&#xE1;veis</strong></h3> <p>Para cria&#xE7;&#xE3;o de gr&#xE1;ficos com o ggplot2, inicie com a fun&#xE7;&#xE3;o&#xA0;<em>ggplot().&#xA0;</em>Por padr&#xE3;o, o primeiro argumento da fun&#xE7;&#xE3;o <em>ggplot()&#xA0;</em>&#xE9; o nome do dataset onde est&#xE3;o os dados que voc&#xEA; deseja criar o gr&#xE1;fico. Assim, se voc&#xEA; especificar o dataset no primeiro argumento da fun&#xE7;&#xE3;o ggplot, n&#xE3;o &#xE9; necess&#xE1;rio inserir &#x201C;<em>data = &#x201C;</em>, voc&#xEA; pode inserir apenas o nome do dataset.</p>
<p>Por exemplo, o dataset&#xA0;<em>diamonds</em>, que vem imbutido no tidyverse, pode ser declarado no ggplot no formato:</p>
<p><em><strong>ggplot(data = dataset)</strong> ,&#xA0;</em>ou simplesmente,&#xA0;<strong><em>ggplot(dataset)</em></strong><em> .</em></p>
<p>A especifica&#xE7;&#xE3;o, ou mapeamento, das vari&#xE1;veis, &#xE9; feita utilizando a fun&#xE7;&#xE3;o&#xA0;<em>mapping =&#xA0;</em><em>aes()&#xA0;</em>ou simplesmente&#xA0;<em>aes().&#xA0;</em>Esta fun&#xE7;&#xE3;o pode ser declarada dentro da fun&#xE7;&#xE3;o&#xA0;<em>ggplot()</em> ou dentro da fun&#xE7;&#xE3;o&#xA0;geom, a diferen&#xE7;a &#xE9; que na fun&#xE7;&#xE3;o&#xA0;<em>ggplot()&#xA0;</em>o mapeamento das vari&#xE1;veis &#xE9; global para todo o resto do c&#xF3;digo (muito &#xFA;til se voc&#xEA; estiver trabalhando com m&#xFA;ltiplos geoms), enquanto que na fun&#xE7;&#xE3;o geom o mapeamento &#xE9; espec&#xED;fico para aquele geom.</p>
<p><em><strong>ggplot(data = dataset, aes(x = variavel1, y = variavel2)) +&#xA0;</strong><strong>geom_x()</strong></em></p>
<p>&#xE9; equivalente &#xE0;</p>
<p><strong><em>ggplot(data = dataset) + geom_x(aes(x = variavel1, y = variavel2))</em></strong></p>
<p>Leve em considera&#xE7;&#xE3;o que &#xE9; poss&#xED;vel realizar o mapeamento de fun&#xE7;&#xF5;es de vari&#xE1;veis, por exemplo&#xA0;<em>aes(x = variavel1 ^ 2).</em></p>
<p>Al&#xE9;m disso, na fun&#xE7;&#xE3;o&#xA0;<em>aes()</em>, &#xE9; poss&#xED;vel mapear vari&#xE1;veis com o objetivo de agregar mais informa&#xE7;&#xE3;o visual ao gr&#xE1;fico.</p>
<p>Por exemplo, num gr&#xE1;fico de dispers&#xE3;o (onde o geom &#xE9; o <em>geom_point() )</em>, temos que declarar duas vari&#xE1;veis quantitativas dentro do&#xA0;<em>aes()&#xA0;</em>para criar o gr&#xE1;fico. Mas poder&#xED;amos agregar mais informa&#xE7;&#xE3;o ao gr&#xE1;fico de dispers&#xE3;o ao utilizar cores para exibir as diferentes categorias presentes numa terceira vari&#xE1;vel. Para isso, especificamos esta terceira vari&#xE1;vel como argumento de &#x201C;color&#x201D; ou &#x201C;colour&#x201D;:</p>
<p><em><strong>ggplot(data=mpg) + </strong></em><br>
<em><strong> geom_point(mapping = aes(x=displ, y = hwy))</strong></em></p>
<p><em><strong>ggplot(data=mpg) + </strong></em><br>
<em><strong> geom_point(mapping = aes(x=displ, y = hwy, color = class))</strong></em></p> <p><img class="aligncenter wp-image-515 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1.png%201629w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-300x90.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-768x231.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-1024x307.png%201024w" alt="" width="1629" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1.png 1629w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-300x90.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-768x231.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-1-1024x307.png 1024w"></p> <p>Se caso voc&#xEA; n&#xE3;o possa ou n&#xE3;o queira fazer essa divis&#xE3;o por cores, pode fazer pela transpar&#xEA;ncia dos pontos com&#xA0;<em>alpha</em> (ex:&#xA0;<em>alpha = class)</em> ou pelo formato dos pontos com&#xA0;<em>shape</em> (ex:&#xA0;<em>shape = class).&#xA0;</em>Mas aten&#xE7;&#xE3;o que em&#xA0;<em>shape</em> s&#xE3;o aceitos no m&#xE1;ximo 6 diferentes categorias.</p>
<h3></h3>
<h3><strong><br>
Objetos geom&#xE9;tricos &#x2013; geoms</strong></h3> <p>Irei apresentar aqui um resumo da maioria dos&#xA0;geoms do ggplot2. Para facilitar a apresenta&#xE7;&#xE3;o, irei dividir os geoms por quantidade e tipo de vari&#xE1;veis a serem especificadas.</p>
<p>&#xC9; sempre v&#xE1;lido explorar a ajuda da fun&#xE7;&#xE3;o (<em>?geom_x</em>) para ver os par&#xE2;metros que podem ser inseridos na fun&#xE7;&#xE3;o, assim voc&#xEA; usa todo o potencial do geom e deixa o gr&#xE1;fico na formato exato que desejar.</p>
<ul>
<li><strong>Gr&#xE1;ficos para uma vari&#xE1;vel &#x2013; cont&#xED;nua</strong></li>
</ul>
<p>c &lt;- ggplot(data=mpg, mapping=aes(x = hwy))</p>
<p><em>c + geom_area()</em></p>
<p>c + geom_density()</p>
<p><em>c + geom_dotplot()</em></p>
<p><em>c + geom_freqpoly()</em></p>
<p><em>c + geom_histogram()</em></p>
<p><img class="size-medium wp-image-519 alignleft" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-2.png 785w"> <img class="size-medium wp-image-520 alignleft" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-1.png 785w"> <img class="size-medium wp-image-521 alignleft" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-2.png 785w"> <img class="size-medium wp-image-522 alignleft" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/4.png 785w"> <img class="size-medium wp-image-523 alignleft" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/5.png 785w"></p> <ul>
<li><strong>Gr&#xE1;ficos para uma vari&#xE1;vel &#x2013; discreta</strong></li>
</ul>
<p><em>ggplot(data=mpg, mapping=aes(x=fl))+</em><br>
<em> geom_bar()</em></p>
<p><img class="alignnone size-medium wp-image-525" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/6.png 785w"></p>
<ul>
<li><strong>Gr&#xE1;ficos para duas vari&#xE1;veis &#x2013; ambas cont&#xED;nuas</strong></li>
</ul>
<p><em>e &lt;- ggplot(data=mpg, mapping=aes(x=cty, y=hwy))</em></p>
<p><em>e + geom_point()</em></p>
<p><em>e + geom_jitter()</em></p>
<p><em>e + geom_smooth()</em></p>
<p><img class="alignnone size-medium wp-image-526" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-3.png 785w"> <img class="alignnone size-medium wp-image-527" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-2.png 785w"> <img class="alignnone size-medium wp-image-528" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-3.png 785w"></p> <ul>
<li><strong>Gr&#xE1;ficos para duas vari&#xE1;veis &#x2013; uma discreta e uma cont&#xED;nua</strong></li>
</ul>
<p><em>f &lt;- ggplot(mpg, aes(class, hwy))</em></p>
<p><em>f + geom_bar(stat=&#x201D;identity&#x201D;)</em></p>
<p><em>f + geom_boxplot()</em></p>
<p><em>f + geom_violin()</em></p>
<p><img class="alignnone size-medium wp-image-531" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-4.png 785w"> <img class="alignnone size-medium wp-image-532" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-3.png 785w"> <img class="alignnone size-medium wp-image-533" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-4.png 785w"></p> <ul>
<li><b>Distribui&#xE7;&#xF5;es cont&#xED;nuas bivariadas</b></li>
</ul>
<p><em>h &lt;- ggplot(diamonds, aes(carat, price))</em></p>
<p><em>h + geom_bin2d(binwidth = c(0.25, 500))</em></p>
<p><em>h +&#xA0; geom_density_2d()</em></p>
<p><em>h +&#xA0; geom_hex()</em></p> <p><img class="alignnone size-medium wp-image-534" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-5.png 785w"> <img class="alignnone size-medium wp-image-535" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-4.png 785w"> <img class="alignnone size-medium wp-image-536" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-5.png 785w"></p> <p><em>i &lt;- ggplot(economics, aes(date, unemploy))</em></p>
<p><em>i +&#xA0;</em><em>geom_area()</em></p>
<p><em>i +&#xA0;&#xA0;</em><em>geom_line()</em></p>
<p><img class="alignnone size-medium wp-image-537" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-6.png 785w"> <img class="alignnone size-medium wp-image-538" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-5.png 785w"></p> <ul>
<li><strong>Gr&#xE1;ficos para tr&#xEA;s vari&#xE1;veis</strong></li>
</ul>
<p><em>seals$z &lt;- with(seals, sqrt(delta_long^2 + delta_lat^2))</em><br>
<em> l &lt;- ggplot(seals, aes(long, lat))</em></p>
<p><em>l +&#xA0; geom_contour(aes(z=z))</em></p>
<p><em>l +&#xA0; geom_tile(aes(fill=z))</em></p> <p><img class="alignnone size-medium wp-image-539" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-7.png 785w"> &#xA0;<img class="alignnone size-medium wp-image-541" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6.png%20785w" alt="" width="300" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-6.png 785w"></p> <p>Veja tamb&#xE9;m: <em>?geom_map</em></p>
<h3><strong><br>
Transforma&#xE7;&#xF5;es estat&#xED;sticas &#x2013; stats</strong></h3> <p>Alguns geoms realizam uma transforma&#xE7;&#xE3;o nos dados para a cria&#xE7;&#xE3;o do gr&#xE1;fico. Por exemplo, o gr&#xE1;fico de colunas/barras faz uma contagem de cada observa&#xE7;&#xE3;o de uma vari&#xE1;vel e exibe no gr&#xE1;fico, colunas proporcionais &#xE0; esta contagem.</p>
<p>&#x201C;Stats&#x201D; &#xE9; uma forma alternativa para criar uma camada.</p>
<p>Ambas as fun&#xE7;&#xF5;es stat e geom combinam um stat com um geom para criar uma camada. Por exemplo,&#xA0;<strong>stat_count(geom = &#x201C;bar&#x201D;)&#xA0;</strong>faz o mesmo que&#xA0;<strong>geom_bar(stat = &#x201C;count&#x201D;).</strong></p>
<p>Use um stat para escolher uma transforma&#xE7;&#xE3;o a ser visualizada.</p>
<p>Veja por exemplo este gr&#xE1;fico de colunas para a vari&#xE1;vel &#x201C;cut&#x201D;, que possui 5 diferentes observa&#xE7;&#xF5;es:</p>
<p><em>ggplot(data=diamonds)+</em><br>
<em> geom_bar(mapping=aes(x=cut))</em></p>
<p><img class="aligncenter wp-image-476 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/1.png%20500w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/1-300x187.png%20300w" alt="" width="500" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/1.png 500w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/1-300x187.png 300w"></p>
<p>Perceba no gr&#xE1;fico acima, que no eixo y est&#xE1; descrito &#x201C;count&#x201D;. N&#xE3;o tivemos que especificar no nosso c&#xF3;digo a realiza&#xE7;&#xE3;o desta contagem, pois a transforma&#xE7;&#xE3;o do tipo contagem (<strong>count</strong>) &#xE9; a transforma&#xE7;&#xE3;o estat&#xED;stica (<strong>stat</strong>) padr&#xE3;o da fun&#xE7;&#xE3;o geom_bar.</p>
<p>Veja a lista detalhada de todas as transforma&#xE7;&#xF5;es do ggplot2, digitando&#xA0;<em>?stat_</em> e navegando pelo menu exibido.</p> <h3><strong>Ajustes de Posi&#xE7;&#xE3;o &#x2013; positions</strong></h3> <p>Ajustes de posi&#xE7;&#xE3;o definem como os geoms se localizam, evitando que ocupem o mesmo espa&#xE7;o.</p>
<p>Por exemplo, voc&#xEA; deseja criar um gr&#xE1;fico de barras para duas vari&#xE1;veis. A posi&#xE7;&#xE3;o das barras podem ser uma ao lado da outra, empilhadas no tamanho de cada uma, empilhadas mas com a altura normalizada, etc.</p>
<p>Para definir a posi&#xE7;&#xE3;o dos seus objetos/elementos, utilize o argumento&#xA0;<strong>position =&#xA0; &#x201C;x&#x201D;</strong> dentro da fun&#xE7;&#xE3;o geom. O &#x201C;x&#x201D; pode ser declarado nas seguintes formas:</p> <ul>
<li><strong>position = &#x201C;identity&#x201D;</strong> ir&#xE1; colocar cada objeto na posi&#xE7;&#xE3;o exata em que ele cairia no contexto do gr&#xE1;fico. &#xC9; um ajuste &#xFA;til para geoms do tipo 2D, como no gr&#xE1;fico de dispers&#xE3;o (geom_point), no qual &#x201C;identity&#x201D; &#xE9; o ajuste de posi&#xE7;&#xE3;o padr&#xE3;o. Para gr&#xE1;ficos de barras, n&#xE3;o &#xE9; um ajuste muito &#xFA;til, mas segue como exemplo:</li>
</ul>
<p><em>&#xA0;ggplot(diamonds, aes(x=cut, fill = clarity))+</em><br>
<em> geom_bar(position=&#x201D;identity&#x201D;)</em></p>
<p><img class=" wp-image-485 aligncenter" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity.png%20785w" alt="" width="476" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/identity.png 785w"></p>
<ul>
<li><strong>position = &#x201C;dodge&#x201D;&#xA0;</strong>coloca objetos sobrepostos um ao lado do outro. Isto torna mais f&#xE1;cil a compara&#xE7;&#xE3;o de valores individuais:</li>
</ul>
<p><em>ggplot(diamonds, aes(x=cut, fill=clarity))+</em><br>
<em> geom_bar(position=&#x201D;dodge&#x201D;)</em></p>
<p><img class=" wp-image-486 aligncenter" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge.png%20785w" alt="" width="467" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/dodge.png 785w"></p> <ul>
<li><strong>position = &#x201C;fill&#x201D;</strong> ir&#xE1; empilhar os elementos um sobre o outro, mas normalizando a altura. Isso &#xE9; muito &#xFA;til para comparar propor&#xE7;&#xF5;es entre os grupos:</li>
</ul>
<p><em>ggplot(diamonds, aes(x=cut, fill=clarity))+</em><br>
<em> geom_bar(position=&#x201D;fill&#x201D;)</em></p> <p><img class=" wp-image-488 aligncenter" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill.png%20785w" alt="" width="475" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/fill.png 785w"></p>
<ul>
<li><strong>position = &#x201C;jitter&#x201D;&#xA0;</strong>&#xE9; muito &#xFA;til para gr&#xE1;ficos de dispers&#xE3;o. Um dos problemas do gr&#xE1;fico de dispers&#xE3;o &#xE9; o chamado&#xA0;<em>overplotting</em>, que ocorre quando dois ou mais pontos est&#xE3;o posicionados no mesmo local do gr&#xE1;fico (como x = 40 e y = 2) e assim a visualiza&#xE7;&#xE3;o fica comprometida pois s&#xF3; enxergaremos um &#xFA;nico ponto naquele local. Ao definir position=&#x201D;jitter&#x201D;, o ggplot ir&#xE1; adicionar um ru&#xED;do aleat&#xF3;rio nas posi&#xE7;&#xF5;es de X e Y.</li>
</ul>
<p>Adicionar aleatoriedade pode parecer uma forma estranha de melhorar o seu gr&#xE1;fico, mas enquanto o&#xA0;<em>jitter</em> torna seu gr&#xE1;fico menos preciso em pequena escala, ele torna o seu gr&#xE1;fico mais revelador e significativo em larga escala.</p>
<p><em>ggplot(mpg, aes(x=displ, y=hwy))+</em><br>
<em> geom_point(position=&#x201D;jitter&#x201D;)</em></p>
<p><img class=" wp-image-489 aligncenter" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter-768x478.png%20768w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter.png%20785w" alt="" width="451" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter-768x478.png 768w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/jitter.png 785w"></p> <p>Outros ajustes de posi&#xE7;&#xE3;o que n&#xE3;o irei exemplificar aqui, mas que s&#xE3;o bastante intuitivos e f&#xE1;ceis de aplicar s&#xE3;o:</p>
<ul>
<li><strong>position = &#x201C;nudge&#x201D;</strong>, que afasta os r&#xF3;tulos dos pontos.</li>
<li><strong>position = &#x201C;stack&#x201D;</strong>, que empilha os elementos um sobre o outro.</li>
</ul>
<p>Para obter mais informa&#xE7;&#xE3;o sobre qualquer ajuste de posi&#xE7;&#xE3;o, veja a p&#xE1;gina de ajuda associada a cada ajuste:</p>
<p><em>?position_dodge, ?position_fill, ?position_identity, ?position_jitter, ?position_stack</em>, etc.</p> <h3><strong>Sistemas de Coordenadas &#x2013; coordinates</strong></h3> <div>O sistema de coordenadas padr&#xE3;o &#xE9; o Cartesiano, onde as posi&#xE7;&#xF5;es de X e Y agem independentemente para encontrar a localiza&#xE7;&#xE3;o de cada ponto/objeto no gr&#xE1;fico.</div>
<div>Entretanto existem outros sistemas de coordenadas que podem ser bastante &#xFA;teis para visualiza&#xE7;&#xE3;o de dados, de acordo com o seu objetivo:</div> <ul>
<li><strong>coord_flip()</strong> faz a invers&#xE3;o entre os eixos X e Y. Isso &#xE9; muito &#xFA;til quando o n&#xFA;mero de vari&#xE1;veis que voc&#xEA; possui no eixo X &#xE9; muito extenso e a leitura fica comprometida.</li>
</ul> <div>Por exemplo, neste gr&#xE1;fico s&#xE3;o exibidos os boxplots de 15 vari&#xE1;veis:</div> <div><em>ggplot(mpg, aes(x = manufacturer, y = hwy))+</em></div> <p><img class="aligncenter wp-image-495 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1.png%20785w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-768x478.png%20768w" alt="" width="785" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1.png 785w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/1-768x478.png 768w"></p> <div>Se inserirmos a fun&#xE7;&#xE3;o coord_flip(), os eixos se invertem e o gr&#xE1;fico pode ser melhor visualizado:</div> <div><em>ggplot(mpg, aes(x = manufacturer, y = hwy))+</em></div> <div><img class="aligncenter wp-image-496 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2.png%20785w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-768x478.png%20768w" alt="" width="785" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2.png 785w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/2-768x478.png 768w"></div> <div>
<div>Dica: o gr&#xE1;fico de barras nada mais &#xE9; do que um gr&#xE1;fico de colunas geom_bar() com a fun&#xE7;&#xE3;o coord_flip().</div> </div>
<div>
<ul>
<li><strong>coord_quickmap()&#xA0;</strong>&#xE9; muito &#xFA;til quando se est&#xE1; trabalhando com dados espaciais. Esta fun&#xE7;&#xE3;o ajusta corretamente a extens&#xE3;o do seu mapa, em especial quando se usa geom_polygon().</li>
</ul>
</div> <ul>
<li><strong>coord_polar()</strong>&#xA0;transforma o gr&#xE1;fico para o sistema de coordenadas polares. Utilize esta fun&#xE7;&#xE3;o para criar gr&#xE1;ficos de Coxcomb e <a href="http://www.sthda.com/english/wiki/ggplot2-pie-chart-quick-start-guide-r-software-and-data-visualization">gr&#xE1;ficos de setores</a>.</li>
</ul>
<p>Exemplo de gr&#xE1;fico de Coxcomb:</p>
<p><em>ggplot(diamonds, aes(x = cut, fill=cut))+</em><br>
<em> geom_bar()+</em><br>
<em> coord_polar()</em></p> <p><img class="aligncenter wp-image-497 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3.png%20785w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-768x478.png%20768w" alt="" width="785" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3.png 785w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/12/3-768x478.png 768w"></p> <h3><strong><br>
Dividindo o gr&#xE1;fico em subgr&#xE1;ficos &#x2013; facets</strong></h3> <p>Facetas, ou facets, t&#xEA;m o prop&#xF3;sito de dividir um gr&#xE1;fico em subgr&#xE1;ficos baseando-se em uma ou mais vari&#xE1;veis discretas (em especial vari&#xE1;veis categorizadas).</p>
<p>Facetas podem ser muito &#xFA;teis quando voc&#xEA; deseja visualizar o comportamento de diferentes categorias num mesmo gr&#xE1;fico.</p>
<p>Por exemplo, estamos visualizando um gr&#xE1;fico de dispers&#xE3;o entre o tamanho do motor de um carro (displ) e o consumo de gasolina por milha percorrida(hwy):</p>
<p><em>ggplot(data=mpg)+</em><br>
<em> geom_point(mapping=aes(x=displ, y=hwy))</em></p>
<p><img class="aligncenter wp-image-478 size-full" src="http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2.png%20785w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2-300x187.png%20300w,%20http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2-768x478.png%20768w" alt="" width="785" srcset="http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2.png 785w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2-300x187.png 300w, http://joseguilhermelopes.com.br/wp-content/uploads/2017/11/2-768x478.png 768w"></p>
<p>e ent&#xE3;o decidimos dividir este gr&#xE1;fico pelo tipo do autom&#xF3;vel(class), assim podemos visualizar o mesmo comparativo mas dividido entre categorias. Para isso usamos a fun&#xE7;&#xE3;o FACET:</p>
<p>ggplot(data=mpg)+
geom_point(mapping=aes(x=displ, y=hwy))+</p><p>
facet_wrap(~ class, nrow=2)</p></div>
