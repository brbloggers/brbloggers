<div class="post-inner-content">
<div class="vc_row wpb_row vc_row-fluid vc_custom_1506116488244 vc_row-has-fill"><div class="wpb_column vc_column_container vc_col-sm-12"><div class="vc_column-inner "><div class="wpb_wrapper">
<div class="wpb_text_column wpb_content_element ">
<div class="wpb_wrapper">
<p>Uma boa maneira de melhorar suas habilidades em R é desenvolvendo projetos práticos, mesmo que não seja algo que envolva aplicar técnicas avançadas estatísticas. Suponha por exemplo que você gostaria que existisse um site que mostrasse no final do dia as principais movimentações na Bovespa, destacando às ações que tiveram uma maior variação em seu preço, em comparação com o preço de fechamento anterior.</p>
<p>Uma boa maneira de trabalhar com dados de ações seria com o pacote <code>quantmod</code>. Contudo, para cumprir o desafio proposto neste post, seria necessário baixar manualmente as ações de cada uma das empresas listadas na Bovespa (lista essa que você teria de criar manualmente), agrupar os dados em uma estrutura única (como um data frame) e aplicar as funções de data wrangling necessárias.</p>
<p>Outra, que será a abordada aqui, é pelo web scraping, que consiste em extrair dados de páginas na Internet de forma automatizada. Para isso, <a href="http://exame.abril.com.br/mercados/cotacoes-bovespa/acoes?page=1%22">esta página no site da Exame</a> nos ajuda. Ela (e as páginas subsequentes) traz uma tabela com o nome da empresa, o preço da ação em R$ e a variação em relação ao fechamento anterior, entre outras. Nós precisamos, então, extrair a tabela da página, fazer a limpeza necessária e trabalhar com os dados. Isso é muito mais fácil do que parece.</p>
<p>Para este tutorial, usaremos estes pacotes:</p>
<div id="crayon-5a988d09cf38c880667568" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
library(rvest) # web scraping
library(tidyverse) # suite de pacotes
library(magrittr) # pipe = S2
library(stringr) # manipulacao de texto
library(ggthemes) # usaremos para fazer graficos parecidos com o da The Economist
library(ggrepel) # para plotar o nome das principais acoes</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf38c880667568-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf38c880667568-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf38c880667568-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf38c880667568-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf38c880667568-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf38c880667568-6">6</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf38c880667568-1">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">rvest</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># web scraping</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf38c880667568-2">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">tidyverse</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># suite de pacotes</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf38c880667568-3">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">magrittr</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># pipe = S2</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf38c880667568-4">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">stringr</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># manipulacao de texto</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf38c880667568-5">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">ggthemes</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># usaremos para fazer graficos parecidos com o da The Economist</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf38c880667568-6">
<span class="crayon-e">library</span><span class="crayon-sy">(</span><span class="crayon-v">ggrepel</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># para plotar o nome das principais acoes</span>
</div>
</div></td>
</tr></table>
</div>
</div>

<p></p>
<h3>Obtenção dos dados</h3>
<p>Primeiramente, vamos construir um vetor com todas as páginas das ações.No momento deste post, eram 17:</p>
<div id="crayon-5a988d09cf393879586866" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
url.exame 1:17)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a988d09cf393879586866-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a988d09cf393879586866-1">
<span class="crayon-v">url</span><span class="crayon-sy">.</span><span class="crayon-i">exame</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-cn">17</span><span class="crayon-sy">)</span>
</div></div></td>
</tr></table>
</div>
</div>

<p>Sobre cada página criada no comando acima, será executada a função criada abaixo para extrair a tabela que precisamos:</p>
<div id="crayon-5a988d09cf395739351552" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
extrair.tabela %
read_html() %&amp;gt;% # le codigo fonte da pagina
html_table() %&amp;gt;% # extrai tabelas da pagina
.[[2]] %&amp;gt;% # por tentativa e erro, das tabelas retornadas, a que queremos é a segunda
select(1:3) %&amp;gt;% # apenas as tres primeiras colunas sao usadas
set_names(c("acao", "preco_reais", "variacao")) %&amp;gt;% # renomeia colunas
as.data.frame()
}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf395739351552-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf395739351552-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf395739351552-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf395739351552-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf395739351552-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf395739351552-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf395739351552-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf395739351552-8">8</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf395739351552-1">
<span class="crayon-v">extrair</span><span class="crayon-sy">.</span><span class="crayon-v">tabela</span><span class="crayon-h"> </span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf395739351552-2">
<span class="crayon-e">read_html</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-p"># le codigo fonte da pagina</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf395739351552-3">
<span class="crayon-e">html_table</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-p"># extrai tabelas da pagina</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf395739351552-4">
<span class="crayon-sy">.</span><span class="crayon-sy">[</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-p"># por tentativa e erro, das tabelas retornadas, a que queremos é a segunda</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf395739351552-5">
<span class="crayon-e">select</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-p"># apenas as tres primeiras colunas sao usadas</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf395739351552-6">
<span class="crayon-e">set_names</span><span class="crayon-sy">(</span><span class="crayon-e">c</span><span class="crayon-sy">(</span><span class="crayon-s">"acao"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"preco_reais"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"variacao"</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-p"># renomeia colunas</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf395739351552-7">
<span class="crayon-st">as</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e">frame</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf395739351552-8"><span class="crayon-sy">}</span></div>
</div></td>
</tr></table>
</div>
</div>

<p></p>
<div id="crayon-5a988d09cf398132832529" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
lista.acoes % map(extrair.tabela)
# checando se deu certo
lista.acoes %&amp;gt;% map_lgl(is.data.frame)

## [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [15] TRUE TRUE TRUE
# transformar os 17 dataframes em um so
df.acoes % bind_rows()
# checando o arquivo
str(df.acoes)

## 'data.frame': 489 obs. of 3 variables:
## $ acao : chr "ABCB4\n ABC Brasil PN" "ABEV3\n Ambev S.A" "AEFI11\n FII AESAPAR CI" "AELP3\n AES Elpa ON" ...
## $ preco_reais: chr "16,31" "19,39" "146,25" "6,07" ...
## $ variacao : chr "-0,49" "0,21" "-1,18" "-0,16" ...</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-8">8</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-10">10</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-12">12</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf398132832529-14">14</div>
<div class="crayon-num" data-line="crayon-5a988d09cf398132832529-15">15</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf398132832529-1">
<span class="crayon-v">lista</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-v">extrair</span><span class="crayon-sy">.</span><span class="crayon-v">tabela</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-2"><span class="crayon-p"># checando se deu certo</span></div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-3">
<span class="crayon-v">lista</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">map_lgl</span><span class="crayon-sy">(</span><span class="crayon-st">is</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">frame</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-4"> </div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-5"><span class="crayon-p">## [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-6"><span class="crayon-p">## [15] TRUE TRUE TRUE</span></div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-7"><span class="crayon-p"># transformar os 17 dataframes em um so</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-8">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">bind_rows</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-9"><span class="crayon-p"># checando o arquivo</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-10">
<span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-11"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-12"><span class="crayon-p">## 'data.frame': 489 obs. of 3 variables:</span></div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-13"><span class="crayon-p">## $ acao : chr "ABCB4\n ABC Brasil PN" "ABEV3\n Ambev S.A" "AEFI11\n FII AESAPAR CI" "AELP3\n AES Elpa ON" ...</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf398132832529-14"><span class="crayon-p">## $ preco_reais: chr "16,31" "19,39" "146,25" "6,07" ...</span></div>
<div class="crayon-line" id="crayon-5a988d09cf398132832529-15"><span class="crayon-p">## $ variacao : chr "-0,49" "0,21" "-1,18" "-0,16" ...</span></div>
</div></td>
</tr></table>
</div>
</div>

<p> </p>
<h3>Limpeza dos dados</h3>
<p>Como visto, os dados precisam passar por uma certa limpeza:<br>
A coluna <code>acao</code> precisa ser quebrada em duas: uma com o código da ação (Ex.: ABEV3) e outra com o nome da empresa. Ambas são separadas pelo string <code>\n</code>;<br>
As duas outras colunas precisam ser convertidas para numéricas.</p>
<p>Essas tarefas também não são difíceis graças aos pacotes <code>tidyr</code> e <code>stringr</code>:</p>
<h4>1) Separar a primeira coluna em duas diferentes pelo separador “\n”</h4>
<p></p>
<div id="crayon-5a988d09cf39a213655680" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
df.acoes %&amp;lt;&amp;gt;% separate(acao, c("codigo_acao", "nome_empresa"), "[\n]")
df.acoes$nome_empresa %&amp;lt;&amp;gt;% str_trim()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf39a213655680-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39a213655680-2">2</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf39a213655680-1">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">separate</span><span class="crayon-sy">(</span><span class="crayon-v">acao</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">c</span><span class="crayon-sy">(</span><span class="crayon-s">"codigo_acao"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"nome_empresa"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"[\n]"</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39a213655680-2">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">nome_empresa</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">str_trim</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
</div></td>
</tr></table>
</div>
</div>

<p></p>
<h4>2) Converter colunas de preco e de variacao para numerico</h4>
<p></p>
<div id="crayon-5a988d09cf39d329983492" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
df.acoes$preco_reais %&amp;lt;&amp;gt;% str_replace("\\.", "") # remover pontos (ex.:1.004,15)
df.acoes$preco_reais %&amp;lt;&amp;gt;% str_replace(",", ".") # remover pontos (ex.:1.004,15)
df.acoes$preco_reais %&amp;lt;&amp;gt;% as.numeric()
df.acoes$variacao %&amp;lt;&amp;gt;% str_replace("\\.", "") # remover pontos (ex.:1.004,15)
df.acoes$variacao %&amp;lt;&amp;gt;% str_replace(",", ".") # remover pontos (ex.:1.004,15)
df.acoes$variacao %&amp;lt;&amp;gt;% as.numeric()

str(df.acoes)

## 'data.frame': 489 obs. of 4 variables:
## $ codigo_acao : chr "ABCB4" "ABEV3" "AEFI11" "AELP3" ...
## $ nome_empresa: chr "ABC Brasil PN" "Ambev S.A" "FII AESAPAR CI" "AES Elpa ON" ...
## $ preco_reais : num 16.31 19.39 146.25 6.07 4.9 ...
## $ variacao : num -0.49 0.21 -1.18 -0.16 0 -6.57 0.08 0 0 0 ...
</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-8">8</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-10">10</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-12">12</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39d329983492-14">14</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39d329983492-15">15</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-1">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">preco_reais</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">str_replace</span><span class="crayon-sy">(</span><span class="crayon-s">"\\."</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># remover pontos (ex.:1.004,15)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-2">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">preco_reais</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">str_replace</span><span class="crayon-sy">(</span><span class="crayon-s">","</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"."</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># remover pontos (ex.:1.004,15)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-3">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">preco_reais</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-sy">.</span><span class="crayon-e">numeric</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-4">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">variacao</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">str_replace</span><span class="crayon-sy">(</span><span class="crayon-s">"\\."</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># remover pontos (ex.:1.004,15)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-5">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">variacao</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">str_replace</span><span class="crayon-sy">(</span><span class="crayon-s">","</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"."</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># remover pontos (ex.:1.004,15)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-6">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">$</span><span class="crayon-v">variacao</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-sy">.</span><span class="crayon-e">numeric</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-7"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-8">
<span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-9"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-10"><span class="crayon-p">## 'data.frame': 489 obs. of 4 variables:</span></div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-11"><span class="crayon-p">## $ codigo_acao : chr "ABCB4" "ABEV3" "AEFI11" "AELP3" ...</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-12"><span class="crayon-p">## $ nome_empresa: chr "ABC Brasil PN" "Ambev S.A" "FII AESAPAR CI" "AES Elpa ON" ...</span></div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-13"><span class="crayon-p">## $ preco_reais : num 16.31 19.39 146.25 6.07 4.9 ...</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39d329983492-14"><span class="crayon-p">## $ variacao : num -0.49 0.21 -1.18 -0.16 0 -6.57 0.08 0 0 0 ...</span></div>
<div class="crayon-line" id="crayon-5a988d09cf39d329983492-15"> </div>
</div></td>
</tr></table>
</div>
</div>

<p> </p>
<h3>Análise e apresentação dos dados</h3>
<p>Agora já estamos prontos para partir para a análise.</p>
<p>Primeiramente, qual a distribuição da variação dos preços das ações?</p>
<div id="crayon-5a988d09cf39f076169443" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
df.acoes %&amp;gt;%
ggplot(aes(x = variacao)) +
geom_histogram() +
theme_economist()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf39f076169443-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39f076169443-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf39f076169443-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf39f076169443-4">4</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf39f076169443-1">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39f076169443-2">
<span class="crayon-e">ggplot</span><span class="crayon-sy">(</span><span class="crayon-e">aes</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">variacao</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf39f076169443-3">
<span class="crayon-e">geom_histogram</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf39f076169443-4">
<span class="crayon-e">theme_economist</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
</div></td>
</tr></table>
</div>
</div>

<p></p>
</div>
</div>
<div class="wpb_single_image wpb_content_element vc_align_left">
<figure class="wpb_wrapper vc_figure"><div class="vc_single_image-wrapper   vc_box_border_grey"><img width="864" height="480" src="https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-6-1.png" class="vc_single_image-img attachment-full" alt="" srcset="https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-6-1.png 864w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-6-1-260x144.png 260w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-6-1-768x427.png 768w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-6-1-100x56.png 100w" sizes="(max-width: 864px) 100vw, 864px"></div>
</figure>
</div>
<div class="wpb_text_column wpb_content_element ">
<div class="wpb_wrapper">
<p>No geral, as ações variaram em torno de 0%, com a mediana estando ligeiramente para a esquerda do zero. O histograma mostra que existem alguns outliers, tanto para cima como para baixo.</p>
<p>Vamos analisar quais foram as ações que mais variaram no dia de hoje:</p>
<div id="crayon-5a988d09cf3a1951188981" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# maiores subidas e quedas:
limite_inferior % sort %&amp;gt;% head(5) %&amp;gt;% .[5]
limite_superior % sort %&amp;gt;% tail(5) %&amp;gt;% .[1]

df.destaque %
filter(variacao &amp;lt;= limite_inferior | variacao &amp;gt;= limite_superior) %&amp;gt;%
arrange(desc(variacao))

df.destaque %&amp;gt;% knitr::kable()


| codigo\_acao | nome\_empresa | preco\_reais| variacao|
|:-------------|:-------------------|-------------:|---------:|
| ELPL3 | AES Eletropaulo ON | 17.58| 19.59|
| CTSA4 | Santanense PN | 2.93| 13.13|
| USIM6 | Usiminas PNB | 5.80| 10.06|
| DTCY3 | Dtcom ON | 3.74| 9.68|
| LLIS3 | Restoque ON | 40.00| 8.11|
| PLAS3 | Plascar ON | 4.10| -7.87|
| SPRI3 | Springer ON | 9.39| -8.83|
| CEPE6 | Celpe PNB | 15.91| -9.09|
| TXRX4 | Têxteis Renaux PN | 2.40| -9.77|
| OGSA3 | NOVA ON | 1.80| -15.89|
</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-8">8</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-9">9</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-10">10</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-11">11</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-12">12</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-13">13</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-14">14</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-15">15</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-16">16</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-17">17</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-18">18</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-19">19</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-20">20</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-21">21</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-22">22</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a1951188981-23">23</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a1951188981-24">24</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-1"><span class="crayon-p"># maiores subidas e quedas:</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-2">
<span class="crayon-v">limite_inferior</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">sort</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">head</span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">[</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-3">
<span class="crayon-v">limite_superior</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">sort</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">tail</span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-4"> </div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-5">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">destaque</span><span class="crayon-h"> </span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-6">
<span class="crayon-e">filter</span><span class="crayon-sy">(</span><span class="crayon-v">variacao</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">limite_inferior</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">variacao</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">limite_superior</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-7">
<span class="crayon-e">arrange</span><span class="crayon-sy">(</span><span class="crayon-e">desc</span><span class="crayon-sy">(</span><span class="crayon-v">variacao</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-8"> </div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-9">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">destaque</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">knitr</span><span class="crayon-o">::</span><span class="crayon-e">kable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-10"> </div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-11"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-12">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">codigo</span><span class="crayon-sy">\</span><span class="crayon-v">_acao</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">nome</span><span class="crayon-sy">\</span><span class="crayon-v">_empresa</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">preco</span><span class="crayon-sy">\</span><span class="crayon-v">_reais</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">variacao</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-13">
<span class="crayon-o">|</span><span class="crayon-o">:</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">|</span><span class="crayon-o">:</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">|</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">:</span><span class="crayon-o">|</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">:</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-14">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">ELPL3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">AES </span><span class="crayon-e">Eletropaulo </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">17.58</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">19.59</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-15">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">CTSA4</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Santanense </span><span class="crayon-v">PN</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">2.93</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">13.13</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-16">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">USIM6</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Usiminas </span><span class="crayon-v">PNB</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">5.80</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">10.06</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-17">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">DTCY3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Dtcom </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">3.74</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">9.68</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-18">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">LLIS3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Restoque </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">40.00</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">8.11</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-19">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">PLAS3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Plascar </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">4.10</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">7.87</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-20">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">SPRI3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Springer </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">9.39</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">8.83</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-21">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">CEPE6</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Celpe </span><span class="crayon-v">PNB</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">15.91</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">9.09</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-22">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">TXRX4</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-i">T</span>ê<span class="crayon-e">xteis </span><span class="crayon-e">Renaux </span><span class="crayon-v">PN</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">2.40</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">9.77</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a1951188981-23">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">OGSA3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">NOVA </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">1.80</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">15.89</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a1951188981-24"> </div>
</div></td>
</tr></table>
</div>
</div>

<p> </p>
<p>Uma boa maneira de resumir o dia de hoje seria em um gráfico que correlaciona o preço da ação com sua variação, destacando o TOP 10 acima:</p>
<div id="crayon-5a988d09cf3a4264660217" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
df.acoes %&amp;gt;%
ggplot(aes(x = variacao, y = preco_reais)) +
geom_point() +
geom_text_repel(data = df.destaque, aes(label = codigo_acao)) +
theme_economist() +
labs(x = "Variação (%)", y = "Preço (R$)",
title = "Painel de resumo diário da Bovespa",
caption = "Blog do IBPAD - Sillas Gonzaga")</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf3a4264660217-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a4264660217-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a4264660217-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a4264660217-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a4264660217-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a4264660217-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a4264660217-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a4264660217-8">8</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf3a4264660217-1">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a4264660217-2">
<span class="crayon-e">ggplot</span><span class="crayon-sy">(</span><span class="crayon-e">aes</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">variacao</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">preco_reais</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a4264660217-3">
<span class="crayon-e">geom_point</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a4264660217-4">
<span class="crayon-e">geom_text_repel</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">destaque</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">aes</span><span class="crayon-sy">(</span><span class="crayon-v">label</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">codigo_acao</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a4264660217-5">
<span class="crayon-e">theme_economist</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a4264660217-6">
<span class="crayon-e">labs</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Variação (%)"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Preço (R$)"</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a4264660217-7">
<span class="crayon-v">title</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Painel de resumo diário da Bovespa"</span><span class="crayon-sy">,</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a4264660217-8">
<span class="crayon-v">caption</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Blog do IBPAD - Sillas Gonzaga"</span><span class="crayon-sy">)</span>
</div>
</div></td>
</tr></table>
</div>
</div>

<p></p>
</div>
</div>
<div class="wpb_single_image wpb_content_element vc_align_left">
<figure class="wpb_wrapper vc_figure"><div class="vc_single_image-wrapper   vc_box_border_grey"><img width="864" height="480" src="https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-8-1.png" class="vc_single_image-img attachment-full" alt="" srcset="https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-8-1.png 864w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-8-1-260x144.png 260w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-8-1-768x427.png 768w, https://www.ibpad.com.br/wp-content/uploads/2017/08/unnamed-chunk-8-1-100x56.png 100w" sizes="(max-width: 864px) 100vw, 864px"></div>
</figure>
</div>
<div class="wpb_text_column wpb_content_element ">
<div class="wpb_wrapper">
<p>No código acima, o pacote <code>ggrepel</code> foi usado para plotar os nomes das ações de destaque, garantindo que eles não se cruzassem. Um outlier prejudicou a visualização:</p>
<div id="crayon-5a988d09cf3a6418370844" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
<div class="crayon-button crayon-nums-button" title="Alternar números de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-plain-button" title="Exibir código simples"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-wrap-button" title="Alternar quebras de linha"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div>
<div class="crayon-button crayon-popup-button" title="Abrir código em nova janela"><div class="crayon-button-icon"></div></div>
</div>
</div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
df.acoes %&amp;gt;%
filter(preco_reais &amp;gt; 40000) %&amp;gt;%
knitr::kable()


| codigo\_acao | nome\_empresa | preco\_reais| variacao|
|:-------------|:--------------|-------------:|---------:|
| PPAR3 | Polpar ON | 50000| 0|
</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table"><tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-num" data-line="crayon-5a988d09cf3a6418370844-1">1</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a6418370844-2">2</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a6418370844-3">3</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a6418370844-4">4</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a6418370844-5">5</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a6418370844-6">6</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a6418370844-7">7</div>
<div class="crayon-num crayon-striped-num" data-line="crayon-5a988d09cf3a6418370844-8">8</div>
<div class="crayon-num" data-line="crayon-5a988d09cf3a6418370844-9">9</div>
</div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5a988d09cf3a6418370844-1">
<span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-v">acoes</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a6418370844-2">
<span class="crayon-e">filter</span><span class="crayon-sy">(</span><span class="crayon-v">preco_reais</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-cn">40000</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-o">%</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a6418370844-3">
<span class="crayon-v">knitr</span><span class="crayon-o">::</span><span class="crayon-e">kable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a6418370844-4"> </div>
<div class="crayon-line" id="crayon-5a988d09cf3a6418370844-5"> </div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a6418370844-6">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">codigo</span><span class="crayon-sy">\</span><span class="crayon-v">_acao</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">nome</span><span class="crayon-sy">\</span><span class="crayon-v">_empresa</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">preco</span><span class="crayon-sy">\</span><span class="crayon-v">_reais</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">variacao</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a6418370844-7">
<span class="crayon-o">|</span><span class="crayon-o">:</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">|</span><span class="crayon-o">:</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">|</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">:</span><span class="crayon-o">|</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-o">:</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line crayon-striped-line" id="crayon-5a988d09cf3a6418370844-8">
<span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">PPAR3</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Polpar </span><span class="crayon-v">ON</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">50000</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">|</span>
</div>
<div class="crayon-line" id="crayon-5a988d09cf3a6418370844-9"> </div>
</div></td>
</tr></table>
</div>
</div>

<p> </p>
<p>O código completo deste post está presente <a href="https://gist.github.com/sillasgonzaga/ad7ecc08aad76c48ead83b5806c6234b">neste gist</a>.</p>
</div>
</div>
</div></div></div></div>
<div class="vc_row wpb_row vc_row-fluid">
<div class="wpb_column vc_column_container vc_col-sm-3"><div class="vc_column-inner "><div class="wpb_wrapper">
<div class="wpb_single_image wpb_content_element vc_align_left">
<figure class="wpb_wrapper vc_figure"><a href="https://www.ibpad.com.br/produto/ciencia-de-dados-com-r-df/" target="_self" class="vc_single_image-wrapper   vc_box_border_grey"><img width="363" height="353" src="https://www.ibpad.com.br/wp-content/uploads/2017/09/Curso-de-programa%C3%A7%C3%A3o-em-R.png" class="vc_single_image-img attachment-full" alt="" srcset="https://www.ibpad.com.br/wp-content/uploads/2017/09/Curso-de-programação-em-R.png 363w, https://www.ibpad.com.br/wp-content/uploads/2017/09/Curso-de-programação-em-R-260x253.png 260w, https://www.ibpad.com.br/wp-content/uploads/2017/09/Curso-de-programação-em-R-100x97.png 100w" sizes="(max-width: 363px) 100vw, 363px"></a>
</figure>
</div>
</div></div></div>
<div class="wpb_column vc_column_container vc_col-sm-9"><div class="vc_column-inner "><div class="wpb_wrapper">
<div class="wpb_text_column wpb_content_element ">
<div class="wpb_wrapper">
<p>Este modelo de aplicação do R é uma das possibilidades que a programação te oferece, aproveite e venha aprender muito mais sobre essa programação e linguagem nas novas turmas do curso de <a href="https://www.ibpad.com.br/produto/ciencia-de-dados-com-r-df/" target="_blank">Ciência de Dados com R</a>. O curso presencial acontecerá em <a href="https://www.ibpad.com.br/produto/ciencia-de-dados-com-r-df" target="_blank">Brasilia</a> e em <a href="https://www.ibpad.com.br/produto/ciencia-de-dados-com-r-sp/" target="_blank">São Paulo</a> e você já pode se inscrever! Te aguardamos para trocar experiências e praticar os aprendizados.</p>
</div>
</div>
</div></div></div>
</div>
</div>
