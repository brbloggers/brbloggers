+++
title = "Reações à página Michel Temer no Facebook"
date = "2017-05-18 03:00:00"
categories = ["r-python-e-redes"]
original_url = "http://neylsoncrepalde.github.io/2017-05-18-2-temer-facebook/"
+++

<article class="blog-post">
<p>
Este é o post gêmeo de
<a href="http://neylsoncrepalde.github.io/2017-05-18-pronunciamento-michel-temer-twitter/">O
Pronunciamento de Michel Temer no Twitter</a>. Agora, vamos analisar
como foram as reações do público em sua página no Facebook. Para isso,
raspamos todos os comentários em postagens da página do político do dia
16 ao dia 18 de maio usando o aplicativo <em>Netvizz</em>. Ao todo,
foram seis postagens. Vejam o seu conteúdo:
</p>
<pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">)</span><span class="w"> </span><span class="n">setwd</span><span class="p">(</span><span class="s1">&apos;~/Documentos/temer_facebook&apos;</span><span class="p">)</span><span class="w">
</span><span class="n">arqs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">list.files</span><span class="p">()</span><span class="w">
</span><span class="n">temer</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_tsv</span><span class="p">(</span><span class="n">arqs</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="w">
</span><span class="n">stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_tsv</span><span class="p">(</span><span class="n">arqs</span><span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="w">
</span><span class="n">temer</span><span class="o">$</span><span class="n">post_text</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">print</span><span class="w">
</span></code></pre>

<pre class="highlight"><code>## [1] &quot;O governo viveu nesta semana seu melhor e seu pior momento. Os indicadores de queda da infla&#xE7;&#xE3;o os n&#xFA;meros de retorno ao crescimento da economia e os dados de gera&#xE7;&#xE3;o de empregos criaram esperan&#xE7;a de dias melhores. N&#xE3;o podemos jogar no lixo da hist&#xF3;ria tanto trabalho feito em prol do Pa&#xED;s. N&#xE3;o renunciarei. Sei o que fiz e sei da corre&#xE7;&#xE3;o dos meus atos. Assista:&quot; ## [2] &quot;#AoVivo Acompanhe o pronunciamento do presidente Michel Temer:&quot; ## [3] &quot;Com as mudan&#xE7;as na gest&#xE3;o e o foco em produtividade a Petrobras voltou a crescer e dar lucro. Segundo o presidente da empresa Pedro Parente ap&#xF3;s um ano de governo do presidente Michel Temer a estatal reverteu preju&#xED;zos investiu mais e aumentou a produ&#xE7;&#xE3;o. &#x201C;&#xC9; uma empresa que volta a ter condi&#xE7;&#xE3;o de dar orgulho ao brasileiro&#x201D;. Assista! Saiba mais: http://bit.ly/2r6uV3u&quot;
## [4] &quot;Para que a Uni&#xE3;o seja forte &#xE9; preciso que em primeiro lugar os munic&#xED;pios sejam fortalecidos afirmou o presidente Michel Temer em evento com prefeitos de todo o Pa&#xED;s. Temer refor&#xE7;ou o compromisso do governo em apoiar e dar autonomia &#xE0;s prefeituras para que voltem a investir. Contem com o governo disse. Saiba mais: http://bit.ly/2rn1Pdo&quot; ## [5] &quot;Com a retomada da economia o mercado de trabalho d&#xE1; os primeiros sinais de recupera&#xE7;&#xE3;o. No m&#xEA;s passado mais de 59 mil vagas formais foram criadas sendo o primeiro resultado positivo para abril desde 2014. Os dados s&#xE3;o do Cadastro Geral de Empregados e Desempregados (Caged) e foram divulgados nesta ter&#xE7;a-feira (16) pelo Minist&#xE9;rio do Trabalho.&quot; ## [6] &quot;#AoVivo Presidente Michel Temer abre a 20&#xAA; edi&#xE7;&#xE3;o da Marcha a Bras&#xED;lia em Defesa dos Munic&#xED;pios. Acompanhe: CNM - Confedera&#xE7;&#xE3;o Nacional de Munic&#xED;pios&quot;
</code></pre>

<p>
Agora vamos verificar como foram as reações a essas seis postagens.
</p>
<pre class="highlight"><code><span class="n">like</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_LIKE</span><span class="w">
</span><span class="n">love</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_LOVE</span><span class="w">
</span><span class="n">wow</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_WOW</span><span class="w">
</span><span class="n">haha</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_HAHA</span><span class="w">
</span><span class="n">sad</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_SAD</span><span class="w">
</span><span class="n">angry</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_ANGRY</span><span class="w">
</span><span class="n">thankful</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">stats</span><span class="o">$</span><span class="n">rea_THANKFUL</span><span class="w"> </span><span class="n">emotions</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="n">like</span><span class="p">,</span><span class="w"> </span><span class="n">love</span><span class="o">=</span><span class="n">love</span><span class="p">,</span><span class="w"> </span><span class="n">wow</span><span class="o">=</span><span class="n">wow</span><span class="p">,</span><span class="w"> </span><span class="n">haha</span><span class="o">=</span><span class="n">haha</span><span class="p">,</span><span class="w"> </span><span class="n">sad</span><span class="o">=</span><span class="n">sad</span><span class="p">,</span><span class="n">angry</span><span class="o">=</span><span class="n">angry</span><span class="p">,</span><span class="n">thankful</span><span class="o">=</span><span class="n">thankful</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="o">=</span><span class="n">stats</span><span class="o">$</span><span class="n">post_published</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">like</span><span class="p">),</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w"> </span><span class="n">mdf</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">melt</span><span class="p">(</span><span class="n">emotions</span><span class="p">[,</span><span class="m">-8</span><span class="p">],</span><span class="w"> </span><span class="n">id.vars</span><span class="o">=</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">value.name</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">variable.name</span><span class="o">=</span><span class="s2">&quot;reaction&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">mdf</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reaction</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reaction</span><span class="p">))</span><span class="o">+</span><span class="n">geom_line</span><span class="p">()</span><span class="o">+</span><span class="w"> </span><span class="n">scale_color_manual</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Rea&#xE7;&#xF5;es&quot;</span><span class="p">,</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span><span class="s2">&quot;red&quot;</span><span class="p">,</span><span class="s2">&quot;purple&quot;</span><span class="p">,</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span><span class="s2">&quot;black&quot;</span><span class="p">,</span><span class="s2">&quot;green&quot;</span><span class="p">))</span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Rea&#xE7;&#xF5;es a postagens da p&#xE1;gina Michel Temer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="s2">&quot;N&#xFA;mero de rea&#xE7;&#xF5;es&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="n">labels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">))</span><span class="w">
</span></code></pre>

<p>
<img src="http://neylsoncrepalde.github.io/img/temer_facebook_files/figure-markdown_github/reacoes-1.png" alt="">
</p>
<p>
Agora, vamos olhar como foi o fluxo de comentário por hora na página.
</p>
<pre class="highlight"><code><span class="n">temer</span><span class="o">$</span><span class="n">comment_date</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="n">temer</span><span class="o">$</span><span class="n">comment_published</span><span class="p">)</span><span class="w">
</span><span class="n">temer</span><span class="o">$</span><span class="n">comment_date</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">round_date</span><span class="p">(</span><span class="n">temer</span><span class="o">$</span><span class="n">comment_date</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;hour&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">datas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">temer</span><span class="o">$</span><span class="n">comment_date</span><span class="p">),</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">temer</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">comment_date</span><span class="p">))</span><span class="o">+</span><span class="n">geom_path</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;count&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&apos;&apos;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&apos;N&#xFA;mero de Coment&#xE1;rios&apos;</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Fluxo de Coment&#xE1;rios por hora&quot;</span><span class="p">)</span><span class="w">
</span></code></pre>

<p>
<img src="http://neylsoncrepalde.github.io/img/temer_facebook_files/figure-markdown_github/fluxo-1.png" alt="">
</p>
<p>
Finalmente, vamos verificar as palavras mais usadas nos comentários.
</p>
<pre class="highlight"><code><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temer</span><span class="o">$</span><span class="n">comment_message</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">tolower</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">removePunctuation</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">removeWords</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">stopwords</span><span class="p">(</span><span class="s1">&apos;pt&apos;</span><span class="p">))</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">brewer.pal</span><span class="p">(</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;RdBu&quot;</span><span class="p">)[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">]</span><span class="w">
</span><span class="n">wordcloud</span><span class="p">(</span><span class="n">enc2native</span><span class="p">(</span><span class="n">text</span><span class="p">),</span><span class="w"> </span><span class="n">min.freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">max.words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">random.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">)</span><span class="w">
</span></code></pre>

<p>
<img src="http://neylsoncrepalde.github.io/img/temer_facebook_files/figure-markdown_github/word-1.png" alt="">
</p>
<p>
Agora, vamos verificar a emergência de assuntos através de clusterização
hierárquica e através de uma rede de palavras.
</p>
<pre class="highlight"><code><span class="n">corpus</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Corpus</span><span class="p">(</span><span class="n">VectorSource</span><span class="p">(</span><span class="n">text</span><span class="p">))</span><span class="w">
</span><span class="n">tdm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">TermDocumentMatrix</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span><span class="w">
</span><span class="n">tdm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">removeSparseTerms</span><span class="p">(</span><span class="n">tdm</span><span class="p">,</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.996</span><span class="p">)</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">as.matrix</span><span class="p">(</span><span class="n">tdm</span><span class="p">))</span><span class="w">
</span><span class="c1">#dim(df)
</span><span class="n">df.scale</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">scale</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="n">d</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dist</span><span class="p">(</span><span class="n">df.scale</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;euclidean&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">fit.ward2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">hclust</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ward.D2&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">fit.ward2</span><span class="p">)</span><span class="w">
</span></code></pre>

<p>
<img src="http://neylsoncrepalde.github.io/img/temer_facebook_files/figure-markdown_github/dendo-1.png" alt="">
</p>
<pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">igraph</span><span class="p">)</span><span class="w">
</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">graph_from_incidence_matrix</span><span class="p">(</span><span class="n">as.matrix</span><span class="p">(</span><span class="n">tdm</span><span class="p">))</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bipartite_projection</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;FALSE&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">$</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="w">
</span><span class="n">deg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">degree</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="c1">#Retirando um emoji
</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delete_vertices</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="m">13</span><span class="p">)</span><span class="w"> </span><span class="n">plot</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">vertex.label.cex</span><span class="o">=</span><span class="n">deg</span><span class="o">/</span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">edge.width</span><span class="o">=</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="o">/</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">edge.color</span><span class="o">=</span><span class="n">adjustcolor</span><span class="p">(</span><span class="s2">&quot;grey60&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">.5</span><span class="p">),</span><span class="w"> </span><span class="n">vertex.label.color</span><span class="o">=</span><span class="n">adjustcolor</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">.7</span><span class="p">))</span><span class="w">
</span></code></pre>

<p>
<img src="http://neylsoncrepalde.github.io/img/temer_facebook_files/figure-markdown_github/grafo-1.png" alt="">
</p>
<p>
Veja como os assuntos emergem no grafo. Comentários relacionados à
proposta de lei de migração, jargões como “tchau querido” e a “casa
caiu” e algumas palavras que saltam aos olhos como “vergonha” e
“cadeia”.
</p>
<p>
Por hoje é só! Até a próxima!
</p>
</article>
<p class="blog-tags">
Tags: R, Wordloud, Twitter, Data Mining, Facebook
</p>

