<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="theme-color" content="#263238">

<meta name="generator" content="Hugo 0.21" />

<link rel="apple-touch-icon" href="../../../../images/logo.png">


<link rel="canonical" href="../../../../2017/01/29/mafs-analisando-a-efic%C3%A1cia-dos-modelos-preditivos-usados-no-pacote/">


    
    <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>mafs: Analisando a eficácia dos modelos preditivos usados no pacote - A Hugo website</title>
    

<meta name="description" content="Lancei recentemente a versão 0.0.2 do pacote mafs tanto no CRAN como no Github. Adicionei dois novos recursos:   No data frame df\_models criado, foi acrescentada uma variável referente ao tempo de execução (runtime) do modelo para a série temporal de input. Isso foi uma necessidade devido ao fato de alguns modelos levarem muito tempo para rodar. Esse dado será importante para ser levado em consideração no segundo recurso adicionado:   A função select\_forecast() agora tem um argumento chamado dont\_apply, no qual o usuário poderá inserir os modelos (em forma de vetor de caracteres) que não deverão ser usados na função para criar modelos preditivos.">

<meta property="og:title" content="mafs: Analisando a eficácia dos modelos preditivos usados no pacote - A Hugo website">
<meta property="og:type" content="article">
<meta property="og:url" content="/2017/01/29/mafs-analisando-a-efic%C3%A1cia-dos-modelos-preditivos-usados-no-pacote/">
<meta property="og:image" content="/images/default.png">
<meta property="og:site_name" content="A Hugo website">
<meta property="og:description" content="Lancei recentemente a versão 0.0.2 do pacote mafs tanto no CRAN como no Github. Adicionei dois novos recursos:   No data frame df\_models criado, foi acrescentada uma variável referente ao tempo de execução (runtime) do modelo para a série temporal de input. Isso foi uma necessidade devido ao fato de alguns modelos levarem muito tempo para rodar. Esse dado será importante para ser levado em consideração no segundo recurso adicionado:   A função select\_forecast() agora tem um argumento chamado dont\_apply, no qual o usuário poderá inserir os modelos (em forma de vetor de caracteres) que não deverão ser usados na função para criar modelos preditivos.">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="A Hugo website">
<meta name="twitter:url" content="/2017/01/29/mafs-analisando-a-efic%C3%A1cia-dos-modelos-preditivos-usados-no-pacote/">
<meta name="twitter:title" content="mafs: Analisando a eficácia dos modelos preditivos usados no pacote - A Hugo website">
<meta name="twitter:description" content="Lancei recentemente a versão 0.0.2 do pacote mafs tanto no CRAN como no Github. Adicionei dois novos recursos:   No data frame df\_models criado, foi acrescentada uma variável referente ao tempo de execução (runtime) do modelo para a série temporal de input. Isso foi uma necessidade devido ao fato de alguns modelos levarem muito tempo para rodar. Esse dado será importante para ser levado em consideração no segundo recurso adicionado:   A função select\_forecast() agora tem um argumento chamado dont\_apply, no qual o usuário poderá inserir os modelos (em forma de vetor de caracteres) que não deverão ser usados na função para criar modelos preditivos.">
<meta name="twitter:image" content="/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"/"
    },
    "headline": "mafs: Analisando a eficácia dos modelos preditivos usados no pacote - A Hugo website",
    "image": {
      "@type": "ImageObject",
      "url": "/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2017-01-29T03:00:00JST",
    "dateModified": "2017-01-29T03:00:00JST",
    "author": {
      "@type": "Person",
      "name": "A Hugo website"
    },
    "publisher": {
      "@type": "Organization",
      "name": "A Hugo website",
      "logo": {
        "@type": "ImageObject",
        "url": "/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "Lancei recentemente a versão 0.0.2 do pacote mafs tanto no CRAN como no Github. Adicionei dois novos recursos:   No data frame df\_models criado, foi acrescentada uma variável referente ao tempo de execução (runtime) do modelo para a série temporal de input. Isso foi uma necessidade devido ao fato de alguns modelos levarem muito tempo para rodar. Esse dado será importante para ser levado em consideração no segundo recurso adicionado:   A função select\_forecast() agora tem um argumento chamado dont\_apply, no qual o usuário poderá inserir os modelos (em forma de vetor de caracteres) que não deverão ser usados na função para criar modelos preditivos."
  }
</script>


    <style>
      html { font-size: 18px; background-color: rgba(236,239,241,.5);}@media (max-width: 768px) { html { font-size: 15px; }}body { color: #333; font-family: 'Roboto Slab','ヒラギノ角ゴ Pro W3','Hiragino Kaku Gothic Pro',メイリオ,Meiryo,sans-serif; font-feature-settings : "palt"; font-size: inherit; line-height: 1rem; margin: 0; padding: 0;}h1, h2, h3, h4, h5 ,h6 { font-size: 1rem; font-weight: 700; line-height: 1rem; margin: 0;}hr { border: 0; border-top: 1px dashed #cfd8dc; margin: 1rem 0;}p { margin: 0; line-height: 1rem;}a { color: #2196f3; text-decoration: none; transition-duration: .3s;}ul, ol { margin: 0; padding: 0;}table { border-collapse: collapse;}th, td { font-size: .8rem; padding: .5rem;}tr { border-bottom: 1px dashed #ddd;}/* Layouts */main,aside { display: block;}main { padding: 1rem 0 3rem 0; }aside.h { padding: 3rem 0; }main.f,aside.f { background-color: #333; border-top: 2px dashed #fff; border-bottom: 2px dashed #fff;}.l-container { position: relative; max-width: 68rem; margin: 0 auto; padding: 0 1rem;}.l-container.thin { max-width: 44rem;}.l-header { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); padding: 1rem 0; text-align: center;}.l-footer { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); font-size: .6rem; font-weight: 700; padding: 1rem 0;}@media (max-width: 768px) { .l-sidebar { margin-top: 4rem; }}.mrow { margin: 0 -1rem; overflow: hidden;}.mcol { box-sizing: border-box; float: left; padding: 0 1rem;}.c6 { width: 50%; }.c4 { width: 33.26323833%; }.c8 { width: 66.66666%; }@media (max-width: 768px) { .mcol { width: 100%; float: none; }}.logo a { font-size: 1.4rem; line-height: 1.5rem; font-weight: 700; color: #333;}.articles { margin: -1rem 0; margin-bottom: 1rem;}.articles.sm { margin: -.5rem 0; margin-bottom: 0;}article { border-radius: 4px; overflow: hidden;}article.li { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); height: 20rem; overflow: hidden; margin: 1rem 0;}article.li > a { display: block; color: #333;}article.li .inner { padding: 1rem;}article.li .thumb { height: 8rem;}article.li .title { color: #333; font-size: 1.2rem; line-height: 1.5rem; margin-bottom: .5rem;}article.li .summary { font-size: .8rem; height: 6rem; overflow: hidden; margin-top: 1rem;}article.lism { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin: .5rem 0;}article.lism::after { content: ''; display: block; clear: both;}article.lism > a { display: block; color: #333;}article.lism .inner { display: table-cell; vertical-align: middle; height: 5rem; padding-left: .5rem;}article.lism .thumb { width: 5rem; height: 5rem; float: left;}article.lism .title { font-weight: 700; line-height: 1.25rem; margin-bottom: .25rem;}article.sn { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin-bottom: 1rem;}article.sn .thumb { height: 20rem;}@media (max-width: 768px) { article.sn .thumb { height: 10rem; }}article.sn > .article-header,article.sn > .article-body,article.sn .article-footer { padding: 2rem;}article.sn > .article-body { padding: 0 2rem;}@media (max-width: 768px) { article.sn > .article-header, article.sn > .article-body, article.sn .article-footer { padding: 1rem; } article.sn > .article-body { padding: 0 1rem; }}article.sn > .article-header .title { font-size: 1.8rem; line-height: 2rem; margin-bottom: .5rem;}@media (max-width: 768px) { article.sn > .article-header .title { font-size: 1.4rem; line-height: 1.5rem; }}article.sn > .article-header .facts { margin-bottom: 1rem;}article.sn > .article-body { margin-bottom: 1.5rem;}article.sn > .article-body h2 { border-bottom: .25rem solid #333; font-size: 1.2rem; line-height: 1.5rem; margin: 1.5rem 0; padding: .5rem 0;}article.sn > .article-body h3 { border-left: .5rem solid #333; line-height: 1.5rem; margin: 1.5rem 0; padding: .125rem .5rem;}article.sn > .article-body ul,article.sn > .article-body ol { margin: 1.5rem 0; padding-left: 1.5rem;}article.sn > .article-body li { padding-bottom: .5rem; line-height: 1.5rem;}article.sn > .article-body li:last-child { padding-bottom: 0;}article.sn > .article-body p { margin: 1rem 0; line-height: 1.5rem;}article.sn > .article-body strong,article.sn > .article-body em { font-style: normal; font-weight: 700;}article.sn > .article-body strong { box-shadow: 0 -.5rem 0 0 #ffc107 inset;}article.sn > .article-body em { color: #8bc34a;}article.sn > .article-body code,article.sn > .article-body pre { font-family: Menlo, Consolas, monospace; font-size: .7rem;}article.sn > .article-body pre { background-color: #333; color: #fff; line-height: 1rem; margin: 1.5rem -2rem; overflow: auto;}@media (max-width: 768px) { article.sn > .article-body pre { margin: 1.5rem -1rem; }}article.sn > .article-body pre > code { display: block; padding: 1rem 2rem;}@media (max-width: 768px) { article.sn > .article-body pre > code { padding: 1rem; }}article.sn > .article-body p code { background-color: #eceff1; color: #333; border-radius: 4px; margin: 0 .25rem; padding: .375rem; white-space: nowrap;}article.sn > .article-body blockquote { position: relative; border-left: .25rem solid #333; font-size: .8rem; padding: .125rem 1rem; margin: 1.5rem 0;}@media (max-width: 768px) { article.sn > .article-body blockquote { font-size: 1rem; }}article.sn > .article-body blockquote p { margin: .5rem 0; line-height: 1rem;}article.sn > .article-body figure { margin: 1.5rem 0;}article.sn > .article-body figure img,article.sn > .article-body figure amp-img { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); max-width: 100%;}article.sn > .article-body figcaption { color: #cfd8dc; font-size: .8rem; font-weight: 700; margin-top: .5rem;}.facts li { display: inline; font-size: .8rem; margin-right: 1rem;}.facts i { color: #cfd8dc; margin-right: .5em;}.facts.sm li { font-size: .7rem;}.sections.sidebar { margin: -1rem 0;}.sections.footer { margin: -1rem 0;}section.sidebar { margin: 2rem 0;}section.sidebar > header { font-size: .8rem; font-weight: 700; letter-spacing: 4px; text-align: center; margin: 1.5rem 0;}section.footer { margin: 1rem 0;}section.footer > header { font-size: .8rem; margin: .5rem 0;}section.footer > header::before { content: "- ";}section.footer > header a { font-weight: 700; color: #333; text-decoration: underline;}.terms { margin: -.25rem;}.terms li { display: inline-block;}.terms a { display: block; float: left; background-color: #333; border-radius: 4px; color: #fff; font-size: .7rem; margin: .25rem; padding: 0 .75rem; line-height: 1.75rem;}.paging { text-align: center; padding: 1rem 0;}.paging a { display: inline-block; background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); border-radius: 4px; color: #333; padding: 0 1rem; line-height: 3rem;}.page-title { text-align: center; margin: 1rem 0;}.page-title::after { content: ''; display: block; border-bottom: .25rem solid #333; width: 3rem; margin: 1.5rem auto;}.page-title > .title { font-size: 1.2rem; line-height: 1.5rem;}/* Parts:breadcrumb */.crumb ol { text-overflow: ellipsis; color: #cfd8dc; white-space: nowrap; overflow: hidden;}.crumb li { display: inline; font-size: .8rem;}.crumb li::after { content: '›'; margin: 0 .25rem 0 .5rem;}.crumb li:last-child::after { content: '';}.crumb a { color: #cfd8dc;}.crumb i { margin-right: .5em;}.share { padding: 0;}.share a { display: inline-block; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); min-width: 1rem; height: 2rem; border-radius: 4px; color: #333; font-size: .8rem; font-weight: 700; line-height: 2rem; text-align: center; padding: 0 .5rem;}.adj article.lism { margin-bottom: 1rem;}.adj header { font-weight: 700; font-size: .8rem;}.toc { padding: 0 2rem;}@media (max-width: 768px) { .toc { padding: 0 1rem; }}.toc { margin: 1rem 0;}.toc nav>ul { background-color: #eceff1; border-radius: 4px; display: inline-block; font-size: .8rem; padding: .5rem 1rem; word-break: break-all; list-style: none;}.toc ul { padding: 0;}.toc ul ul { padding-left: 1rem;}.toc ul ul ul { padding-left: 1rem;}.toc li { color: #90a4ae;}.toc ul ul>li { font-weight: 700; margin: .5rem 0; list-style-type: decimal;}.toc ul ul ul>li { list-style-type: disc; font-weight: 500;}.thumb { background-image: url(/images/default.jpg); background-size: cover;}
      
      
    </style>
  </head>

  <body>
    
    
    

    <header class="l-header">
      <div class="l-container">
        <div class="logo">
          <a href="../../../../">A Hugo website</a>
        </div>
      </div>
    </header>

    <main>
      <div class="l-container">
        
<div class="mrow">
  <div class="mcol c8">

    <article class="sn">

  <div class="thumb thumb-6047e63d7c8e868daa62178fecc5650f"></div>

  <header class="article-header">
    <h1 class="title">mafs: Analisando a eficácia dos modelos preditivos usados no pacote</h1>

    <ul class="facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-01-29T03:00:00JST">Jan 29, 2017</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="../../../../post/">POST</a></li>
      
    </ul>

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&title=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&text=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&t=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&title=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote %2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>

  </header>

  

  <div class="article-body"><article class="blog-post">
<p>
Lancei recentemente a versão 0.0.2 do pacote
<code class="highlighter-rouge">mafs</code> tanto no
<a href="https://cran.r-project.org/web/packages/mafs/index.html">CRAN</a>
como no <a href="http://github.com/sillasgonzaga/mafs">Github</a>.
Adicionei dois novos recursos:
</p>
<ul>
<li>
No data frame <code class="highlighter-rouge">df\_models</code> criado,
foi acrescentada uma variável referente ao tempo de execução (runtime)
do modelo para a série temporal de input. Isso foi uma necessidade
devido ao fato de alguns modelos levarem muito tempo para rodar. Esse
dado será importante para ser levado em consideração no segundo recurso
adicionado:
</li>
<li>
A função <code class="highlighter-rouge">select\_forecast()</code> agora
tem um argumento chamado
<code class="highlighter-rouge">dont\_apply</code>, no qual o usuário
poderá inserir os modelos (em forma de vetor de caracteres) que não
deverão ser usados na função para criar modelos preditivos. Esse recurso
é muito útil para excluir da função os pacotes que demoram muito e que
não costumam entregar bons resultados.
</li>
</ul>
<p>
Neste post, farei uma demonstração da aplicação do pacote
<code class="highlighter-rouge">mafs</code> em diversas séries temporais
diferentes.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># carregar pacotes importantes
</span><span class="n">library</span><span class="p">(</span><span class="n">fpp</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">mafs</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggrepel</span><span class="p">)</span></code></pre>
</figure>
<h2 id="os-dados">
Os dados
</h2>
<p>
As séries temporais usadas pertencem ao pacote
<a href="https://cran.r-project.org/web/packages/fpp/index.html"><code class="highlighter-rouge">fpp</code></a>,
que disponibiliza as séries temporais usadas no livro do Hyndman.
</p>
<p>
Vamos armazenar essas diversas séries em uma lista:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">data_fpp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="m">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ausair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ausair</span><span class="p">,</span><span class="w"> </span><span class="n">ausbeer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ausbeer</span><span class="p">,</span><span class="w"> </span><span class="n">austa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">austa</span><span class="p">,</span><span class="w"> </span><span class="n">austourists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">austourists</span><span class="p">,</span><span class="w"> </span><span class="n">cafe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cafe</span><span class="p">,</span><span class="w"> </span><span class="n">debitcards</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">debitcards</span><span class="p">,</span><span class="w"> </span><span class="n">elecequip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elecequip</span><span class="p">,</span><span class="w"> </span><span class="n">elecsales</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elecsales</span><span class="p">,</span><span class="w"> </span><span class="n">euretail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">euretail</span><span class="p">,</span><span class="w"> </span><span class="n">guinearice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guinearice</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="m">02</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="m">02</span><span class="p">,</span><span class="w"> </span><span class="n">livestock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">livestock</span><span class="p">,</span><span class="w"> </span><span class="n">oil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oil</span><span class="p">,</span><span class="w"> </span><span class="n">sunspotarea</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sunspotarea</span><span class="p">,</span><span class="w"> </span><span class="n">usmelec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">usmelec</span><span class="p">,</span><span class="w"> </span><span class="n">wmurders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wmurders</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="c1"># confirmando que todas as s&#xE9;ries s&#xE3;o objetos do tipo &apos;ts&apos;, que &#xE9; a classe
# usada como input para a func&#xE3;o select_forecast()
</span><span class="n">lapply</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">,</span><span class="w"> </span><span class="n">class</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unlist</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## a10 ausair ausbeer austa austourists cafe ## &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; ## debitcards elecequip elecsales euretail guinearice h02 ## &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; ## livestock oil sunspotarea usmelec wmurders ## &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot; &quot;ts&quot;</code></pre>
</figure>
<p>
Será que todas essas séries são mensais? Podemos confirmar essa
informação com a função
<code class="highlighter-rouge">frequency()</code>.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">lapply</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">,</span><span class="w"> </span><span class="n">frequency</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unlist</span><span class="w"> </span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## a10 ausair ausbeer austa austourists cafe ## 12 1 4 1 4 4 ## debitcards elecequip elecsales euretail guinearice h02 ## 12 12 1 4 1 12 ## livestock oil sunspotarea usmelec wmurders ## 1 1 1 12 1</code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># fazer um gr&#xE1;fico
</span><span class="n">lapply</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">,</span><span class="w"> </span><span class="n">frequency</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unlist</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">barplot</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-3-1.png" alt="center">
Temos então 8 séries anuais (frequência 1), 4 trimestrais e 5 mensais.
Esse será um bom teste para o pacote
<code class="highlighter-rouge">mafs</code>.
</p>
<h2 id="modelagem">
Modelagem
</h2>
<p>
Para aplicar a função
<code class="highlighter-rouge">select\_forecast()</code> em todas as
séries, é necessário um for loop:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># criar lista vazia para salvar os resultados
</span><span class="n">df_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">vector</span><span class="p">(</span><span class="s2">&quot;list&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">))</span><span class="w"> </span><span class="c1"># iniciar loop
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">)){</span><span class="w"> </span><span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c1"># salvar serie do loop
</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data_fpp</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="c1"># usar tamanho da serie de teste de 6. o horizonte de previs&#xE3;o n&#xE3;o importa
</span><span class="w"> </span><span class="c1"># nao usar modelo h&#xED;brido apenas como demonstra&#xE7;&#xE3;o do novo arg dont_apply
</span><span class="w"> </span><span class="n">mafs_result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">select_forecast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">test_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="n">horizon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MAPE&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">dont_apply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hybrid&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">mafs_result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mafs_result</span><span class="o">$</span><span class="n">df_models</span><span class="w"> </span><span class="c1"># acrescentar nome da s&#xE9;rie no dataframe dos resultados
</span><span class="w"> </span><span class="n">mafs_result</span><span class="o">$</span><span class="n">serie</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="n">df_results</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mafs_result</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="c1"># converter para data frame
</span><span class="n">df_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">bind_rows</span><span class="p">(</span><span class="n">df_results</span><span class="p">)</span></code></pre>
</figure>
<h2 id="análise-dos-dados">
Análise dos dados
</h2>
<p>
Uma rápida visualização tabular dos resultados:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">head</span><span class="p">(</span><span class="n">df_results</span><span class="p">)</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## model ME RMSE MAE MPE MAPE MASE
## 1 auto.arima -0.5266278 2.726579 2.317648 -3.404950 11.368897 1.867733
## 2 bats -0.6477061 2.526620 2.281634 -3.618927 10.966702 1.838710
## 3 croston 0.9954976 3.783578 2.770328 2.119148 11.608482 2.232536
## 4 ets -0.1664123 2.315405 2.059765 -1.141468 9.653898 1.659911
## 5 meanf 12.1695849 12.705245 12.169585 52.965233 52.965233 9.807155
## 6 naive -3.3000045 4.920821 4.586426 -17.426919 21.763365 3.696083
## ACF1 best_model runtime_model serie
## 1 -0.48291837 tbats 1.080 a10
## 2 -0.50869655 tbats 4.243 a10
## 3 -0.07557645 tbats 1.113 a10
## 4 -0.49674756 tbats 1.615 a10
## 5 -0.07557645 tbats 0.000 a10
## 6 -0.07557645 tbats 0.002 a10</code></pre>
</figure>
<p>
Vamos ver então quais modelos despontam como os mais rápidos e os mais
eficientes.
</p>
<p>
Primeiro, um gráfico do tempo de execução por pacote
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">ggplot</span><span class="p">(</span><span class="n">df_results</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">runtime_model</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runtime_model</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_boxplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Tempo de execu&#xE7;&#xE3;o (s)&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coord_flip</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-7-1.png" alt="center">
</p>
<p>
Percebe-se que os modelos <code class="highlighter-rouge">tbats()</code>
e <code class="highlighter-rouge">bats()</code> são os mais
computacionalmente custosos. Os mais rápidos são, sem surpresas, os
modelos de previsão simples, como o da média simples e o modelo ingênuo.
</p>
<p>
Agora, um gráfico da acurácia dos modelos de acordo com a métrica MAPE:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">ggplot</span><span class="p">(</span><span class="n">df_results</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">MAPE</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAPE</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_boxplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MAPE (%)&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coord_flip</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-8-1.png" alt="center">
</p>
<p>
Alguns modelos apresentaram outliers, o que distorceu o boxplot. Visto
que esse gráfico não serviu para muita coisa, é melhor resumir a
acurácia por meio da mediana simples do MAPE:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># calcular a mediana do MAPE para cada modelo
</span><span class="n">df_results</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="n">MAPE_mediano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">MAPE</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">MAPE_mediano</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAPE_mediano</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;identity&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MAPE mediano&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-9-1.png" alt="center">
</p>
<p>
Vê-se que os modelos que obtiveram os melhores resultados foram os
modelos <code class="highlighter-rouge">stlm()</code>, seja por arima ou
por ets. Não vou entrar em detalhes estatísticos sobre o porquê desse
resultado para não fugir do escopo do post.
</p>
<p>
Vamos então analisar a relação entre tempo de execução e eficácia dos
modelos por meio de um gráfico de pontos.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">ggplot</span><span class="p">(</span><span class="n">df_results</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runtime_model</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAPE</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-10-1.png" alt="center">
</p>
<p>
É difícil visualizar alguma relação muito clara nesse gráfico. Ao invés
de plotar todos os data points, vamos resumir os dados pela mediana do
MAPE e do runtime para cada modelo.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">df_results</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="n">MAPE_mediano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">MAPE</span><span class="p">),</span><span class="w"> </span><span class="n">runtime_mediano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">runtime_model</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runtime_mediano</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAPE_mediano</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Tempo de execu&#xE7;&#xE3;o mediano (s)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MAPE mediano (%)&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_text_repel</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-11-1.png" alt="center">
</p>
<p>
Novamente, não é possível determinar que a acurácia do modelo influencia
o seu tempo de execução.
</p>
<h2 id="análise-da-influência-da-frequência-da-série">
Análise da influência da frequência da série
</h2>
<p>
Já que estamos trabalhando ao mesmo tempo com séries trimestrais,
mensais e anuais, por que não analisar a influência da variável da
frequência da série nos resultados obtidos com o pacote?
</p>
<p>
Primeiro, vamos criar um data frame com características sobre as séries
analisadas
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">df_series</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="w"> </span><span class="n">serie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">),</span><span class="w"> </span><span class="n">frequencia</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">,</span><span class="w"> </span><span class="n">frequency</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unlist</span><span class="p">,</span><span class="w"> </span><span class="n">tamanho_serie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">unlist</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="c1"># juntar ao dataframe de resultados
</span><span class="n">df_results</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">df_series</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;serie&quot;</span><span class="p">)</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">data_fpp</span><span class="p">)</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## [1] &quot;a10&quot; &quot;ausair&quot; &quot;ausbeer&quot; &quot;austa&quot; &quot;austourists&quot;
## [6] &quot;cafe&quot; &quot;debitcards&quot; &quot;elecequip&quot; &quot;elecsales&quot; &quot;euretail&quot; ## [11] &quot;guinearice&quot; &quot;h02&quot; &quot;livestock&quot; &quot;oil&quot; &quot;sunspotarea&quot;
## [16] &quot;usmelec&quot; &quot;wmurders&quot;</code></pre>
</figure>
<p>
Para demosntrar a influência da frequência da série no tempo de execução
dos modelos, uma boa opção de visualização é o gráfico de densidade:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">df_results</span><span class="o">$</span><span class="n">frequencia</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">as.factor</span><span class="w"> </span><span class="n">df_results</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">runtime_model</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">quantile</span><span class="p">(</span><span class="n">runtime_model</span><span class="p">,</span><span class="w"> </span><span class="m">0.90</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runtime_model</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frequencia</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_density</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-13-1.png" alt="center">
</p>
<p>
É difícil tirar qualquer tipo de conclusão a partir do gráfico acima. Dá
para afirmar que a probabilidade de um modelo ter um runtime muito curto
(de até 0,25 segundos) é menor para séries mensais e trimestrais do que
para mensais.
</p>
<p>
Um teste estatístico que pode ser usado para mensura essa relação é o
ANOVA e o teste de Tukey:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">anova.fit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">aov</span><span class="p">(</span><span class="n">runtime_model</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">frequencia</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_results</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">anova.fit</span><span class="p">)</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## Df Sum Sq Mean Sq F value Pr(&gt;F) ## frequencia 2 52.5 26.24 7.074 0.00102 **
## Residuals 262 971.9 3.71 ## ---
## Signif. codes: 0 &apos;***&apos; 0.001 &apos;**&apos; 0.01 &apos;*&apos; 0.05 &apos;.&apos; 0.1 &apos; &apos; 1</code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># Teste de Tukey
</span><span class="n">anova.fit</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">TukeyHSD</span><span class="p">()</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## Tukey multiple comparisons of means
## 95% family-wise confidence level
## ## Fit: aov(formula = runtime_model ~ frequencia, data = df_results)
## ## $frequencia
## diff lwr upr p adj
## 4-1 0.3325410 -0.3653926 1.030475 0.5007042
## 12-1 1.0355557 0.3824913 1.688620 0.0006658
## 12-4 0.7030147 -0.0356088 1.441638 0.0659239</code></pre>
</figure>
<p>
O resultado do teste ANOVA aponta um valor significante (valor p menor
que 0,05), o que indica que a hipótese nula de que a frequência da série
não influencia o tempo de execução do ajuste pode ser rejeitado.
</p>
<p>
Já o teste de Tukey indica que apenas a hipótese nula só pode ser
rejeitada para a comparação entre séries mensais e anuais. Para as
outras duas comparações, o valor p é maior que 0,05.
</p>
<h2 id="influência-na-acurácia">
Influência na acurácia
</h2>
<figure class="highlight">
<pre><code class="language-r"><span class="n">df_results</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">MAPE</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">quantile</span><span class="p">(</span><span class="n">MAPE</span><span class="p">,</span><span class="w"> </span><span class="m">0.90</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAPE</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frequencia</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_density</span><span class="p">()</span></code></pre>
</figure>
<p>
<img src="http://sillasgonzaga.github.io/figs/mafs02/unnamed-chunk-15-1.png" alt="center">
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">anova.fit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">aov</span><span class="p">(</span><span class="n">MAPE</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">frequencia</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_results</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">anova.fit</span><span class="p">)</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## Df Sum Sq Mean Sq F value Pr(&gt;F) ## frequencia 2 872086 436043 10.06 6.16e-05 ***
## Residuals 262 11352631 43331 ## ---
## Signif. codes: 0 &apos;***&apos; 0.001 &apos;**&apos; 0.01 &apos;*&apos; 0.05 &apos;.&apos; 0.1 &apos; &apos; 1</code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># Teste de Tukey
</span><span class="n">anova.fit</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">TukeyHSD</span><span class="p">()</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## Tukey multiple comparisons of means
## 95% family-wise confidence level
## ## Fit: aov(formula = MAPE ~ frequencia, data = df_results)
## ## $frequencia
## diff lwr upr p adj
## 4-1 -118.973589 -194.40472 -43.54246 0.0007170
## 12-1 -113.732405 -184.31416 -43.15065 0.0005302
## 12-4 5.241184 -74.58762 85.06998 0.9868840</code></pre>
</figure>
<h2 id="conclusão">
Conclusão
</h2>
<p>
Uma próxima análise poderia incluir um número maior de séries e de
frequências diferentes, como diárias e semanais.
</p>
</article>
</div>

  <footer class="article-footer">

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&title=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&text=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&t=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f&title=mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?mafs%3a%20Analisando%20a%20efic%c3%a1cia%20dos%20modelos%20preditivos%20usados%20no%20pacote %2f2017%2f01%2f29%2fmafs-analisando-a-efic%25C3%25A1cia-dos-modelos-preditivos-usados-no-pacote%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>


    <section class="footer">
      <div>
        <nav class="crumb">
          <ol>
            <li><a href="../../../../"><i class="fa fa-home" aria-hidden="true"></i>TOP</a></li>
            
            <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="../../../../post/" itemprop="url"><span itemprop="title">POST</span></a></li>
            
            <li class="active">mafs: Analisando a eficácia dos modelos preditivos usados no pacote</li>
          </ol>
        </nav>
      </div>
    </section>

    
    
    
    <section class="footer">
      <header>
        <a href="../../../../categories/">CATEGORIES</a>
      </header>
      <div>
        <ul class="terms">
          
          <li><a href="../../../../categories/paixao-por-dados/">paixao-por-dados</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    
  </footer>

</article>


    <div class="adj">
      <div class="mrow">
        
        <div class="mcol c6">
          <header>Previous Article</header>
          <article class="lism">
  <a href="../../../../2017/01/10/tcc-finalizado/">
    <div class="thumb thumb-cb7b5fb8e493485d1933530729c65eb7"></div>

    <div class="inner">
      <div class="title">TCC Finalizado: </div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-01-10T03:00:00JST">Jan 10, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
        
        <div class="mcol c6">
          <header>Next Article</header>
          <article class="lism">
  <a href="../../../../2017/02/15/o-blog-do-curso-r/">
    <div class="thumb thumb-daeb8aa26776a73d6c5d2d17550648be"></div>

    <div class="inner">
      <div class="title">O blog do Curso R</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-02-15T11:07:31JST">Feb 15, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
      </div>
    </div>

    
  </div>
  <div class="mcol c4">
    <aside class="l-sidebar">

  <div class="sections sidebar">
    <section class="sidebar">
      <header>LATESTS</header>
      <div>
        <div class="articles sm">
          
          <article class="lism">
  <a href="../../../../2017/06/08/instalando-anaconda---tensorflow---keras-para-r-no-ubuntu-16.04-server/">
    <div class="thumb thumb-4ca7aebf68b206ff8ebd3d339880cdbe"></div>

    <div class="inner">
      <div class="title">Instalando Anaconda &#43; TensorFlow &#43; Keras para R no Ubuntu 16.04 Server</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-08T18:12:00JST">Jun 8, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/05/keras-colocando-deep-learning-no-pipeline/">
    <div class="thumb thumb-ea657ec9d261bce8d42f524cfa192f24"></div>

    <div class="inner">
      <div class="title">Keras: colocando deep learning no pipeline</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-05T11:07:31JST">Jun 5, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/01/a-kind-of-magick/">
    <div class="thumb thumb-7a7e4e54f6ba40cf59b708a1b1438641"></div>

    <div class="inner">
      <div class="title">A kind of magick</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-01T20:26:00JST">Jun 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/28/pdf-e-ocr/">
    <div class="thumb thumb-d477bfffbde22e4c5cc9e81c9ff3b556"></div>

    <div class="inner">
      <div class="title">PDF e OCR</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-28T11:07:31JST">May 28, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/23/slides-da-minha-apresenta%C3%A7%C3%A3o-no-ser-2017/">
    <div class="thumb thumb-ee8e80ec72747e392813c983fcdbc25b"></div>

    <div class="inner">
      <div class="title">Slides da minha apresentação no SER 2017</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-23T03:00:00JST">May 23, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/19/web-scraping-do-site-da-secretaria-de-seguran%C3%A7a-p%C3%BAblica-de-s%C3%A3o-paulo/">
    <div class="thumb thumb-3da60970259d2fd391b3fb0a4ff77692"></div>

    <div class="inner">
      <div class="title">Web scraping do site da Secretaria de Segurança Pública de São Paulo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-19T20:26:00JST">May 19, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/16/blog-paix%C3%A3o-por-dados-estar%C3%A1-no-meetup-1%C2%BA-#analyticsemtudo---dados-abertos/">
    <div class="thumb thumb-5b8f5e73458a26798a261512427240c8"></div>

    <div class="inner">
      <div class="title">Blog Paixão por Dados estará no meetup 1º #AnalyticsEmTudo - Dados Abertos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-16T03:00:00JST">May 16, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/04/gr%C3%A1ficos-miojo-mapas-tem%C3%A1ticos-do-brasil-em-3-minutos-ou-menos/">
    <div class="thumb thumb-d0bebe978f4bf6a447682918aea12509"></div>

    <div class="inner">
      <div class="title">Gráficos miojo: Mapas temáticos do Brasil em 3 minutos ou menos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-04T20:26:00JST">May 4, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/01/as-cores-da-marvel-vs-dc/">
    <div class="thumb thumb-adbafb32d64272a6d88e49a78a8c536a"></div>

    <div class="inner">
      <div class="title">As cores da Marvel vs DC</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-01T20:26:00JST">May 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/04/29/diagramas-de-venn-em-r/">
    <div class="thumb thumb-88b3c0abd2dfcce2dd7b25a3500eae82"></div>

    <div class="inner">
      <div class="title">Diagramas de Venn em R</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-29T20:26:00JST">Apr 29, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
        </div>
      </div>
    </section>

    
    <section class="sidebar">
      <header>CATEGORIES</header>
      <div>
        <ul class="terms">
          <li><a href="../../../../categories/curso-r">curso-r</a></li><li><a href="../../../../categories/paixao-por-dados">paixao-por-dados</a></li>
        </ul>
      </div>
    </section>
    
    <section class="sidebar">
      <header>TAGS</header>
      <div>
        <ul class="terms">
          
        </ul>
      </div>
    </section>
    
  </div>

</aside>

  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="l-container">
        <p><span class="h-logo">&copy; A Hugo website</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_robust">Robust</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

