<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="theme-color" content="#263238">

<meta name="generator" content="Hugo 0.21" />

<link rel="apple-touch-icon" href="../../../../images/logo.png">


<link rel="canonical" href="../../../../2017/04/10/voc%C3%AA-est%C3%A1-a-menos-de-1-km-de-um-hamb%C3%BArguer/">


    
    <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>Você está a menos de 1 km de um Hambúrguer? - A Hugo website</title>
    

<meta name="description" content="Se você estiver no centro de São Paulo, quanto será que você precisa andar para achar uma hamburgueria? Será que a sua casa fica a menos de 1 km de hospitais, delagacias ou corpo de bombeiros? Neste post, veremos como utilizar uma das APIs do Google Maps para obter informações de geolocalização a partir de uma pesquisa simples. Em seguida, vamos gerar mapas com o pacote leaflet para visualizar os dados coletados e responder essas perguntas.">

<meta property="og:title" content="Você está a menos de 1 km de um Hambúrguer? - A Hugo website">
<meta property="og:type" content="article">
<meta property="og:url" content="/2017/04/10/voc%C3%AA-est%C3%A1-a-menos-de-1-km-de-um-hamb%C3%BArguer/">
<meta property="og:image" content="/images/default.png">
<meta property="og:site_name" content="A Hugo website">
<meta property="og:description" content="Se você estiver no centro de São Paulo, quanto será que você precisa andar para achar uma hamburgueria? Será que a sua casa fica a menos de 1 km de hospitais, delagacias ou corpo de bombeiros? Neste post, veremos como utilizar uma das APIs do Google Maps para obter informações de geolocalização a partir de uma pesquisa simples. Em seguida, vamos gerar mapas com o pacote leaflet para visualizar os dados coletados e responder essas perguntas.">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="A Hugo website">
<meta name="twitter:url" content="/2017/04/10/voc%C3%AA-est%C3%A1-a-menos-de-1-km-de-um-hamb%C3%BArguer/">
<meta name="twitter:title" content="Você está a menos de 1 km de um Hambúrguer? - A Hugo website">
<meta name="twitter:description" content="Se você estiver no centro de São Paulo, quanto será que você precisa andar para achar uma hamburgueria? Será que a sua casa fica a menos de 1 km de hospitais, delagacias ou corpo de bombeiros? Neste post, veremos como utilizar uma das APIs do Google Maps para obter informações de geolocalização a partir de uma pesquisa simples. Em seguida, vamos gerar mapas com o pacote leaflet para visualizar os dados coletados e responder essas perguntas.">
<meta name="twitter:image" content="/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"/"
    },
    "headline": "Você está a menos de 1 km de um Hambúrguer? - A Hugo website",
    "image": {
      "@type": "ImageObject",
      "url": "/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2017-04-10T20:26:00JST",
    "dateModified": "2017-04-10T20:26:00JST",
    "author": {
      "@type": "Person",
      "name": "A Hugo website"
    },
    "publisher": {
      "@type": "Organization",
      "name": "A Hugo website",
      "logo": {
        "@type": "ImageObject",
        "url": "/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "Se você estiver no centro de São Paulo, quanto será que você precisa andar para achar uma hamburgueria? Será que a sua casa fica a menos de 1 km de hospitais, delagacias ou corpo de bombeiros? Neste post, veremos como utilizar uma das APIs do Google Maps para obter informações de geolocalização a partir de uma pesquisa simples. Em seguida, vamos gerar mapas com o pacote leaflet para visualizar os dados coletados e responder essas perguntas."
  }
</script>


    <style>
      html { font-size: 18px; background-color: rgba(236,239,241,.5);}@media (max-width: 768px) { html { font-size: 15px; }}body { color: #333; font-family: 'Roboto Slab','ヒラギノ角ゴ Pro W3','Hiragino Kaku Gothic Pro',メイリオ,Meiryo,sans-serif; font-feature-settings : "palt"; font-size: inherit; line-height: 1rem; margin: 0; padding: 0;}h1, h2, h3, h4, h5 ,h6 { font-size: 1rem; font-weight: 700; line-height: 1rem; margin: 0;}hr { border: 0; border-top: 1px dashed #cfd8dc; margin: 1rem 0;}p { margin: 0; line-height: 1rem;}a { color: #2196f3; text-decoration: none; transition-duration: .3s;}ul, ol { margin: 0; padding: 0;}table { border-collapse: collapse;}th, td { font-size: .8rem; padding: .5rem;}tr { border-bottom: 1px dashed #ddd;}/* Layouts */main,aside { display: block;}main { padding: 1rem 0 3rem 0; }aside.h { padding: 3rem 0; }main.f,aside.f { background-color: #333; border-top: 2px dashed #fff; border-bottom: 2px dashed #fff;}.l-container { position: relative; max-width: 68rem; margin: 0 auto; padding: 0 1rem;}.l-container.thin { max-width: 44rem;}.l-header { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); padding: 1rem 0; text-align: center;}.l-footer { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); font-size: .6rem; font-weight: 700; padding: 1rem 0;}@media (max-width: 768px) { .l-sidebar { margin-top: 4rem; }}.mrow { margin: 0 -1rem; overflow: hidden;}.mcol { box-sizing: border-box; float: left; padding: 0 1rem;}.c6 { width: 50%; }.c4 { width: 33.26323833%; }.c8 { width: 66.66666%; }@media (max-width: 768px) { .mcol { width: 100%; float: none; }}.logo a { font-size: 1.4rem; line-height: 1.5rem; font-weight: 700; color: #333;}.articles { margin: -1rem 0; margin-bottom: 1rem;}.articles.sm { margin: -.5rem 0; margin-bottom: 0;}article { border-radius: 4px; overflow: hidden;}article.li { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); height: 20rem; overflow: hidden; margin: 1rem 0;}article.li > a { display: block; color: #333;}article.li .inner { padding: 1rem;}article.li .thumb { height: 8rem;}article.li .title { color: #333; font-size: 1.2rem; line-height: 1.5rem; margin-bottom: .5rem;}article.li .summary { font-size: .8rem; height: 6rem; overflow: hidden; margin-top: 1rem;}article.lism { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin: .5rem 0;}article.lism::after { content: ''; display: block; clear: both;}article.lism > a { display: block; color: #333;}article.lism .inner { display: table-cell; vertical-align: middle; height: 5rem; padding-left: .5rem;}article.lism .thumb { width: 5rem; height: 5rem; float: left;}article.lism .title { font-weight: 700; line-height: 1.25rem; margin-bottom: .25rem;}article.sn { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin-bottom: 1rem;}article.sn .thumb { height: 20rem;}@media (max-width: 768px) { article.sn .thumb { height: 10rem; }}article.sn > .article-header,article.sn > .article-body,article.sn .article-footer { padding: 2rem;}article.sn > .article-body { padding: 0 2rem;}@media (max-width: 768px) { article.sn > .article-header, article.sn > .article-body, article.sn .article-footer { padding: 1rem; } article.sn > .article-body { padding: 0 1rem; }}article.sn > .article-header .title { font-size: 1.8rem; line-height: 2rem; margin-bottom: .5rem;}@media (max-width: 768px) { article.sn > .article-header .title { font-size: 1.4rem; line-height: 1.5rem; }}article.sn > .article-header .facts { margin-bottom: 1rem;}article.sn > .article-body { margin-bottom: 1.5rem;}article.sn > .article-body h2 { border-bottom: .25rem solid #333; font-size: 1.2rem; line-height: 1.5rem; margin: 1.5rem 0; padding: .5rem 0;}article.sn > .article-body h3 { border-left: .5rem solid #333; line-height: 1.5rem; margin: 1.5rem 0; padding: .125rem .5rem;}article.sn > .article-body ul,article.sn > .article-body ol { margin: 1.5rem 0; padding-left: 1.5rem;}article.sn > .article-body li { padding-bottom: .5rem; line-height: 1.5rem;}article.sn > .article-body li:last-child { padding-bottom: 0;}article.sn > .article-body p { margin: 1rem 0; line-height: 1.5rem;}article.sn > .article-body strong,article.sn > .article-body em { font-style: normal; font-weight: 700;}article.sn > .article-body strong { box-shadow: 0 -.5rem 0 0 #ffc107 inset;}article.sn > .article-body em { color: #8bc34a;}article.sn > .article-body code,article.sn > .article-body pre { font-family: Menlo, Consolas, monospace; font-size: .7rem;}article.sn > .article-body pre { background-color: #333; color: #fff; line-height: 1rem; margin: 1.5rem -2rem; overflow: auto;}@media (max-width: 768px) { article.sn > .article-body pre { margin: 1.5rem -1rem; }}article.sn > .article-body pre > code { display: block; padding: 1rem 2rem;}@media (max-width: 768px) { article.sn > .article-body pre > code { padding: 1rem; }}article.sn > .article-body p code { background-color: #eceff1; color: #333; border-radius: 4px; margin: 0 .25rem; padding: .375rem; white-space: nowrap;}article.sn > .article-body blockquote { position: relative; border-left: .25rem solid #333; font-size: .8rem; padding: .125rem 1rem; margin: 1.5rem 0;}@media (max-width: 768px) { article.sn > .article-body blockquote { font-size: 1rem; }}article.sn > .article-body blockquote p { margin: .5rem 0; line-height: 1rem;}article.sn > .article-body figure { margin: 1.5rem 0;}article.sn > .article-body figure img,article.sn > .article-body figure amp-img { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); max-width: 100%;}article.sn > .article-body figcaption { color: #cfd8dc; font-size: .8rem; font-weight: 700; margin-top: .5rem;}.facts li { display: inline; font-size: .8rem; margin-right: 1rem;}.facts i { color: #cfd8dc; margin-right: .5em;}.facts.sm li { font-size: .7rem;}.sections.sidebar { margin: -1rem 0;}.sections.footer { margin: -1rem 0;}section.sidebar { margin: 2rem 0;}section.sidebar > header { font-size: .8rem; font-weight: 700; letter-spacing: 4px; text-align: center; margin: 1.5rem 0;}section.footer { margin: 1rem 0;}section.footer > header { font-size: .8rem; margin: .5rem 0;}section.footer > header::before { content: "- ";}section.footer > header a { font-weight: 700; color: #333; text-decoration: underline;}.terms { margin: -.25rem;}.terms li { display: inline-block;}.terms a { display: block; float: left; background-color: #333; border-radius: 4px; color: #fff; font-size: .7rem; margin: .25rem; padding: 0 .75rem; line-height: 1.75rem;}.paging { text-align: center; padding: 1rem 0;}.paging a { display: inline-block; background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); border-radius: 4px; color: #333; padding: 0 1rem; line-height: 3rem;}.page-title { text-align: center; margin: 1rem 0;}.page-title::after { content: ''; display: block; border-bottom: .25rem solid #333; width: 3rem; margin: 1.5rem auto;}.page-title > .title { font-size: 1.2rem; line-height: 1.5rem;}/* Parts:breadcrumb */.crumb ol { text-overflow: ellipsis; color: #cfd8dc; white-space: nowrap; overflow: hidden;}.crumb li { display: inline; font-size: .8rem;}.crumb li::after { content: '›'; margin: 0 .25rem 0 .5rem;}.crumb li:last-child::after { content: '';}.crumb a { color: #cfd8dc;}.crumb i { margin-right: .5em;}.share { padding: 0;}.share a { display: inline-block; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); min-width: 1rem; height: 2rem; border-radius: 4px; color: #333; font-size: .8rem; font-weight: 700; line-height: 2rem; text-align: center; padding: 0 .5rem;}.adj article.lism { margin-bottom: 1rem;}.adj header { font-weight: 700; font-size: .8rem;}.toc { padding: 0 2rem;}@media (max-width: 768px) { .toc { padding: 0 1rem; }}.toc { margin: 1rem 0;}.toc nav>ul { background-color: #eceff1; border-radius: 4px; display: inline-block; font-size: .8rem; padding: .5rem 1rem; word-break: break-all; list-style: none;}.toc ul { padding: 0;}.toc ul ul { padding-left: 1rem;}.toc ul ul ul { padding-left: 1rem;}.toc li { color: #90a4ae;}.toc ul ul>li { font-weight: 700; margin: .5rem 0; list-style-type: decimal;}.toc ul ul ul>li { list-style-type: disc; font-weight: 500;}.thumb { background-image: url(/images/default.jpg); background-size: cover;}
      
      
    </style>
  </head>

  <body>
    
    
    

    <header class="l-header">
      <div class="l-container">
        <div class="logo">
          <a href="../../../../">A Hugo website</a>
        </div>
      </div>
    </header>

    <main>
      <div class="l-container">
        
<div class="mrow">
  <div class="mcol c8">

    <article class="sn">

  <div class="thumb thumb-cce0a7ac61f52f300cbb59e2db3757ab"></div>

  <header class="article-header">
    <h1 class="title">Você está a menos de 1 km de um Hambúrguer?</h1>

    <ul class="facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-10T20:26:00JST">Apr 10, 2017</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="../../../../post/">POST</a></li>
      
    </ul>

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&title=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&text=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&t=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&title=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f %2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>

  </header>

  

  <div class="article-body"><p>
Se você estiver no centro de São Paulo, quanto será que você precisa
andar para achar uma hamburgueria? Será que a sua casa fica a menos de 1
km de hospitais, delagacias ou corpo de bombeiros? Neste post, veremos
como utilizar uma das APIs do Google Maps para obter informações de
geolocalização a partir de uma pesquisa simples. Em seguida, vamos gerar
mapas com o pacote <code>leaflet</code> para visualizar os dados
coletados e responder essas perguntas.
</p>
<p>
A API que vamos utilizar para acessar os dados do Google Maps é a
<a href="https://developers.google.com/places/web-service/?hl=pt-br">Google
Places</a>. Para configurá-la, você precisa fazer o seguinte:
</p>
<ol>
<li>
criar um projeto no
<a href="https://console.developers.google.com/iam-admin/projects">Google
APIs</a>;
</li>
<li>
adicionar a <strong>Google Places API Web Service</strong> à sua
biblioteca de APIs;
</li>
<li>
obter uma
<a href="https://support.google.com/googleapi/answer/6158862">chave de
API</a>; e
</li>
<li>
enviar uma requisição.
</li>
</ol>
<p>
Para mais informações sobre os itens 1, 2 e 3, bastar acessar os links
acima. Aqui, vamos focar em como fazer o item 4.
</p>

<p>
A API do Google Places permite fazer
<a href="https://developers.google.com/places/web-service/search">alguns
tipos de buscas</a>, como estabelecimentos específicos próximos a um
local ou dentro de uma região pré-delimitada. Nosso objetivo aqui é
requisitar os dados de todos os estabelecimentos, como hospitais,
delegacias, supermercados, escolas etc, dentro de um raio de busca em
torno de um ponto específico. Neste contexto, a requisição deve ser
feita a partir de um link da forma
</p>
<blockquote>
<p>
<a href="https://maps.googleapis.com/maps/api/place/radarsearch/output?parameters" class="uri">https://maps.googleapis.com/maps/api/place/radarsearch/output?parameters</a>
</p>
</blockquote>
<p>
substituindo <em>output</em> pelo formato da saída, <code>xml</code> ou
<code>json</code>, e <em>parameters</em> pelos parâmetros de busca.
Utilizaremos aqui o formato <code>json</code>, <em>Javascript Object
Notation</em>. Para mais informações sobre JSON, consulte
<a href="http://www.devmedia.com.br/introducao-ao-formato-json/25275">este
link</a>.
</p>
<p>
Utilizaremos as seguintes bibliotecas nesta análise:
</p>
<pre class="r"><code>library(tibble)
library(magrittr)
library(dplyr)
library(stringr)
library(purrr)
library(RCurl)
library(jsonlite)
library(leaflet)</code></pre>
<p>
O que precisamos fazer é criar a url de requisição, acessá-la, guardar
os dados no formato <code>json</code> em um objeto e convertê-lo para um
data frame. A função <code>get\_googlemaps\_data()</code> abaixo faz
exatamente isso. Mais especificamente, ela recebe os parâmetros de
busca, uma chave de API e retorna um data frame com os dados de
geolocalização (latitude e longitude) dos resultados encontrados.
</p>
<ul>
<li>
O argumento <code>keyword=</code> recebe o termo a ser pesquisado, isto
é, se estivermos pesquisando por escolas, esse argumento receberá a
string <code>'escola'</code>.
</li>
<li>
O argumento <code>type=</code> recebe um termo para filtrar os
estabelecimentos pesquisados. Por exemplo: <code>keyword =
'restaurante'</code> e <code>type = 'vegetariano'</code>.
</li>
<li>
Os argumentos <code>central\_lat=</code> e <code>central\_log=</code>
representam, respectivamente, a latitude e a longitude do ponto central
da busca. Os valores <em>default</em> são os do centro da cidade de São
Paulo.
</li>
<li>
O argumento <code>radius=</code> indica o raio máximo de busca. O
<em>default</em> é 15 Km.
</li>
<li>
O argumento <code>key=</code> deve receber a sua chave de API.
</li>
</ul>
<pre class="r"><code>get_googlemaps_data &lt;- function(keyword, type = &quot;&quot;, central_lat = -23.55052, central_log = -46.63331, radius = 15000, key) { basic_url = &quot;https://maps.googleapis.com/maps/api/place/radarsearch/json?&quot; if(type != &quot;&quot;) { type %&lt;&gt;% str_replace_all(&quot; &quot;, &quot;+&quot;) %&gt;% # Os espa&#xE7;os precisam ser str_c(&quot;&amp;type=&quot;, .) # substitu&#xED;dos por &apos;+&apos;. } complete_url &lt;- str_c(basic_url, # Criando a url de requisi&#xE7;&#xE3;o &quot;location=&quot;, # com os par&#xE2;metros de busca. central_lat, &quot;,&quot;, central_log, &quot;&amp;radius=&quot;, radius, type, &quot;&amp;keyword=&quot;, str_replace_all(keyword, &quot; &quot;, &quot;+&quot;), &quot;&amp;key=&quot;, key) json &lt;- RCurl::getURL(complete_url) # Acessando a URL. list_info &lt;- jsonlite::fromJSON(json) # Transformando json em lista. # Guardando a latitude e longitude em um df, assim como o lugar pesquisado. df &lt;- tibble::tibble(lat = list_info$results$geometry$location$lat, long = list_info$results$geometry$location$lng, place = keyword) return(df)
}
</code></pre>
<p>
Com a função <code>get\_googlemaps\_data()</code> em mão, basta rodar o
código <code>get\_googlemaps\_data("mercado", key =
sua\_API\_key)</code> para obter a geolocalização de até 200 mercados em
um raio de até 15 Km do centro de São Paulo. Sim, o limite é de 200
resultados. Não encontrei maneiras de aumentar esse limite.
</p>
<p>
Também podemos utilizar a função <code>purrr:map\_df()</code> para gerar
um data frame com várias buscas. A função <em>map</em> mapeia uma
determinada função em cada elemento de um vetor/lista, retornando um
data frame. Ainda não estamos construindo os mapas.
</p>
<pre class="r"><code>places &lt;- c(&quot;pronto socorro&quot;, &quot;delegacia&quot;, &quot;bombeiros&quot;, &quot;hamburguer&quot;, &quot;pizza&quot;) df_places &lt;- places %&gt;% purrr::map_df(.f = get_googlemaps_data, key = key)</code></pre>
<p>
Às vezes, a requisição pode retornar com algum erro. Não consegui
descobrir o porquê isso acontece. Nestes casos, a função
<code>get\_googlemaps\_data()</code> também retornará um erro,
provavelmente na construção do data frame. Se isso acontecer, basta
rodar a função novamente, gerando uma nova requisição.
</p>

<p>
Para construir os mapas, vamos utilizar a função
<code>leaflet::leaflet()</code>. A ideia é, para cada ponto da pesquisa,
adicionar um círculo de raio igual a 1 Km. Dessa forma, se você estiver
fora desses círculos, quer dizer que você estará a mais de um quilômetro
de um dos estabelecimentos pesquisados. Veja os exemplos a seguir.
</p>
<p>
Eu pesquisei por “pronto socorro” porque a pesquisa hospitais também
resulta em hospitais veterinários. Um desafio para quem for reproduzir a
análise: coletar apenas a geolocalização de hospitais públicos.
</p>
<pre class="r"><code>df_places %&gt;% dplyr::filter(place == &quot;pronto socorro&quot;) %&gt;% leaflet %&gt;% addTiles() %&gt;% addCircles(lng = ~long, lat = ~lat, weight = 5, radius = 1000, color = &quot;blue&quot;, fillOpacity = 0.5)</code></pre>

<pre class="r"><code>df_places %&gt;% dplyr::filter(place == &quot;delegacia&quot;) %&gt;% leaflet %&gt;% addTiles() %&gt;% addCircles(lng = ~long, lat = ~lat, weight = 5, radius = 1000, color = &quot;blue&quot;, fillOpacity = 0.5)</code></pre>

<pre class="r"><code>df_places %&gt;% dplyr::filter(place == &quot;delegacia&quot;) %&gt;% leaflet %&gt;% addTiles() %&gt;% addCircles(lng = ~long, lat = ~lat, weight = 5, radius = 1000, color = &quot;blue&quot;, fillOpacity = 0.5)</code></pre>

<p>
Repare que o único local na região mais central de SP em que você pode
ficar a mais de um quilômetro de uma hamburgueria é no meio do parque
Ibirapuera.
</p>
<pre class="r"><code>df_places %&gt;% dplyr::filter(place == &quot;hamburguer&quot;) %&gt;% leaflet %&gt;% addTiles() %&gt;% addCircles(lng = ~long, lat = ~lat, weight = 5, radius = 1000, color = &quot;blue&quot;, fillOpacity = 0.5)</code></pre>

<p>
Se a busca devolvesse todos os resultados possíveis, esse mapa teria um
círculo azul com ~15 km de raio formado por milhares de círculos
menores. =D
</p>
<pre class="r"><code>df_places %&gt;% dplyr::filter(place == &quot;pizza&quot;) %&gt;% leaflet %&gt;% addTiles() %&gt;% addCircles(lng = ~long, lat = ~lat, weight = 5, radius = 1000, color = &quot;blue&quot;, fillOpacity = 0.5)</code></pre>
<p>
Sem dúvidas, a utilização dos dados aqui foi bem superficial, apenas
ilustrativa. O ideal seria juntar essas informações de geolocalização
com dados de criminalidade, saúde pública, socioeconômicos, consumo etc.
Dependendo da disponibilidade de dados, há espaço para muitas análises
interessantes utilizando essas informações do Google Maps. Com certeza
voltaremos neste assunto em posts futuros. =)
</p>
<p>
Comentários? Sugestões? Críticas? Você está a menos de um quilômetro dos
comentários! Deixe a sua mensagem!
</p>
</div>

  <footer class="article-footer">

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&title=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&text=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&t=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f&title=Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Voc%c3%aa%20est%c3%a1%20a%20menos%20de%201%20km%20de%20um%20Hamb%c3%barguer%3f %2f2017%2f04%2f10%2fvoc%25C3%25AA-est%25C3%25A1-a-menos-de-1-km-de-um-hamb%25C3%25BArguer%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>


    <section class="footer">
      <div>
        <nav class="crumb">
          <ol>
            <li><a href="../../../../"><i class="fa fa-home" aria-hidden="true"></i>TOP</a></li>
            
            <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="../../../../post/" itemprop="url"><span itemprop="title">POST</span></a></li>
            
            <li class="active">Você está a menos de 1 km de um Hambúrguer?</li>
          </ol>
        </nav>
      </div>
    </section>

    
    
    
    <section class="footer">
      <header>
        <a href="../../../../categories/">CATEGORIES</a>
      </header>
      <div>
        <ul class="terms">
          
          <li><a href="../../../../categories/curso-r/">curso-r</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    
  </footer>

</article>


    <div class="adj">
      <div class="mrow">
        
        <div class="mcol c6">
          <header>Previous Article</header>
          <article class="lism">
  <a href="../../../../2017/04/10/as-barras-do-progresso/">
    <div class="thumb thumb-e43f12da899c2480dd70d0bf4299935d"></div>

    <div class="inner">
      <div class="title">As barras do progresso</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-10T11:07:31JST">Apr 10, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
        
        <div class="mcol c6">
          <header>Next Article</header>
          <article class="lism">
  <a href="../../../../2017/04/15/an%C3%A1lise-das-emo%C3%A7%C3%B5es-de-a%C3%A9cio-neves/">
    <div class="thumb thumb-14640a4f9355dfc1b0984e9430648d3b"></div>

    <div class="inner">
      <div class="title">Análise das emoções de Aécio Neves</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-15T11:07:31JST">Apr 15, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
      </div>
    </div>

    
  </div>
  <div class="mcol c4">
    <aside class="l-sidebar">

  <div class="sections sidebar">
    <section class="sidebar">
      <header>LATESTS</header>
      <div>
        <div class="articles sm">
          
          <article class="lism">
  <a href="../../../../2017/06/08/instalando-anaconda---tensorflow---keras-para-r-no-ubuntu-16.04-server/">
    <div class="thumb thumb-4ca7aebf68b206ff8ebd3d339880cdbe"></div>

    <div class="inner">
      <div class="title">Instalando Anaconda &#43; TensorFlow &#43; Keras para R no Ubuntu 16.04 Server</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-08T18:12:00JST">Jun 8, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/05/keras-colocando-deep-learning-no-pipeline/">
    <div class="thumb thumb-ea657ec9d261bce8d42f524cfa192f24"></div>

    <div class="inner">
      <div class="title">Keras: colocando deep learning no pipeline</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-05T11:07:31JST">Jun 5, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/01/a-kind-of-magick/">
    <div class="thumb thumb-7a7e4e54f6ba40cf59b708a1b1438641"></div>

    <div class="inner">
      <div class="title">A kind of magick</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-01T20:26:00JST">Jun 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/28/pdf-e-ocr/">
    <div class="thumb thumb-d477bfffbde22e4c5cc9e81c9ff3b556"></div>

    <div class="inner">
      <div class="title">PDF e OCR</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-28T11:07:31JST">May 28, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/23/slides-da-minha-apresenta%C3%A7%C3%A3o-no-ser-2017/">
    <div class="thumb thumb-ee8e80ec72747e392813c983fcdbc25b"></div>

    <div class="inner">
      <div class="title">Slides da minha apresentação no SER 2017</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-23T03:00:00JST">May 23, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/19/web-scraping-do-site-da-secretaria-de-seguran%C3%A7a-p%C3%BAblica-de-s%C3%A3o-paulo/">
    <div class="thumb thumb-3da60970259d2fd391b3fb0a4ff77692"></div>

    <div class="inner">
      <div class="title">Web scraping do site da Secretaria de Segurança Pública de São Paulo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-19T20:26:00JST">May 19, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/16/blog-paix%C3%A3o-por-dados-estar%C3%A1-no-meetup-1%C2%BA-#analyticsemtudo---dados-abertos/">
    <div class="thumb thumb-5b8f5e73458a26798a261512427240c8"></div>

    <div class="inner">
      <div class="title">Blog Paixão por Dados estará no meetup 1º #AnalyticsEmTudo - Dados Abertos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-16T03:00:00JST">May 16, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/04/gr%C3%A1ficos-miojo-mapas-tem%C3%A1ticos-do-brasil-em-3-minutos-ou-menos/">
    <div class="thumb thumb-d0bebe978f4bf6a447682918aea12509"></div>

    <div class="inner">
      <div class="title">Gráficos miojo: Mapas temáticos do Brasil em 3 minutos ou menos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-04T20:26:00JST">May 4, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/01/as-cores-da-marvel-vs-dc/">
    <div class="thumb thumb-adbafb32d64272a6d88e49a78a8c536a"></div>

    <div class="inner">
      <div class="title">As cores da Marvel vs DC</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-01T20:26:00JST">May 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/04/29/diagramas-de-venn-em-r/">
    <div class="thumb thumb-88b3c0abd2dfcce2dd7b25a3500eae82"></div>

    <div class="inner">
      <div class="title">Diagramas de Venn em R</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-29T20:26:00JST">Apr 29, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
        </div>
      </div>
    </section>

    
    <section class="sidebar">
      <header>CATEGORIES</header>
      <div>
        <ul class="terms">
          <li><a href="../../../../categories/curso-r">curso-r</a></li><li><a href="../../../../categories/paixao-por-dados">paixao-por-dados</a></li>
        </ul>
      </div>
    </section>
    
    <section class="sidebar">
      <header>TAGS</header>
      <div>
        <ul class="terms">
          
        </ul>
      </div>
    </section>
    
  </div>

</aside>

  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="l-container">
        <p><span class="h-logo">&copy; A Hugo website</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_robust">Robust</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

