<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="theme-color" content="#263238">

<meta name="generator" content="Hugo 0.21" />

<link rel="apple-touch-icon" href="../../../../images/logo.png">


<link rel="canonical" href="../../../../2017/04/01/multas-em-s%C3%A3o-paulo/">


    
    <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>Multas em São Paulo - A Hugo website</title>
    

<meta name="description" content="Há bastante tempo tenho vontade de fazer análises usando dados de multas de São Paulo. O problema é: estes dados estão disponíveis? Na teoria, sim. Os dados de multas, como quantidade de multas por tipo de infração, dia e horário, e outros são divulgados no portal da Mobilidade Segura da Prefeitura de São Paulo. Na prática, é um pouco diferente. Apesar do site fornecer uma opção de exportação, a tabela exportada não é completa e muitas informações ficam faltando.">

<meta property="og:title" content="Multas em São Paulo - A Hugo website">
<meta property="og:type" content="article">
<meta property="og:url" content="/2017/04/01/multas-em-s%C3%A3o-paulo/">
<meta property="og:image" content="/images/default.png">
<meta property="og:site_name" content="A Hugo website">
<meta property="og:description" content="Há bastante tempo tenho vontade de fazer análises usando dados de multas de São Paulo. O problema é: estes dados estão disponíveis? Na teoria, sim. Os dados de multas, como quantidade de multas por tipo de infração, dia e horário, e outros são divulgados no portal da Mobilidade Segura da Prefeitura de São Paulo. Na prática, é um pouco diferente. Apesar do site fornecer uma opção de exportação, a tabela exportada não é completa e muitas informações ficam faltando.">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="A Hugo website">
<meta name="twitter:url" content="/2017/04/01/multas-em-s%C3%A3o-paulo/">
<meta name="twitter:title" content="Multas em São Paulo - A Hugo website">
<meta name="twitter:description" content="Há bastante tempo tenho vontade de fazer análises usando dados de multas de São Paulo. O problema é: estes dados estão disponíveis? Na teoria, sim. Os dados de multas, como quantidade de multas por tipo de infração, dia e horário, e outros são divulgados no portal da Mobilidade Segura da Prefeitura de São Paulo. Na prática, é um pouco diferente. Apesar do site fornecer uma opção de exportação, a tabela exportada não é completa e muitas informações ficam faltando.">
<meta name="twitter:image" content="/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"/"
    },
    "headline": "Multas em São Paulo - A Hugo website",
    "image": {
      "@type": "ImageObject",
      "url": "/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2017-04-01T11:07:31JST",
    "dateModified": "2017-04-01T11:07:31JST",
    "author": {
      "@type": "Person",
      "name": "A Hugo website"
    },
    "publisher": {
      "@type": "Organization",
      "name": "A Hugo website",
      "logo": {
        "@type": "ImageObject",
        "url": "/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "Há bastante tempo tenho vontade de fazer análises usando dados de multas de São Paulo. O problema é: estes dados estão disponíveis? Na teoria, sim. Os dados de multas, como quantidade de multas por tipo de infração, dia e horário, e outros são divulgados no portal da Mobilidade Segura da Prefeitura de São Paulo. Na prática, é um pouco diferente. Apesar do site fornecer uma opção de exportação, a tabela exportada não é completa e muitas informações ficam faltando."
  }
</script>


    <style>
      html { font-size: 18px; background-color: rgba(236,239,241,.5);}@media (max-width: 768px) { html { font-size: 15px; }}body { color: #333; font-family: 'Roboto Slab','ヒラギノ角ゴ Pro W3','Hiragino Kaku Gothic Pro',メイリオ,Meiryo,sans-serif; font-feature-settings : "palt"; font-size: inherit; line-height: 1rem; margin: 0; padding: 0;}h1, h2, h3, h4, h5 ,h6 { font-size: 1rem; font-weight: 700; line-height: 1rem; margin: 0;}hr { border: 0; border-top: 1px dashed #cfd8dc; margin: 1rem 0;}p { margin: 0; line-height: 1rem;}a { color: #2196f3; text-decoration: none; transition-duration: .3s;}ul, ol { margin: 0; padding: 0;}table { border-collapse: collapse;}th, td { font-size: .8rem; padding: .5rem;}tr { border-bottom: 1px dashed #ddd;}/* Layouts */main,aside { display: block;}main { padding: 1rem 0 3rem 0; }aside.h { padding: 3rem 0; }main.f,aside.f { background-color: #333; border-top: 2px dashed #fff; border-bottom: 2px dashed #fff;}.l-container { position: relative; max-width: 68rem; margin: 0 auto; padding: 0 1rem;}.l-container.thin { max-width: 44rem;}.l-header { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); padding: 1rem 0; text-align: center;}.l-footer { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); font-size: .6rem; font-weight: 700; padding: 1rem 0;}@media (max-width: 768px) { .l-sidebar { margin-top: 4rem; }}.mrow { margin: 0 -1rem; overflow: hidden;}.mcol { box-sizing: border-box; float: left; padding: 0 1rem;}.c6 { width: 50%; }.c4 { width: 33.26323833%; }.c8 { width: 66.66666%; }@media (max-width: 768px) { .mcol { width: 100%; float: none; }}.logo a { font-size: 1.4rem; line-height: 1.5rem; font-weight: 700; color: #333;}.articles { margin: -1rem 0; margin-bottom: 1rem;}.articles.sm { margin: -.5rem 0; margin-bottom: 0;}article { border-radius: 4px; overflow: hidden;}article.li { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); height: 20rem; overflow: hidden; margin: 1rem 0;}article.li > a { display: block; color: #333;}article.li .inner { padding: 1rem;}article.li .thumb { height: 8rem;}article.li .title { color: #333; font-size: 1.2rem; line-height: 1.5rem; margin-bottom: .5rem;}article.li .summary { font-size: .8rem; height: 6rem; overflow: hidden; margin-top: 1rem;}article.lism { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin: .5rem 0;}article.lism::after { content: ''; display: block; clear: both;}article.lism > a { display: block; color: #333;}article.lism .inner { display: table-cell; vertical-align: middle; height: 5rem; padding-left: .5rem;}article.lism .thumb { width: 5rem; height: 5rem; float: left;}article.lism .title { font-weight: 700; line-height: 1.25rem; margin-bottom: .25rem;}article.sn { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin-bottom: 1rem;}article.sn .thumb { height: 20rem;}@media (max-width: 768px) { article.sn .thumb { height: 10rem; }}article.sn > .article-header,article.sn > .article-body,article.sn .article-footer { padding: 2rem;}article.sn > .article-body { padding: 0 2rem;}@media (max-width: 768px) { article.sn > .article-header, article.sn > .article-body, article.sn .article-footer { padding: 1rem; } article.sn > .article-body { padding: 0 1rem; }}article.sn > .article-header .title { font-size: 1.8rem; line-height: 2rem; margin-bottom: .5rem;}@media (max-width: 768px) { article.sn > .article-header .title { font-size: 1.4rem; line-height: 1.5rem; }}article.sn > .article-header .facts { margin-bottom: 1rem;}article.sn > .article-body { margin-bottom: 1.5rem;}article.sn > .article-body h2 { border-bottom: .25rem solid #333; font-size: 1.2rem; line-height: 1.5rem; margin: 1.5rem 0; padding: .5rem 0;}article.sn > .article-body h3 { border-left: .5rem solid #333; line-height: 1.5rem; margin: 1.5rem 0; padding: .125rem .5rem;}article.sn > .article-body ul,article.sn > .article-body ol { margin: 1.5rem 0; padding-left: 1.5rem;}article.sn > .article-body li { padding-bottom: .5rem; line-height: 1.5rem;}article.sn > .article-body li:last-child { padding-bottom: 0;}article.sn > .article-body p { margin: 1rem 0; line-height: 1.5rem;}article.sn > .article-body strong,article.sn > .article-body em { font-style: normal; font-weight: 700;}article.sn > .article-body strong { box-shadow: 0 -.5rem 0 0 #ffc107 inset;}article.sn > .article-body em { color: #8bc34a;}article.sn > .article-body code,article.sn > .article-body pre { font-family: Menlo, Consolas, monospace; font-size: .7rem;}article.sn > .article-body pre { background-color: #333; color: #fff; line-height: 1rem; margin: 1.5rem -2rem; overflow: auto;}@media (max-width: 768px) { article.sn > .article-body pre { margin: 1.5rem -1rem; }}article.sn > .article-body pre > code { display: block; padding: 1rem 2rem;}@media (max-width: 768px) { article.sn > .article-body pre > code { padding: 1rem; }}article.sn > .article-body p code { background-color: #eceff1; color: #333; border-radius: 4px; margin: 0 .25rem; padding: .375rem; white-space: nowrap;}article.sn > .article-body blockquote { position: relative; border-left: .25rem solid #333; font-size: .8rem; padding: .125rem 1rem; margin: 1.5rem 0;}@media (max-width: 768px) { article.sn > .article-body blockquote { font-size: 1rem; }}article.sn > .article-body blockquote p { margin: .5rem 0; line-height: 1rem;}article.sn > .article-body figure { margin: 1.5rem 0;}article.sn > .article-body figure img,article.sn > .article-body figure amp-img { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); max-width: 100%;}article.sn > .article-body figcaption { color: #cfd8dc; font-size: .8rem; font-weight: 700; margin-top: .5rem;}.facts li { display: inline; font-size: .8rem; margin-right: 1rem;}.facts i { color: #cfd8dc; margin-right: .5em;}.facts.sm li { font-size: .7rem;}.sections.sidebar { margin: -1rem 0;}.sections.footer { margin: -1rem 0;}section.sidebar { margin: 2rem 0;}section.sidebar > header { font-size: .8rem; font-weight: 700; letter-spacing: 4px; text-align: center; margin: 1.5rem 0;}section.footer { margin: 1rem 0;}section.footer > header { font-size: .8rem; margin: .5rem 0;}section.footer > header::before { content: "- ";}section.footer > header a { font-weight: 700; color: #333; text-decoration: underline;}.terms { margin: -.25rem;}.terms li { display: inline-block;}.terms a { display: block; float: left; background-color: #333; border-radius: 4px; color: #fff; font-size: .7rem; margin: .25rem; padding: 0 .75rem; line-height: 1.75rem;}.paging { text-align: center; padding: 1rem 0;}.paging a { display: inline-block; background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); border-radius: 4px; color: #333; padding: 0 1rem; line-height: 3rem;}.page-title { text-align: center; margin: 1rem 0;}.page-title::after { content: ''; display: block; border-bottom: .25rem solid #333; width: 3rem; margin: 1.5rem auto;}.page-title > .title { font-size: 1.2rem; line-height: 1.5rem;}/* Parts:breadcrumb */.crumb ol { text-overflow: ellipsis; color: #cfd8dc; white-space: nowrap; overflow: hidden;}.crumb li { display: inline; font-size: .8rem;}.crumb li::after { content: '›'; margin: 0 .25rem 0 .5rem;}.crumb li:last-child::after { content: '';}.crumb a { color: #cfd8dc;}.crumb i { margin-right: .5em;}.share { padding: 0;}.share a { display: inline-block; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); min-width: 1rem; height: 2rem; border-radius: 4px; color: #333; font-size: .8rem; font-weight: 700; line-height: 2rem; text-align: center; padding: 0 .5rem;}.adj article.lism { margin-bottom: 1rem;}.adj header { font-weight: 700; font-size: .8rem;}.toc { padding: 0 2rem;}@media (max-width: 768px) { .toc { padding: 0 1rem; }}.toc { margin: 1rem 0;}.toc nav>ul { background-color: #eceff1; border-radius: 4px; display: inline-block; font-size: .8rem; padding: .5rem 1rem; word-break: break-all; list-style: none;}.toc ul { padding: 0;}.toc ul ul { padding-left: 1rem;}.toc ul ul ul { padding-left: 1rem;}.toc li { color: #90a4ae;}.toc ul ul>li { font-weight: 700; margin: .5rem 0; list-style-type: decimal;}.toc ul ul ul>li { list-style-type: disc; font-weight: 500;}.thumb { background-image: url(/images/default.jpg); background-size: cover;}
      
      
    </style>
  </head>

  <body>
    
    
    

    <header class="l-header">
      <div class="l-container">
        <div class="logo">
          <a href="../../../../">A Hugo website</a>
        </div>
      </div>
    </header>

    <main>
      <div class="l-container">
        
<div class="mrow">
  <div class="mcol c8">

    <article class="sn">

  <div class="thumb thumb-e490f1f6779dfb992c4c2e1301984493"></div>

  <header class="article-header">
    <h1 class="title">Multas em São Paulo</h1>

    <ul class="facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-01T11:07:31JST">Apr 1, 2017</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="../../../../post/">POST</a></li>
      
    </ul>

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&title=Multas%20em%20S%c3%a3o%20Paulo" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&text=Multas%20em%20S%c3%a3o%20Paulo&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&t=Multas%20em%20S%c3%a3o%20Paulo" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&title=Multas%20em%20S%c3%a3o%20Paulo" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Multas%20em%20S%c3%a3o%20Paulo %2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>

  </header>

  

  <div class="article-body"><p>
Há bastante tempo tenho vontade de fazer análises usando dados de multas
de São Paulo. O problema é: estes dados estão disponíveis? Na teoria,
sim. Os dados de multas, como quantidade de multas por tipo de infração,
dia e horário, e outros são divulgados no
<a href="http://mobilidadesegura.prefeitura.sp.gov.br/QvAJAXZfc/opendoc.htm?document=Painel_Mobilidade_Segura.qvw&amp;host=QVS%40c65v27i&amp;anonymous=true">portal
da Mobilidade Segura</a> da Prefeitura de São Paulo. Na prática, é um
pouco diferente. Apesar do site fornecer uma opção de exportação, a
tabela exportada não é completa e muitas informações ficam faltando. Dá
bastante trabalho para exportar todas as informações.
</p>
<p>
Para não ter o trabalho de exportar tabela por tabela, fiz uma
requisição para a prefeitura, por meio da Lei de Acesso à Informação,
pedindo acesso direto ao banco de dados que fornece as informações para
o Portal. A resposta foi a seguinte:
</p>
<blockquote>
<p>
Prezado Senhor Daniel, Agradecemos o contato e informamos que o seu
pedido foi indeferido com fundamento no art. 16, inciso III, do Decreto
nº 53.623/2012, pois a base de dados contém informações pessoais que não
podem ser disponibilizadas a terceiros. Os demais dados encontram-se
inseridos no Painel Mobilidade Segura para consulta pelos interessados
com a possibilidade de exportar arquivos. Informamos ainda que na época
da sua solicitação, os painéis se encontravam atualizados, visto que a
atualização mensal ocorre após os 70 dias da data da infração
</p>
</blockquote>
<p>
A resposta ao meu ver é totalmente contraditória: ao mesmo tempo que eu
não posso receber os dados porque eles são confidenciais, eu posso
obtê-los pelo site, que “oferece possibilidade de exportação de
arquivos”. (???)
</p>
<p>
Antes mesmo de pedir acesso ao banco de dados tinha pensado em
desenvolver um webscrapper para fazer o download automático das
planilhas, mas a tecnologia com a qual o portal foi desenvolvido
(QlikView) dificulta muito o desenvolviento.
</p>
<p>
Sobrou fazer o download manual mesmo. Até agora fiz o download de todos
as planilhas de 2014 a 2016 contendo infrações capturadas tanto
eletrônica quanto manualmente de carros (ainda faltam ônibus,
utilitários, etc.) por hora do dia. Isso quer dizer que já temos
planilhas suficientes para criar uma tabela:
</p>
<ul>
<li>
tipo de veículo (sempre seria carro)
</li>
<li>
data (2014 a 2016)
</li>
<li>
hora do dia
</li>
<li>
eletronica/manual
</li>
<li>
motivo da multa
</li>
<li>
localizacao da multa (quando for um radar)
</li>
<li>
quantidade de multas
</li>
</ul>
<p>
Disponibilizei esses dados
<a href="https://github.com/dfalbel/spmultas">neste repositório</a> do
Github.
</p>
<p>
Agora com as análises a seguir, espero criar curiosidade e interesse
para que mais pessoas possam ajudar no download completo dos dados. Na
página inicial do repositório, adicionei, um mini-tutorial de como você
pode ajudar fazendo os downloads.
</p>
<p>
Vamos às análises.
</p>
<pre class="r"><code>download.file(&quot;https://github.com/dfalbel/spmultas/raw/master/data/carros_eletronicas.rda&quot;, &quot;carros_eletronicas.rda&quot;)
load(&quot;carros_eletronicas.rda&quot;)</code></pre>
<p>
A partir de agora, você possui carregado um <code>data.frame</code>
chamado <code>carros\_eletronicas</code> que possui as informações das
multas para carros de forma eletrônica.
</p>
<p>
Em primeiro lugar, vamos analisar a quantidade de multas por dia em São
Paulo desde 2014.
</p>

<p><pre class="r"><code>carros_eletronicas %&gt;% group_by(data) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(data, qtd)) + geom_line()</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-3-1.png" width="672">
</p>
<p>
Vemos nesse gráfico que o número de multas (por radar) era sempre por
volta de 10.000 durante 2014, em 2015 foi aumentando bastante durante o
ano e em 2016 se estabilizou. Vamos ver agora, por tipo de
enquadramento, isto é, por motivo da multa.
</p>
<p>
Existem 11 tipos de enquadramentos eletrônicos. Para a visualização
ficar mais fácil, vamos primeiro agrupar em grandes temas:
</p>
<ul>
<li>
Avançar o sinal vermelho
</li>
<li>
Executar conversão proibida
</li>
<li>
Parar sobre faixa de pedestres
</li>
<li>
Rodízio
</li>
<li>
Velocidade
</li>
<li>
Transitar em faixa de ônibus ou exclusiva p/ determinado veículo
</li>
</ul>
<p>
O agrupamento final ficou assim:
</p>
<pre class="r"><code>depara &lt;- carros_eletronicas %&gt;% group_by(enquadramento) %&gt;% summarise(qtd = sum(qtd)) %&gt;% arrange(qtd) %&gt;% select(-qtd)
depara$agrup_enquadramento &lt;- c(&quot;Convers&#xE3;o proibida&quot;, &quot;Velocidade&quot;, &quot;Faixa de Pedestres&quot;, &quot;Faixa de &#xF4;nibus&quot;, &quot;Sinal vermelho&quot;, &quot;Faixa de &#xF4;nibus&quot;, &quot;Convers&#xE3;o proibida&quot;, &quot;Faixa de &#xF4;nibus&quot;, &quot;Velocidade&quot;, &quot;Rod&#xED;zio&quot;, &quot;Velocidade&quot; ) depara %&gt;% knitr::kable()</code></pre>
<table>
<thead>
</thead>
<tbody>
<tr class="odd">
<td>
Executar Operacao De Conversao A Esquerda Em Local Proibido Pela
Sinalizacao
</td>
<td>
Conversão proibida
</td>
</tr>
<tr class="even">
<td>
Transitar Em Velocidade Superior A Maxima Permitida Em Mais De 50%
</td>
<td>
Velocidade
</td>
</tr>
<tr class="odd">
<td>
Parar Sobre Faixa De Pedestres Na Mudanca De Sinal Luminoso (Fisc
Eletronica)
</td>
<td>
Faixa de Pedestres
</td>
</tr>
<tr class="even">
<td>
Transitar Na Faixa/Pista Da Esquerda Regul Circulacao Exclusiva Determ
Veiculo
</td>
<td>
Faixa de ônibus
</td>
</tr>
<tr class="odd">
<td>
Avancar O Sinal Vermelho Do Semaforo - Fiscalizacao Eletronica
</td>
<td>
Sinal vermelho
</td>
</tr>
<tr class="even">
<td>
Transitar Na Faixa/Pista Da Direita Regul Circulacao Exclusiva Determ
Veiculo
</td>
<td>
Faixa de ônibus
</td>
</tr>
<tr class="odd">
<td>
Executar Operacao De Conversao A Direita Em Local Proibido Pela
Sinalizacao
</td>
<td>
Conversão proibida
</td>
</tr>
<tr class="even">
<td>
Transitar Na Faixa Ou Via Exclusiva Regulam P/Transp Publ Coletivo
Passag
</td>
<td>
Faixa de ônibus
</td>
</tr>
<tr class="odd">
<td>
Transitar Em Velocidade Superior A Maxima Permitida Em Mais De 20% Ate
50%
</td>
<td>
Velocidade
</td>
</tr>
<tr class="even">
<td>
Transitar Em Local/Horario Nao Permitido Pela Regulamentacao - Rodizio
</td>
<td>
Rodízio
</td>
</tr>
<tr class="odd">
<td>
Transitar Em Velocidade Superior A Maxima Permitida Em Ate 20%
</td>
<td>
Velocidade
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>carros_eletronicas %&gt;% left_join(depara, by = &quot;enquadramento&quot;) %&gt;% group_by(data, agrup_enquadramento) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(data, qtd, color = agrup_enquadramento)) + geom_line()</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-5-1.png" width="672">
</p>
<p>
No gráfico, vemos que em 2015, o tipo de multa que mais aumentou em
quantidade foi velocidade e rodízio.
</p></p>

<p>
Anteriormente vimos como se comportou o número de multas de maneira
geral na cidade. Vamos agora matar algumas curiosidades.
</p>
<ol>
<li>
Quais são os horários com mais multas em SP?
</li>
</ol>
<pre class="r"><code>carros_eletronicas %&gt;% group_by(hora) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(x = hora, y = qtd)) + geom_bar(stat = &quot;identity&quot;)</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-6-1.png" width="672">
</p>
<p>
Notamos que o maior número de multas ocorre justamente na hora do rush.
Isto é, entre 7 e 10 da manhã e 17h e 19h. Isso até faz sentido, mas
nessas horas o trânsito da cidade está todo parado. Será que a
distribuição fica diferente por tipo de multa? Principalmente as de
velocidade.
</p>
<pre class="r"><code>carros_eletronicas %&gt;% left_join(depara, by = &quot;enquadramento&quot;) %&gt;% group_by(hora, agrup_enquadramento) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(x = hora, y = qtd, fill = agrup_enquadramento)) + geom_bar(stat = &quot;identity&quot;)</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-7-1.png" width="672">
</p>
<p>
Veja que interessante! O grande responsável pelo pico da hora do rush é
o rodízio. (Essa é justamente a hora em que ele está valendo.) As multas
de velocidade diminuem um pouco durante o trânsito e acontecem mais
durante o dia e não durante a noite como poderíamos imaginar. Vemos
também que as multas de farol vermelho acontecem mais durante a
madrugada.
</p>
<ol>
<li>
Qual é o dia da semana com mais multas?
</li>
</ol>
<pre class="r"><code>carros_eletronicas %&gt;% left_join(depara, by = &quot;enquadramento&quot;) %&gt;% group_by(dia_da_semana = wday(data), agrup_enquadramento) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(x = dia_da_semana, y = qtd, fill = agrup_enquadramento)) + geom_bar(stat = &quot;identity&quot;)</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-8-1.png" width="672">
</p>
<p>
O dia da semana com mais multas é quinta feira. Nos finais de semana,
aumenta muito o número de multas por excesso de velocidade (claro, as
ruas estão mais vazias).
</p>
<ol>
<li>
Quais são os radares que mais multam em SP? E porque?
</li>
</ol>
<pre class="r"><code>top10_locais &lt;- carros_eletronicas %&gt;% group_by(local) %&gt;% summarise(n = sum(qtd)) %&gt;% arrange(desc(n)) %&gt;% slice(1:10)
knitr::kable(top10_locais)</code></pre>
<table>
<thead>
</thead>
<tbody>
<tr class="odd">
<td>
Avenida Assis Chateaubriand X Acesso Pte Das Bandeiras, A.Sen/C. Bran
</td>
<td>
321629
</td>
</tr>
<tr class="even">
<td>
Avenida Assis Chateaubriand (A. Senna/C. Branco), Alca Da Ponte Das
Bandeiras
</td>
<td>
318745
</td>
</tr>
<tr class="odd">
<td>
Av Dos Bandeirantes(Marginal/Imigrantes) A Mais 34 Metros Da Av
Washington Luis
</td>
<td>
291277
</td>
</tr>
<tr class="even">
<td>
Av Das Nacoes Unidas-Pista Central-(Interlagos/C.Branco) A Menos 7,3m Do
Km 5,5
</td>
<td>
162318
</td>
</tr>
<tr class="odd">
<td>
Av Morvan D De Figueiredo (As/Cb), A Mais 3m R Amazonas Da Silva-Fx Excl
Onibus
</td>
<td>
153131
</td>
</tr>
<tr class="even">
<td>
Rua Hungria (Interlagos/Castelo Branco) A Menos 20 Metros Da Avenida
Reboucas
</td>
<td>
139048
</td>
</tr>
<tr class="odd">
<td>
Av Morvan Dias De Figueiredo (As/Cb),A Mais 3m R Amazonas Da Silva
</td>
<td>
137064
</td>
</tr>
<tr class="even">
<td>
Rodovia Presidente Dutra (As/Cb), A Menos 75m Da Pte Pr J Quadros
</td>
<td>
134454
</td>
</tr>
<tr class="odd">
<td>
Av Aricanduva (Bairro/Centro), A Mais15m Da Av Matapi - Fx Exclusiva De
Onibus
</td>
<td>
127690
</td>
</tr>
<tr class="even">
<td>
Av Embaixador Macedo Soares, Sob Ponte Nova Fepasa, Sentido C. Branco/A.
Senna
</td>
<td>
124927
</td>
</tr>
</tbody>
</table>
<p>
Agora vamos ver os motivos, em cada um desses lugares.
</p>
<pre class="r"><code>top10_locais %&gt;% left_join(carros_eletronicas, by = &quot;local&quot;) %&gt;% left_join(depara, by = &quot;enquadramento&quot;) %&gt;% mutate(local = stringr::str_wrap(local, width = 20) %&gt;% forcats::fct_reorder(-n)) %&gt;% group_by(local, agrup_enquadramento) %&gt;% summarise(qtd = sum(qtd)) %&gt;% ggplot(aes(x = local, y = qtd, fill = agrup_enquadramento)) + geom_bar(stat = &quot;identity&quot;)</code></pre>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-10-1.png" width="1000px">
</p>
<p>
Por incrível que pareça, nos dois radares com mais multas, o motivo da
multa é conversão proibida. A foto de onde fica esse radar saiu em uma
<a href="http://www1.folha.uol.com.br/cotidiano/2015/07/1660793-radar-campeao-aplica-375-mil-multas-em-um-ano-na-ponte-das-bandeiras.shtml">notícia
sobre o mesmo tema</a> na Folha de São Paulo.
</p>
<p>
<img src="http://curso-r.com/blog/2017-04-01-multas-em-sp_files/figure-html/unnamed-chunk-11-1.png" width="672">
</p>
</div>

  <footer class="article-footer">

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&title=Multas%20em%20S%c3%a3o%20Paulo" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&text=Multas%20em%20S%c3%a3o%20Paulo&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&t=Multas%20em%20S%c3%a3o%20Paulo" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f&title=Multas%20em%20S%c3%a3o%20Paulo" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Multas%20em%20S%c3%a3o%20Paulo %2f2017%2f04%2f01%2fmultas-em-s%25C3%25A3o-paulo%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>


    <section class="footer">
      <div>
        <nav class="crumb">
          <ol>
            <li><a href="../../../../"><i class="fa fa-home" aria-hidden="true"></i>TOP</a></li>
            
            <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="../../../../post/" itemprop="url"><span itemprop="title">POST</span></a></li>
            
            <li class="active">Multas em São Paulo</li>
          </ol>
        </nav>
      </div>
    </section>

    
    
    
    <section class="footer">
      <header>
        <a href="../../../../categories/">CATEGORIES</a>
      </header>
      <div>
        <ul class="terms">
          
          <li><a href="../../../../categories/curso-r/">curso-r</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    
  </footer>

</article>


    <div class="adj">
      <div class="mrow">
        
        <div class="mcol c6">
          <header>Previous Article</header>
          <article class="lism">
  <a href="../../../../2017/03/31/requisi%C3%A7%C3%B5es-seguras/">
    <div class="thumb thumb-2ad2023a67b889ccc090cf23bf9d984c"></div>

    <div class="inner">
      <div class="title">Requisições seguras</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-03-31T00:00:00JST">Mar 31, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
        
        <div class="mcol c6">
          <header>Next Article</header>
          <article class="lism">
  <a href="../../../../2017/04/08/top-10-dicas-do-curso-r-de-ver%C3%A3o-2017/">
    <div class="thumb thumb-346a8f16c516fccb3a0f836d979765a4"></div>

    <div class="inner">
      <div class="title">Top 10 dicas do Curso R de verão 2017</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-08T00:00:00JST">Apr 8, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
      </div>
    </div>

    
  </div>
  <div class="mcol c4">
    <aside class="l-sidebar">

  <div class="sections sidebar">
    <section class="sidebar">
      <header>LATESTS</header>
      <div>
        <div class="articles sm">
          
          <article class="lism">
  <a href="../../../../2017/06/08/instalando-anaconda---tensorflow---keras-para-r-no-ubuntu-16.04-server/">
    <div class="thumb thumb-4ca7aebf68b206ff8ebd3d339880cdbe"></div>

    <div class="inner">
      <div class="title">Instalando Anaconda &#43; TensorFlow &#43; Keras para R no Ubuntu 16.04 Server</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-08T18:12:00JST">Jun 8, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/05/keras-colocando-deep-learning-no-pipeline/">
    <div class="thumb thumb-ea657ec9d261bce8d42f524cfa192f24"></div>

    <div class="inner">
      <div class="title">Keras: colocando deep learning no pipeline</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-05T11:07:31JST">Jun 5, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/01/a-kind-of-magick/">
    <div class="thumb thumb-7a7e4e54f6ba40cf59b708a1b1438641"></div>

    <div class="inner">
      <div class="title">A kind of magick</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-01T20:26:00JST">Jun 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/28/pdf-e-ocr/">
    <div class="thumb thumb-d477bfffbde22e4c5cc9e81c9ff3b556"></div>

    <div class="inner">
      <div class="title">PDF e OCR</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-28T11:07:31JST">May 28, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/23/slides-da-minha-apresenta%C3%A7%C3%A3o-no-ser-2017/">
    <div class="thumb thumb-ee8e80ec72747e392813c983fcdbc25b"></div>

    <div class="inner">
      <div class="title">Slides da minha apresentação no SER 2017</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-23T03:00:00JST">May 23, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/19/web-scraping-do-site-da-secretaria-de-seguran%C3%A7a-p%C3%BAblica-de-s%C3%A3o-paulo/">
    <div class="thumb thumb-3da60970259d2fd391b3fb0a4ff77692"></div>

    <div class="inner">
      <div class="title">Web scraping do site da Secretaria de Segurança Pública de São Paulo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-19T20:26:00JST">May 19, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/16/blog-paix%C3%A3o-por-dados-estar%C3%A1-no-meetup-1%C2%BA-#analyticsemtudo---dados-abertos/">
    <div class="thumb thumb-5b8f5e73458a26798a261512427240c8"></div>

    <div class="inner">
      <div class="title">Blog Paixão por Dados estará no meetup 1º #AnalyticsEmTudo - Dados Abertos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-16T03:00:00JST">May 16, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/04/gr%C3%A1ficos-miojo-mapas-tem%C3%A1ticos-do-brasil-em-3-minutos-ou-menos/">
    <div class="thumb thumb-d0bebe978f4bf6a447682918aea12509"></div>

    <div class="inner">
      <div class="title">Gráficos miojo: Mapas temáticos do Brasil em 3 minutos ou menos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-04T20:26:00JST">May 4, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/01/as-cores-da-marvel-vs-dc/">
    <div class="thumb thumb-adbafb32d64272a6d88e49a78a8c536a"></div>

    <div class="inner">
      <div class="title">As cores da Marvel vs DC</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-01T20:26:00JST">May 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/04/29/diagramas-de-venn-em-r/">
    <div class="thumb thumb-88b3c0abd2dfcce2dd7b25a3500eae82"></div>

    <div class="inner">
      <div class="title">Diagramas de Venn em R</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-29T20:26:00JST">Apr 29, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
        </div>
      </div>
    </section>

    
    <section class="sidebar">
      <header>CATEGORIES</header>
      <div>
        <ul class="terms">
          <li><a href="../../../../categories/curso-r">curso-r</a></li><li><a href="../../../../categories/paixao-por-dados">paixao-por-dados</a></li>
        </ul>
      </div>
    </section>
    
    <section class="sidebar">
      <header>TAGS</header>
      <div>
        <ul class="terms">
          
        </ul>
      </div>
    </section>
    
  </div>

</aside>

  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="l-container">
        <p><span class="h-logo">&copy; A Hugo website</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_robust">Robust</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

