<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="theme-color" content="#263238">

<meta name="generator" content="Hugo 0.21" />

<link rel="apple-touch-icon" href="../../../../images/logo.png">


<link rel="canonical" href="../../../../2016/11/18/como-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning/">


    
    <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
    
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning - A Hugo website</title>
    

<meta name="description" content="Imagine-se na seguinte situação: você foi convidado a se mudar para a cidade do Rio de Janeiro a trabalho e precisa procurar um lugar para morar. Pessoas normais resolveriam esse problema pesquisando preços de apartamentos ou quartos para alugar em sites como OLX ou AirBNB. Mas como alguém fascinado em programação e análise resolveria?  Nesta série de posts, mostro como o R pode ser usado tomar a decisão sobre escolher um apartamento ou quarto para alugar.">

<meta property="og:title" content="Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning - A Hugo website">
<meta property="og:type" content="article">
<meta property="og:url" content="/2016/11/18/como-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning/">
<meta property="og:image" content="/images/default.png">
<meta property="og:site_name" content="A Hugo website">
<meta property="og:description" content="Imagine-se na seguinte situação: você foi convidado a se mudar para a cidade do Rio de Janeiro a trabalho e precisa procurar um lugar para morar. Pessoas normais resolveriam esse problema pesquisando preços de apartamentos ou quartos para alugar em sites como OLX ou AirBNB. Mas como alguém fascinado em programação e análise resolveria?  Nesta série de posts, mostro como o R pode ser usado tomar a decisão sobre escolher um apartamento ou quarto para alugar.">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="A Hugo website">
<meta name="twitter:url" content="/2016/11/18/como-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning/">
<meta name="twitter:title" content="Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning - A Hugo website">
<meta name="twitter:description" content="Imagine-se na seguinte situação: você foi convidado a se mudar para a cidade do Rio de Janeiro a trabalho e precisa procurar um lugar para morar. Pessoas normais resolveriam esse problema pesquisando preços de apartamentos ou quartos para alugar em sites como OLX ou AirBNB. Mas como alguém fascinado em programação e análise resolveria?  Nesta série de posts, mostro como o R pode ser usado tomar a decisão sobre escolher um apartamento ou quarto para alugar.">
<meta name="twitter:image" content="/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"/"
    },
    "headline": "Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning - A Hugo website",
    "image": {
      "@type": "ImageObject",
      "url": "/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2016-11-18T03:00:00JST",
    "dateModified": "2016-11-18T03:00:00JST",
    "author": {
      "@type": "Person",
      "name": "A Hugo website"
    },
    "publisher": {
      "@type": "Organization",
      "name": "A Hugo website",
      "logo": {
        "@type": "ImageObject",
        "url": "/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "Imagine-se na seguinte situação: você foi convidado a se mudar para a cidade do Rio de Janeiro a trabalho e precisa procurar um lugar para morar. Pessoas normais resolveriam esse problema pesquisando preços de apartamentos ou quartos para alugar em sites como OLX ou AirBNB. Mas como alguém fascinado em programação e análise resolveria?  Nesta série de posts, mostro como o R pode ser usado tomar a decisão sobre escolher um apartamento ou quarto para alugar."
  }
</script>


    <style>
      html { font-size: 18px; background-color: rgba(236,239,241,.5);}@media (max-width: 768px) { html { font-size: 15px; }}body { color: #333; font-family: 'Roboto Slab','ヒラギノ角ゴ Pro W3','Hiragino Kaku Gothic Pro',メイリオ,Meiryo,sans-serif; font-feature-settings : "palt"; font-size: inherit; line-height: 1rem; margin: 0; padding: 0;}h1, h2, h3, h4, h5 ,h6 { font-size: 1rem; font-weight: 700; line-height: 1rem; margin: 0;}hr { border: 0; border-top: 1px dashed #cfd8dc; margin: 1rem 0;}p { margin: 0; line-height: 1rem;}a { color: #2196f3; text-decoration: none; transition-duration: .3s;}ul, ol { margin: 0; padding: 0;}table { border-collapse: collapse;}th, td { font-size: .8rem; padding: .5rem;}tr { border-bottom: 1px dashed #ddd;}/* Layouts */main,aside { display: block;}main { padding: 1rem 0 3rem 0; }aside.h { padding: 3rem 0; }main.f,aside.f { background-color: #333; border-top: 2px dashed #fff; border-bottom: 2px dashed #fff;}.l-container { position: relative; max-width: 68rem; margin: 0 auto; padding: 0 1rem;}.l-container.thin { max-width: 44rem;}.l-header { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); padding: 1rem 0; text-align: center;}.l-footer { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); font-size: .6rem; font-weight: 700; padding: 1rem 0;}@media (max-width: 768px) { .l-sidebar { margin-top: 4rem; }}.mrow { margin: 0 -1rem; overflow: hidden;}.mcol { box-sizing: border-box; float: left; padding: 0 1rem;}.c6 { width: 50%; }.c4 { width: 33.26323833%; }.c8 { width: 66.66666%; }@media (max-width: 768px) { .mcol { width: 100%; float: none; }}.logo a { font-size: 1.4rem; line-height: 1.5rem; font-weight: 700; color: #333;}.articles { margin: -1rem 0; margin-bottom: 1rem;}.articles.sm { margin: -.5rem 0; margin-bottom: 0;}article { border-radius: 4px; overflow: hidden;}article.li { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); height: 20rem; overflow: hidden; margin: 1rem 0;}article.li > a { display: block; color: #333;}article.li .inner { padding: 1rem;}article.li .thumb { height: 8rem;}article.li .title { color: #333; font-size: 1.2rem; line-height: 1.5rem; margin-bottom: .5rem;}article.li .summary { font-size: .8rem; height: 6rem; overflow: hidden; margin-top: 1rem;}article.lism { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin: .5rem 0;}article.lism::after { content: ''; display: block; clear: both;}article.lism > a { display: block; color: #333;}article.lism .inner { display: table-cell; vertical-align: middle; height: 5rem; padding-left: .5rem;}article.lism .thumb { width: 5rem; height: 5rem; float: left;}article.lism .title { font-weight: 700; line-height: 1.25rem; margin-bottom: .25rem;}article.sn { background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); margin-bottom: 1rem;}article.sn .thumb { height: 20rem;}@media (max-width: 768px) { article.sn .thumb { height: 10rem; }}article.sn > .article-header,article.sn > .article-body,article.sn .article-footer { padding: 2rem;}article.sn > .article-body { padding: 0 2rem;}@media (max-width: 768px) { article.sn > .article-header, article.sn > .article-body, article.sn .article-footer { padding: 1rem; } article.sn > .article-body { padding: 0 1rem; }}article.sn > .article-header .title { font-size: 1.8rem; line-height: 2rem; margin-bottom: .5rem;}@media (max-width: 768px) { article.sn > .article-header .title { font-size: 1.4rem; line-height: 1.5rem; }}article.sn > .article-header .facts { margin-bottom: 1rem;}article.sn > .article-body { margin-bottom: 1.5rem;}article.sn > .article-body h2 { border-bottom: .25rem solid #333; font-size: 1.2rem; line-height: 1.5rem; margin: 1.5rem 0; padding: .5rem 0;}article.sn > .article-body h3 { border-left: .5rem solid #333; line-height: 1.5rem; margin: 1.5rem 0; padding: .125rem .5rem;}article.sn > .article-body ul,article.sn > .article-body ol { margin: 1.5rem 0; padding-left: 1.5rem;}article.sn > .article-body li { padding-bottom: .5rem; line-height: 1.5rem;}article.sn > .article-body li:last-child { padding-bottom: 0;}article.sn > .article-body p { margin: 1rem 0; line-height: 1.5rem;}article.sn > .article-body strong,article.sn > .article-body em { font-style: normal; font-weight: 700;}article.sn > .article-body strong { box-shadow: 0 -.5rem 0 0 #ffc107 inset;}article.sn > .article-body em { color: #8bc34a;}article.sn > .article-body code,article.sn > .article-body pre { font-family: Menlo, Consolas, monospace; font-size: .7rem;}article.sn > .article-body pre { background-color: #333; color: #fff; line-height: 1rem; margin: 1.5rem -2rem; overflow: auto;}@media (max-width: 768px) { article.sn > .article-body pre { margin: 1.5rem -1rem; }}article.sn > .article-body pre > code { display: block; padding: 1rem 2rem;}@media (max-width: 768px) { article.sn > .article-body pre > code { padding: 1rem; }}article.sn > .article-body p code { background-color: #eceff1; color: #333; border-radius: 4px; margin: 0 .25rem; padding: .375rem; white-space: nowrap;}article.sn > .article-body blockquote { position: relative; border-left: .25rem solid #333; font-size: .8rem; padding: .125rem 1rem; margin: 1.5rem 0;}@media (max-width: 768px) { article.sn > .article-body blockquote { font-size: 1rem; }}article.sn > .article-body blockquote p { margin: .5rem 0; line-height: 1rem;}article.sn > .article-body figure { margin: 1.5rem 0;}article.sn > .article-body figure img,article.sn > .article-body figure amp-img { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); max-width: 100%;}article.sn > .article-body figcaption { color: #cfd8dc; font-size: .8rem; font-weight: 700; margin-top: .5rem;}.facts li { display: inline; font-size: .8rem; margin-right: 1rem;}.facts i { color: #cfd8dc; margin-right: .5em;}.facts.sm li { font-size: .7rem;}.sections.sidebar { margin: -1rem 0;}.sections.footer { margin: -1rem 0;}section.sidebar { margin: 2rem 0;}section.sidebar > header { font-size: .8rem; font-weight: 700; letter-spacing: 4px; text-align: center; margin: 1.5rem 0;}section.footer { margin: 1rem 0;}section.footer > header { font-size: .8rem; margin: .5rem 0;}section.footer > header::before { content: "- ";}section.footer > header a { font-weight: 700; color: #333; text-decoration: underline;}.terms { margin: -.25rem;}.terms li { display: inline-block;}.terms a { display: block; float: left; background-color: #333; border-radius: 4px; color: #fff; font-size: .7rem; margin: .25rem; padding: 0 .75rem; line-height: 1.75rem;}.paging { text-align: center; padding: 1rem 0;}.paging a { display: inline-block; background-color: #fff; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); border-radius: 4px; color: #333; padding: 0 1rem; line-height: 3rem;}.page-title { text-align: center; margin: 1rem 0;}.page-title::after { content: ''; display: block; border-bottom: .25rem solid #333; width: 3rem; margin: 1.5rem auto;}.page-title > .title { font-size: 1.2rem; line-height: 1.5rem;}/* Parts:breadcrumb */.crumb ol { text-overflow: ellipsis; color: #cfd8dc; white-space: nowrap; overflow: hidden;}.crumb li { display: inline; font-size: .8rem;}.crumb li::after { content: '›'; margin: 0 .25rem 0 .5rem;}.crumb li:last-child::after { content: '';}.crumb a { color: #cfd8dc;}.crumb i { margin-right: .5em;}.share { padding: 0;}.share a { display: inline-block; box-shadow: 0 0 0 1px rgba(63,63,68,.05), 0 1px 3px rgba(63,63,68,.1), 0 1px 2px rgba(0,0,0,.05); min-width: 1rem; height: 2rem; border-radius: 4px; color: #333; font-size: .8rem; font-weight: 700; line-height: 2rem; text-align: center; padding: 0 .5rem;}.adj article.lism { margin-bottom: 1rem;}.adj header { font-weight: 700; font-size: .8rem;}.toc { padding: 0 2rem;}@media (max-width: 768px) { .toc { padding: 0 1rem; }}.toc { margin: 1rem 0;}.toc nav>ul { background-color: #eceff1; border-radius: 4px; display: inline-block; font-size: .8rem; padding: .5rem 1rem; word-break: break-all; list-style: none;}.toc ul { padding: 0;}.toc ul ul { padding-left: 1rem;}.toc ul ul ul { padding-left: 1rem;}.toc li { color: #90a4ae;}.toc ul ul>li { font-weight: 700; margin: .5rem 0; list-style-type: decimal;}.toc ul ul ul>li { list-style-type: disc; font-weight: 500;}.thumb { background-image: url(/images/default.jpg); background-size: cover;}
      
      
    </style>
  </head>

  <body>
    
    
    

    <header class="l-header">
      <div class="l-container">
        <div class="logo">
          <a href="../../../../">A Hugo website</a>
        </div>
      </div>
    </header>

    <main>
      <div class="l-container">
        
<div class="mrow">
  <div class="mcol c8">

    <article class="sn">

  <div class="thumb thumb-091ccd80134b7600e0e263338c9604c6"></div>

  <header class="article-header">
    <h1 class="title">Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning</h1>

    <ul class="facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2016-11-18T03:00:00JST">Nov 18, 2016</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="../../../../post/">POST</a></li>
      
    </ul>

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&title=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&text=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&t=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&title=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning %2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>

  </header>

  

  <div class="article-body"><article class="blog-post">
<p>
Imagine-se na seguinte situação: você foi convidado a se mudar para a
cidade do Rio de Janeiro a trabalho e precisa procurar um lugar para
morar. Pessoas normais resolveriam esse problema pesquisando preços de
apartamentos ou quartos para alugar em sites como OLX ou AirBNB. Mas
como alguém fascinado em programação e análise resolveria?
</p>
<p>
Nesta série de posts, mostro como o R pode ser usado tomar a decisão
sobre escolher um apartamento ou quarto para alugar. No OLX, a
formatação HTML das páginas de apartamentos são diferentes das de
quartos. Neste post, eu mostro como fazer o web scraping, por meio do
pacote <code class="highlighter-rouge">rvest</code>, apenas de
apartamentos, mas o mesmo procedimento (com pequenas modificações) pode
ser feito também para quartos.
</p>
<p>
As bibliotecas usadas serão:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span><span class="w"> </span><span class="c1"># n&#xE3;o vivo sem esse pacote
</span><span class="n">library</span><span class="p">(</span><span class="n">rvest</span><span class="p">)</span><span class="w"> </span><span class="c1"># principal pacote para web-scraping
</span><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w"> </span><span class="c1"># usado para extrair numeros de texto
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w"> </span><span class="c1"># usado para o data cleaning
</span><span class="n">library</span><span class="p">(</span><span class="n">curl</span><span class="p">)</span><span class="w"> </span><span class="c1"># usado como suporte para o rvest
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w"> </span><span class="c1"># data cleaning
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w"> </span><span class="c1"># data cleaning
</span><span class="n">devtools</span><span class="o">::</span><span class="n">source_gist</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aed28301b7088e47326feac136ceface&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;funcoes olx.R&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">algumas</span><span class="w"> </span><span class="n">funcoes</span><span class="w"> </span><span class="n">que</span><span class="w"> </span><span class="n">criei</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="n">auxiliar</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">cleaning</span></code></pre>
</figure>
<h2 id="web-scraping">
Web scraping
</h2>
<p>
A primeira etapa é obter os dados. Até a data de hoje (12 de Novembro de
2016), o
<a href="http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/aluguel/apartamentos">OLX</a>
listava um pouco mais de 12000 apartamentos para alugar, com 245 páginas
e 50 apartamentos em cada página.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">url_apt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">&quot;http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/aluguel/apartamentos&quot;</span><span class="w">
</span><span class="n">number_pages</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">245</span><span class="w"> </span><span class="c1">#hard coded
# Criar vetor com todos os urls para as p&#xE1;ginas do olx
</span><span class="n">lista_urls</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="n">url_apt</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;?o=&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">number_pages</span><span class="p">)</span></code></pre>
</figure>
<p>
A seguir, eu uso uma função para extrair as informações importantes de
cada anúncio, que são: o link para o anúncio, o título, o preço, o
bairro e mais algumas informações adicionais, como número de vagas de
garagem e o valor da taxa de condomínio. Explicar o passo-a-passo do web
scraping e explicar como o código fonte das páginas do OLX funciona está
fora do escopo deste post, mas acredito que basta ler o código da função
extrairAnuncios() para entender o que o script faz. Caso o leitor deseje
saber mais sobre web scraping, o post 3 da série traz um tutorial de web
scraping bem detalhado.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">extrairAnuncios</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">url_pagina</span><span class="p">,</span><span class="w"> </span><span class="n">info_adicional</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">### INPUTS:
</span><span class="w"> </span><span class="c1"># url_pagina: url de uma pagina do olx com uma lista de links de an&#xFA;ncios.
</span><span class="w"> </span><span class="c1"># info_adicional: variavel booleana. se verdadeiro, faz o scraping de dados adicionais do anuncio
</span><span class="w"> </span><span class="c1"># ... deve ser usado apenas para apartamentos, pois a sintaxe do html para quartos &#xE9; diferente
</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">curl</span><span class="p">(</span><span class="n">url_pagina</span><span class="p">,</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curl</span><span class="o">::</span><span class="n">new_handle</span><span class="p">(</span><span class="s2">&quot;useragent&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Mozilla/5.0&quot;</span><span class="p">))</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_html</span><span class="p">(</span><span class="n">mycurl</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.OLXad-list-link&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1"># extrair link do anuncio
</span><span class="w"> </span><span class="n">col_links</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.OLXad-list-link&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_attr</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1"># extrair titulo do anuncio
</span><span class="w"> </span><span class="n">col_titles</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.OLXad-list-link&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_attr</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1"># extrair pre&#xE7;o
</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.col-3&quot;</span><span class="p">))</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">html_text</span><span class="p">)</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">unlist</span><span class="p">()</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">limparString</span><span class="p">()</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">()</span><span class="w"> </span><span class="n">col_precos</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">precos</span><span class="w"> </span><span class="c1"># extrair bairros
</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.OLXad-list-line-2&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;[\t]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;[\n]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;Apartamentos&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;Aluguel de quartos&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;An&#xFA;ncio Profissional&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_trim</span><span class="p">()</span><span class="w"> </span><span class="n">col_bairros</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">bairros</span><span class="w"> </span><span class="c1"># extrair informa&#xE7;&#xF5;es adicionais de apartamento
</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">info_adicional</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">adicional</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mycurl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">&quot;.mt5px&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">html_text</span><span class="p">()</span><span class="w"> </span><span class="n">adicional</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;[\t]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">adicional</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;[\n]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">col_adicionais</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">adicional</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nf">return</span><span class="p">(</span><span class="n">data.frame</span><span class="p">(</span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_links</span><span class="p">,</span><span class="w"> </span><span class="n">titulo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_titles</span><span class="p">,</span><span class="w"> </span><span class="n">preco</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_precos</span><span class="p">,</span><span class="w"> </span><span class="n">bairro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_bairros</span><span class="p">,</span><span class="w"> </span><span class="n">adicional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_adicionais</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">))</span><span class="w">
</span><span class="p">}</span></code></pre>
</figure>
<p>
Agora já podemos aplicar a função
<code class="highlighter-rouge">extrairAnuncios()</code> no vetor da
lista de urls para baixar os dados. Para fins de demonstração, vou
executar o procedimento apenas para a primeira página.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">url_teste</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lista_urls</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="n">system.time</span><span class="p">(</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">extrairAnuncios</span><span class="p">(</span><span class="n">url_teste</span><span class="p">,</span><span class="w"> </span><span class="n">info_adicional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## user system elapsed ## 0.948 0.064 1.013</code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># Vamos dar uma olhada nos dados
</span><span class="n">head</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">()</span></code></pre>
</figure>
<table>
<thead>
<tr>
<th>
link
</th>
<th>
titulo
</th>
<th>
preco
</th>
<th>
bairro
</th>
<th>
adicional
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/village-pavuna-270991833>
</td>
<td>
Village pavuna
</td>
<td>
400
</td>
<td>
Rio de Janeiro, Pavuna
</td>
<td>
1 quarto | 50 m² | Condomínio: R$ 250 | 1 vaga
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-todo-reformado-na-freguesia-270535159>
</td>
<td>
Excelente apartamento todo reformado na Freguesia
</td>
<td>
1500
</td>
<td>
Rio de Janeiro, Freguesia
</td>
<td>
1 quarto | 42 m² | Condomínio: R$ 390 | 1 vaga
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270991747>
</td>
<td>
Excelente Apartamento
</td>
<td>
2000
</td>
<td>
Rio de Janeiro, Recreio Dos Bandeirantes
</td>
<td>
3 quartos | 82 m² | Condomínio: R$ 970 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270990414>
</td>
<td>
Excelente Apartamento
</td>
<td>
1900
</td>
<td>
Rio de Janeiro, Recreio Dos Bandeirantes
</td>
<td>
2 quartos | 80 m² | Condomínio: R$ 300 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/barra-da-tijuca-cidade-jardim-empreendimento-reserva-do-parque-com-area-util-de-114-m-270988871>
</td>
<td>
Barra da Tijuca - Cidade Jardim, Empreendimento Reserva do Parque, com
área útil de 114 m
</td>
<td>
3500
</td>
<td>
Rio de Janeiro, Jacarepaguá
</td>
<td>
3 quartos | 114 m² | Condomínio: R$ 1300 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/apartamento-copacabana-3-quartos-270989551>
</td>
<td>
Apartamento Copacabana, 3 quartos
</td>
<td>
3300
</td>
<td>
Rio de Janeiro, Copacabana
</td>
<td>
3 quartos | 98 m² | Condomínio: R$ 979
</td>
</tr>
</tbody>
</table>
<h2 id="data-cleaning">
Data Cleaning
</h2>
<p>
Pode-se ver que o web scraping (ao menos para esses 5 exemplos) foi bem
feito pois os os dados foram extraídos adequadamente. Contudo, é
evidente a necessidade de se limpar os dados para poder os analisar. A
coluna de informações adicionais, por exemplo, informa dados de até
quatro variáveis: quantidade de quartos, quantidade de vagas de garagem,
área e o preço da taxa de condomínio. Para deixar o processo de limpeza
ainda mais difícil, nem todos os anúncios fornecem dados dessas quatro
variáveis.
</p>
<p>
Antes de partir para esse problema, vamos separa a coluna de bairro em
duas: uma de cidade e outra de bairro. Removi os imóveis que não são do
Rio de Janeiro ou de Niterói para fins de simplicidade.
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># remover os que nao sao do RJ ou de niteroi
</span><span class="n">df</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">str_detect</span><span class="p">(</span><span class="n">bairro</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Niter&#xF3;i&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">str_detect</span><span class="p">(</span><span class="n">bairro</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Rio de Janeiro&quot;</span><span class="p">))</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">separate</span><span class="p">(</span><span class="n">bairro</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">&quot;cidade&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bairro&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">()</span></code></pre>
</figure>
<table>
<thead>
<tr>
<th>
link
</th>
<th>
titulo
</th>
<th>
preco
</th>
<th>
cidade
</th>
<th>
bairro
</th>
<th>
adicional
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/village-pavuna-270991833>
</td>
<td>
Village pavuna
</td>
<td>
400
</td>
<td>
Rio de Janeiro
</td>
<td>
Pavuna
</td>
<td>
1 quarto | 50 m² | Condomínio: R$ 250 | 1 vaga
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-todo-reformado-na-freguesia-270535159>
</td>
<td>
Excelente apartamento todo reformado na Freguesia
</td>
<td>
1500
</td>
<td>
Rio de Janeiro
</td>
<td>
Freguesia
</td>
<td>
1 quarto | 42 m² | Condomínio: R$ 390 | 1 vaga
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270991747>
</td>
<td>
Excelente Apartamento
</td>
<td>
2000
</td>
<td>
Rio de Janeiro
</td>
<td>
Recreio Dos Bandeirantes
</td>
<td>
3 quartos | 82 m² | Condomínio: R$ 970 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270990414>
</td>
<td>
Excelente Apartamento
</td>
<td>
1900
</td>
<td>
Rio de Janeiro
</td>
<td>
Recreio Dos Bandeirantes
</td>
<td>
2 quartos | 80 m² | Condomínio: R$ 300 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/barra-da-tijuca-cidade-jardim-empreendimento-reserva-do-parque-com-area-util-de-114-m-270988871>
</td>
<td>
Barra da Tijuca - Cidade Jardim, Empreendimento Reserva do Parque, com
área útil de 114 m
</td>
<td>
3500
</td>
<td>
Rio de Janeiro
</td>
<td>
Jacarepaguá
</td>
<td>
3 quartos | 114 m² | Condomínio: R$ 1300 | 2 vagas
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/apartamento-copacabana-3-quartos-270989551>
</td>
<td>
Apartamento Copacabana, 3 quartos
</td>
<td>
3300
</td>
<td>
Rio de Janeiro
</td>
<td>
Copacabana
</td>
<td>
3 quartos | 98 m² | Condomínio: R$ 979
</td>
</tr>
</tbody>
</table>
<p>
Agora podemos partir para a limpeza da coluna de adicionais.
Primeiramente, vamos ver quantos anúncios possuem as quatro variáveis
adicionais:
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="c1"># substituir quartos por quarto
</span><span class="n">df</span><span class="o">$</span><span class="n">adicional</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="s2">&quot;quartos&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;quarto&quot;</span><span class="p">)</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="w"> </span><span class="n">tem_quarto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_detect</span><span class="p">(</span><span class="n">adicional</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;quarto&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">tem_area</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_detect</span><span class="p">(</span><span class="n">adicional</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;m&#xB2;&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">tem_taxa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_detect</span><span class="p">(</span><span class="n">adicional</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Condom&#xED;nio&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">tem_garagem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_detect</span><span class="p">(</span><span class="n">adicional</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;vaga&quot;</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">apply</span><span class="p">(</span><span class="n">df</span><span class="p">[,</span><span class="w"> </span><span class="m">7</span><span class="o">:</span><span class="m">10</span><span class="p">],</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="p">),</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code></pre>
</figure>
<figure class="highlight">
<pre><code class="language-text">## tem_quarto tem_area tem_taxa tem_garagem ## 100 94 94 80</code></pre>
</figure>
<p>
Assim, 100% dos apartamentos (dessa amostra de 50 apartamentos) têm
informação sobre a quantidade de quartos, 94% sobre área, 94% informam a
taxa de condomínio e 80% têm vaga de garagem.
</p>
<p>
É necessário usar o pacote
<code class="highlighter-rouge">stringr</code> para observar a posição
dos termos que identificam a variável:
</p>
<ul>
<li>
O substring “quarto” indica a presença de informação sobre quantidade de
quartos;
</li>
<li>
O substring “Condomínio:
R$&\#x201D; indica a presen&\#xE7;a de informa&\#xE7;&\#xE3;o sobre taxa do condom&\#xED;nio;&lt;/li&gt; &lt;li&gt;O substring &\#x201C;m&\#xB2;&\#x201D; indica a presen&\#xE7;a de informa&\#xE7;&\#xE3;o sobre &\#xE1;rea;&lt;/li&gt; &lt;li&gt;O substring &\#x201C;vaga&\#x201D; indica a presen&\#xE7;a de informa&\#xE7;&\#xE3;o sobre vagas de garagem.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;O desafio aqui &\#xE9; criar colunas adicionais para cada uma dessas categorias de informa&\#xE7;&\#xE3;o adicional. A seguir, eu comento linha a linha o procedimento necess&\#xE1;rio para realizar essa tarefa, que &\#xE9; basicamente o mesmo para as vari&\#xE1;veis.&lt;/p&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-r"&gt;&lt;span class="c1"&gt;\# COLUNA DE QUANTIDADE DE QUARTOS \# Quarto: pegar posicao inicial e final do string quarto \# Localizar trecho dentro do string referente a quartos &lt;/span&gt;&lt;span class="n"&gt;matriz\_posicao&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_locate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">adicional</span><span class="p">,</span><span class="w">
</span><span class="s2">"quarto"</span><span class="p">)</span><span
class="w"> </span><span class="c1">\# Voltar 2 posições no string para
pegar o número (ex: 2 quarto) </span><span
class="n">matriz\_posicao</span><span class="p">\[,</span><span
class="m">1</span><span class="p">\]</span><span class="w"> </span><span
class="o">&lt;-</span><span class="w"> </span><span
class="n">matriz\_posicao</span><span class="p">\[,</span><span
class="m">1</span><span class="p">\]</span><span class="w"> </span><span
class="o">-</span><span class="w"> </span><span class="m">2</span><span
class="w"> </span><span class="c1">\# extrair string com posições
iniciais e finais </span><span class="n">vetor\_quartos</span><span
class="w"> </span><span class="o">&lt;-</span><span class="w">
</span><span class="n">str\_sub</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;matriz\_posicao&lt;/span&gt;&lt;span class="p"&gt;\[,&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;\],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;matriz\_posicao&lt;/span&gt;&lt;span class="p"&gt;\[,&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;\])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;\# extrair apenas n&\#xFA;mero (primeiro caractere do string) e converter para numeric &lt;/span&gt;&lt;span class="n"&gt;vetor\_quartos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vetor\_quartos&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vetor\_quartos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;as.numeric&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;\# adicionar ao data frame &lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">qtd\_quarto</span><span class="w"> </span><span
class="o">&lt;-</span><span class="w"> </span><span
class="n">vetor\_quartos</span><span class="w"> </span><span
class="c1">\# Condominio \# retirar cifrao pra ficar mais facil
</span><span class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&lt;&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_replace\_all&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&quot;\\\\$"</span><span
class="p">,</span><span class="w"> </span><span
class="s2">"S"</span><span class="p">)</span><span class="w">
</span><span class="n">matriz\_posicao</span><span class="w">
</span><span class="o">&lt;-</span><span class="w"> </span><span
class="n">str\_locate</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&quot;Condom&\#xED;nio: RS &quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;\# mover cinco posicoes para pegar algarismos ap&\#xF3;s o RS &lt;/span&gt;&lt;span class="n"&gt;vetor\_taxa&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">adicional</span><span class="p">,</span><span class="w">
</span><span class="n">matriz\_posicao</span><span
class="p">\[,</span><span class="w"> </span><span
class="m">2</span><span class="p">\],</span><span class="w">
</span><span class="n">matriz\_posicao</span><span
class="p">\[,</span><span class="w"> </span><span
class="m">2</span><span class="p">\]</span><span class="w"> </span><span
class="o">+</span><span class="w"> </span><span class="m">4</span><span
class="p">)</span><span class="w"> </span><span class="c1">\# extrair
apenas numeros </span><span class="n">vetor\_taxa</span><span class="w">
</span><span class="o">%&lt;&gt;%</span><span class="w"> </span><span
class="n">parse\_number</span><span class="p">()</span><span class="w">
</span><span class="c1">\# vendo se funcionou </span><span
class="n">data.frame</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vetor\_taxa&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-text"&gt;\#\# df.adicional vetor\_taxa \#\# 1 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 250 \#\# 2 1 quarto | 42 m&\#xB2; | Condom&\#xED;nio: RS 390 | 1 vaga 390 \#\# 3 3 quarto | 82 m&\#xB2; | Condom&\#xED;nio: RS 970 | 2 vagas 970 \#\# 4 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 300 | 2 vagas 300 \#\# 5 3 quarto | 114 m&\#xB2; | Condom&\#xED;nio: RS 1300 | 2 vagas 1300 \#\# 6 3 quarto | 98 m&\#xB2; | Condom&\#xED;nio: RS 979 979 \#\# 7 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 990 | 1 vaga 990 \#\# 8 1 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 1000 \#\# 9 2 quarto | 84 m&\#xB2; | Condom&\#xED;nio: RS 923 | 1 vaga 923 \#\# 10 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 250 \#\# 11 4 quarto | 290 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 1000 \#\# 12 2 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 501 501 \#\# 13 1 quarto NA \#\# 14 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 0 0 \#\# 15 2 quarto | 96 m&\#xB2; | Condom&\#xED;nio: RS 1287 | 2 vagas 1287 \#\# 16 3 quarto | 130 m&\#xB2; | Condom&\#xED;nio: RS 1100 | 2 vagas 1100 \#\# 17 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 700 | 1 vaga 700 \#\# 18 1 quarto | 26 m&\#xB2; | Condom&\#xED;nio: RS 0 0 \#\# 19 3 quarto | 115 m&\#xB2; | Condom&\#xED;nio: RS 653 | 2 vagas 653 \#\# 20 2 quarto NA&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-r"&gt;&lt;span class="c1"&gt;\# Funcionou! Incorporar vetor ao data frame &lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">taxa\_condominio</span><span class="w"> </span><span
class="o">&lt;-</span><span class="w"> </span><span
class="n">vetor\_taxa</span><span class="w"> </span><span class="c1">\#
Área </span><span class="n">matriz\_posicao</span><span class="w">
</span><span class="o">&lt;-</span><span class="w"> </span><span
class="n">str\_locate</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&quot; m&\#xB2;&quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;\# voltar quatro posi&\#xE7;&\#xF5;es &lt;/span&gt;&lt;span class="n"&gt;vetor\_area&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">adicional</span><span class="p">,</span><span class="w">
</span><span class="n">matriz\_posicao</span><span
class="p">\[,</span><span
class="m">1</span><span class="p">\]</span><span class="w"> </span><span
class="o">-</span><span class="w"> </span><span class="m">4</span><span
class="p">,</span><span class="w"> </span><span
class="n">matriz\_posicao</span><span class="p">\[,</span><span
class="w"> </span><span
class="m">1</span><span class="p">\])</span><span class="w">
</span><span class="c1">\# converter para numerico </span><span
class="n">vetor\_area</span><span class="w"> </span><span
class="o">%&lt;&gt;%</span><span class="w"> </span><span
class="n">parse\_number</span><span class="p">()</span><span class="w">
</span><span class="c1">\# vendo se funcionou </span><span
class="n">data.frame</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vetor\_area&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-text"&gt;\#\# df.adicional vetor\_area \#\# 1 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 50 \#\# 2 1 quarto | 42 m&\#xB2; | Condom&\#xED;nio: RS 390 | 1 vaga 42 \#\# 3 3 quarto | 82 m&\#xB2; | Condom&\#xED;nio: RS 970 | 2 vagas 82 \#\# 4 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 300 | 2 vagas 80 \#\# 5 3 quarto | 114 m&\#xB2; | Condom&\#xED;nio: RS 1300 | 2 vagas 114 \#\# 6 3 quarto | 98 m&\#xB2; | Condom&\#xED;nio: RS 979 98 \#\# 7 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 990 | 1 vaga 70 \#\# 8 1 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 60 \#\# 9 2 quarto | 84 m&\#xB2; | Condom&\#xED;nio: RS 923 | 1 vaga 84 \#\# 10 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 50 \#\# 11 4 quarto | 290 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 290 \#\# 12 2 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 501 60 \#\# 13 1 quarto NA \#\# 14 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 0 80 \#\# 15 2 quarto | 96 m&\#xB2; | Condom&\#xED;nio: RS 1287 | 2 vagas 96 \#\# 16 3 quarto | 130 m&\#xB2; | Condom&\#xED;nio: RS 1100 | 2 vagas 130 \#\# 17 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 700 | 1 vaga 70 \#\# 18 1 quarto | 26 m&\#xB2; | Condom&\#xED;nio: RS 0 26 \#\# 19 3 quarto | 115 m&\#xB2; | Condom&\#xED;nio: RS 653 | 2 vagas 115 \#\# 20 2 quarto NA&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-r"&gt;&lt;span class="c1"&gt;\# Funcionou! Incorporar ao data frame &lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">area\_condominio</span><span class="w"> </span><span
class="o">&lt;-</span><span class="w"> </span><span
class="n">vetor\_area</span><span class="w"> </span><span class="c1">\#
Garagem </span><span class="n">matriz\_posicao</span><span class="w">
</span><span class="o">&lt;-</span><span class="w"> </span><span
class="n">str\_locate</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&quot; vaga&quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;\# voltar quatro posi&\#xE7;&\#xF5;es &lt;/span&gt;&lt;span class="n"&gt;vetor\_garagem&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;str\_sub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">adicional</span><span class="p">,</span><span class="w">
</span><span class="n">matriz\_posicao</span><span
class="p">\[,</span><span
class="m">1</span><span class="p">\]</span><span class="w"> </span><span
class="o">-</span><span class="w"> </span><span class="m">2</span><span
class="p">,</span><span class="w"> </span><span
class="n">matriz\_posicao</span><span class="p">\[,</span><span
class="w"> </span><span
class="m">1</span><span class="p">\])</span><span class="w">
</span><span class="c1">\# converter para numerico </span><span
class="n">vetor\_garagem</span><span class="w"> </span><span
class="o">%&lt;&gt;%</span><span class="w"> </span><span
class="n">readr</span><span class="o">::</span><span
class="n">parse\_number</span><span class="p">()</span><span class="w">
</span><span class="c1">\# vendo se funcionou </span><span
class="n">data.frame</span><span class="p">(</span><span
class="n">df</span><span
class="o">$&lt;/span&gt;&lt;span class="n"&gt;adicional&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vetor\_garagem&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-text"&gt;\#\# df.adicional vetor\_garagem \#\# 1 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 1 \#\# 2 1 quarto | 42 m&\#xB2; | Condom&\#xED;nio: RS 390 | 1 vaga 1 \#\# 3 3 quarto | 82 m&\#xB2; | Condom&\#xED;nio: RS 970 | 2 vagas 2 \#\# 4 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 300 | 2 vagas 2 \#\# 5 3 quarto | 114 m&\#xB2; | Condom&\#xED;nio: RS 1300 | 2 vagas 2 \#\# 6 3 quarto | 98 m&\#xB2; | Condom&\#xED;nio: RS 979 NA \#\# 7 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 990 | 1 vaga 1 \#\# 8 1 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 1 \#\# 9 2 quarto | 84 m&\#xB2; | Condom&\#xED;nio: RS 923 | 1 vaga 1 \#\# 10 1 quarto | 50 m&\#xB2; | Condom&\#xED;nio: RS 250 | 1 vaga 1 \#\# 11 4 quarto | 290 m&\#xB2; | Condom&\#xED;nio: RS 1000 | 1 vaga 1 \#\# 12 2 quarto | 60 m&\#xB2; | Condom&\#xED;nio: RS 501 NA \#\# 13 1 quarto NA \#\# 14 2 quarto | 80 m&\#xB2; | Condom&\#xED;nio: RS 0 NA \#\# 15 2 quarto | 96 m&\#xB2; | Condom&\#xED;nio: RS 1287 | 2 vagas 2 \#\# 16 3 quarto | 130 m&\#xB2; | Condom&\#xED;nio: RS 1100 | 2 vagas 2 \#\# 17 2 quarto | 70 m&\#xB2; | Condom&\#xED;nio: RS 700 | 1 vaga 1 \#\# 18 1 quarto | 26 m&\#xB2; | Condom&\#xED;nio: RS 0 NA \#\# 19 3 quarto | 115 m&\#xB2; | Condom&\#xED;nio: RS 653 | 2 vagas 2 \#\# 20 2 quarto NA&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class="highlight"&gt;&lt;pre&gt;&lt;code class="language-r"&gt;&lt;span class="c1"&gt;\# Funcionou! Incorporar ao data frame &lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;$</span><span
class="n">garagem</span><span class="w"> </span><span
class="o">&lt;-</span><span class="w"> </span><span
class="n">vetor\_garagem</span><span class="w"> </span><span
class="c1">\# Remover objetos desnecessários </span><span
class="n">rm</span><span class="p">(</span><span
class="n">matriz\_posicao</span><span class="p">,</span><span class="w">
</span><span class="n">vetor\_adicional</span><span
class="p">,</span><span class="w"> </span><span
class="n">vetor\_area</span><span class="p">,</span><span class="w">
</span><span class="n">vetor\_garagem</span><span
class="p">,</span><span class="w"> </span><span
class="n">vetor\_quartos</span><span class="p">,</span><span class="w">
</span><span class="n">vetor\_taxa</span><span class="p">)</span></code>
</pre>
</figure>
<p>
Vamos ver como ficou o data frame final
</p>
<figure class="highlight">
<pre><code class="language-r"><span class="n">head</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">()</span></code></pre>
</figure>
<table>
<thead>
<tr>
<th>
link
</th>
<th>
titulo
</th>
<th>
preco
</th>
<th>
cidade
</th>
<th>
bairro
</th>
<th>
adicional
</th>
<th>
tem\_quarto
</th>
<th>
tem\_area
</th>
<th>
tem\_taxa
</th>
<th>
tem\_garagem
</th>
<th>
qtd\_quarto
</th>
<th>
taxa\_condominio
</th>
<th>
area\_condominio
</th>
<th>
garagem
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/village-pavuna-270991833>
</td>
<td>
Village pavuna
</td>
<td>
400
</td>
<td>
Rio de Janeiro
</td>
<td>
Pavuna
</td>
<td>
1 quarto | 50 m² | Condomínio: RS 250 | 1 vaga
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
1
</td>
<td>
250
</td>
<td>
50
</td>
<td>
1
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-todo-reformado-na-freguesia-270535159>
</td>
<td>
Excelente apartamento todo reformado na Freguesia
</td>
<td>
1500
</td>
<td>
Rio de Janeiro
</td>
<td>
Freguesia
</td>
<td>
1 quarto | 42 m² | Condomínio: RS 390 | 1 vaga
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
1
</td>
<td>
390
</td>
<td>
42
</td>
<td>
1
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270991747>
</td>
<td>
Excelente Apartamento
</td>
<td>
2000
</td>
<td>
Rio de Janeiro
</td>
<td>
Recreio Dos Bandeirantes
</td>
<td>
3 quarto | 82 m² | Condomínio: RS 970 | 2 vagas
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
3
</td>
<td>
970
</td>
<td>
82
</td>
<td>
2
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/excelente-apartamento-270990414>
</td>
<td>
Excelente Apartamento
</td>
<td>
1900
</td>
<td>
Rio de Janeiro
</td>
<td>
Recreio Dos Bandeirantes
</td>
<td>
2 quarto | 80 m² | Condomínio: RS 300 | 2 vagas
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
2
</td>
<td>
300
</td>
<td>
80
</td>
<td>
2
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/barra-da-tijuca-cidade-jardim-empreendimento-reserva-do-parque-com-area-util-de-114-m-270988871>
</td>
<td>
Barra da Tijuca - Cidade Jardim, Empreendimento Reserva do Parque, com
área útil de 114 m
</td>
<td>
3500
</td>
<td>
Rio de Janeiro
</td>
<td>
Jacarepaguá
</td>
<td>
3 quarto | 114 m² | Condomínio: RS 1300 | 2 vagas
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
3
</td>
<td>
1300
</td>
<td>
114
</td>
<td>
2
</td>
</tr>
<tr>
<td>
<http://rj.olx.com.br/rio-de-janeiro-e-regiao/imoveis/apartamento-copacabana-3-quartos-270989551>
</td>
<td>
Apartamento Copacabana, 3 quartos
</td>
<td>
3300
</td>
<td>
Rio de Janeiro
</td>
<td>
Copacabana
</td>
<td>
3 quarto | 98 m² | Condomínio: RS 979
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
TRUE
</td>
<td>
FALSE
</td>
<td>
3
</td>
<td>
979
</td>
<td>
98
</td>
<td>
NA
</td>
</tr>
</tbody>
</table>
<h2 id="conclusão">
Conclusão
</h2>
<p>
No próximo post, analisaremos os dados obtidos aqui.
</p>
</article>
</div>

  <footer class="article-footer">

    <aside class="share">
  <a href="http://b.hatena.ne.jp/add?mode=confirm&url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&title=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="はてなブックマーク" class="ht" target="_blank" rel="nofollow">B!</a>
  <a href="http://twitter.com/intent/tweet?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&text=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning&tw_p=tweetbutton" title="Twitterでシェア" class="tw" target="_blank" rel="nofollow"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="http://www.facebook.com/sharer.php?u=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&t=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="Facebookでシェア" class="fb" target="_blank" rel="nofollow"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  <a href="https://plus.google.com/share?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f" title="Google Plusでシェア" class="gp" target="_blank" rel="nofollow"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
  <a href="http://getpocket.com/edit?url=%2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f&title=Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning" title="Pocketに保存" class="pk" target="_blank" rel="nofollow"><i class="fa fa-get-pocket" aria-hidden="true"></i></a>
  <a href="http://line.me/R/msg/text/?Como%20usar%20o%20R%20para%20escolher%20um%20lugar%20para%20morar%281%29%20-%20Web%20Scraping%20e%20Data%20Cleaning %2f2016%2f11%2f18%2fcomo-usar-o-r-para-escolher-um-lugar-para-morar1---web-scraping-e-data-cleaning%2f" title="LINEでシェア" class="ln" target="_blank" rel="nofollow">LINE</a>
</aside>


    <section class="footer">
      <div>
        <nav class="crumb">
          <ol>
            <li><a href="../../../../"><i class="fa fa-home" aria-hidden="true"></i>TOP</a></li>
            
            <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="../../../../post/" itemprop="url"><span itemprop="title">POST</span></a></li>
            
            <li class="active">Como usar o R para escolher um lugar para morar(1) - Web Scraping e Data Cleaning</li>
          </ol>
        </nav>
      </div>
    </section>

    
    
    
    <section class="footer">
      <header>
        <a href="../../../../categories/">CATEGORIES</a>
      </header>
      <div>
        <ul class="terms">
          
          <li><a href="../../../../categories/paixao-por-dados/">paixao-por-dados</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    
  </footer>

</article>


    <div class="adj">
      <div class="mrow">
        
        <div class="mcol c6">
          <header>Previous Article</header>
          <article class="lism">
  <a href="../../../../2016/10/27/meu-primeiro-pacote-r-aplica%C3%A7%C3%A3o-para-s%C3%A9rie-temporal-do-varejo/">
    <div class="thumb thumb-f3a5f5592892cab63594ffd2cfb50646"></div>

    <div class="inner">
      <div class="title">Meu primeiro pacote R: aplicação para série temporal do varejo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2016-10-27T03:00:00JST">Oct 27, 2016</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
        
        <div class="mcol c6">
          <header>Next Article</header>
          <article class="lism">
  <a href="../../../../2016/11/18/como-usar-o-r-para-escolher-um-lugar-para-morar-4---mapa-interativo/">
    <div class="thumb thumb-f2ff127e7bf6ef3df4083c0121f6ea18"></div>

    <div class="inner">
      <div class="title">Como usar o R para escolher um lugar para morar (4) - Mapa interativo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2016-11-18T03:00:00JST">Nov 18, 2016</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

        </div>
        
      </div>
    </div>

    
  </div>
  <div class="mcol c4">
    <aside class="l-sidebar">

  <div class="sections sidebar">
    <section class="sidebar">
      <header>LATESTS</header>
      <div>
        <div class="articles sm">
          
          <article class="lism">
  <a href="../../../../2017/06/08/instalando-anaconda---tensorflow---keras-para-r-no-ubuntu-16.04-server/">
    <div class="thumb thumb-4ca7aebf68b206ff8ebd3d339880cdbe"></div>

    <div class="inner">
      <div class="title">Instalando Anaconda &#43; TensorFlow &#43; Keras para R no Ubuntu 16.04 Server</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-08T18:12:00JST">Jun 8, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/05/keras-colocando-deep-learning-no-pipeline/">
    <div class="thumb thumb-ea657ec9d261bce8d42f524cfa192f24"></div>

    <div class="inner">
      <div class="title">Keras: colocando deep learning no pipeline</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-05T11:07:31JST">Jun 5, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/06/01/a-kind-of-magick/">
    <div class="thumb thumb-7a7e4e54f6ba40cf59b708a1b1438641"></div>

    <div class="inner">
      <div class="title">A kind of magick</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-06-01T20:26:00JST">Jun 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/28/pdf-e-ocr/">
    <div class="thumb thumb-d477bfffbde22e4c5cc9e81c9ff3b556"></div>

    <div class="inner">
      <div class="title">PDF e OCR</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-28T11:07:31JST">May 28, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/23/slides-da-minha-apresenta%C3%A7%C3%A3o-no-ser-2017/">
    <div class="thumb thumb-ee8e80ec72747e392813c983fcdbc25b"></div>

    <div class="inner">
      <div class="title">Slides da minha apresentação no SER 2017</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-23T03:00:00JST">May 23, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/19/web-scraping-do-site-da-secretaria-de-seguran%C3%A7a-p%C3%BAblica-de-s%C3%A3o-paulo/">
    <div class="thumb thumb-3da60970259d2fd391b3fb0a4ff77692"></div>

    <div class="inner">
      <div class="title">Web scraping do site da Secretaria de Segurança Pública de São Paulo</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-19T20:26:00JST">May 19, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/16/blog-paix%C3%A3o-por-dados-estar%C3%A1-no-meetup-1%C2%BA-#analyticsemtudo---dados-abertos/">
    <div class="thumb thumb-5b8f5e73458a26798a261512427240c8"></div>

    <div class="inner">
      <div class="title">Blog Paixão por Dados estará no meetup 1º #AnalyticsEmTudo - Dados Abertos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-16T03:00:00JST">May 16, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/04/gr%C3%A1ficos-miojo-mapas-tem%C3%A1ticos-do-brasil-em-3-minutos-ou-menos/">
    <div class="thumb thumb-d0bebe978f4bf6a447682918aea12509"></div>

    <div class="inner">
      <div class="title">Gráficos miojo: Mapas temáticos do Brasil em 3 minutos ou menos</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-04T20:26:00JST">May 4, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/05/01/as-cores-da-marvel-vs-dc/">
    <div class="thumb thumb-adbafb32d64272a6d88e49a78a8c536a"></div>

    <div class="inner">
      <div class="title">As cores da Marvel vs DC</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-05-01T20:26:00JST">May 1, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
          <article class="lism">
  <a href="../../../../2017/04/29/diagramas-de-venn-em-r/">
    <div class="thumb thumb-88b3c0abd2dfcce2dd7b25a3500eae82"></div>

    <div class="inner">
      <div class="title">Diagramas de Venn em R</div>

      <ul class="facts sm">
        <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2017-04-29T20:26:00JST">Apr 29, 2017</time></li>
        <li><i class="fa fa-bookmark" aria-hidden="true"></i>POST</li>
        
      </ul>

    </div>
  </a>
</article>

          
        </div>
      </div>
    </section>

    
    <section class="sidebar">
      <header>CATEGORIES</header>
      <div>
        <ul class="terms">
          <li><a href="../../../../categories/curso-r">curso-r</a></li><li><a href="../../../../categories/paixao-por-dados">paixao-por-dados</a></li>
        </ul>
      </div>
    </section>
    
    <section class="sidebar">
      <header>TAGS</header>
      <div>
        <ul class="terms">
          
        </ul>
      </div>
    </section>
    
  </div>

</aside>

  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="l-container">
        <p><span class="h-logo">&copy; A Hugo website</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/dim0627/hugo_theme_robust">Robust</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

